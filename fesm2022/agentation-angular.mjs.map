{"version":3,"file":"agentation-angular.mjs","sources":["../../../projects/agentation/src/lib/icons/icon.component.ts","../../../projects/agentation/src/lib/icons/icon-data.ts","../../../projects/agentation/src/lib/components/marker.component.ts","../../../projects/agentation/src/lib/components/marker.component.html","../../../projects/agentation/src/lib/utils/freeze-animations.ts","../../../projects/agentation/src/lib/components/popup.component.ts","../../../projects/agentation/src/lib/components/popup.component.html","../../../projects/agentation/src/lib/constants.ts","../../../projects/agentation/src/lib/components/settings.component.ts","../../../projects/agentation/src/lib/components/settings.component.html","../../../projects/agentation/src/lib/components/overlay-container.ts","../../../projects/agentation/src/lib/utils/storage.ts","../../../projects/agentation/src/lib/utils/sync.ts","../../../projects/agentation/src/lib/utils/output-generator.ts","../../../projects/agentation/src/lib/services/agentation.service.ts","../../../projects/agentation/src/lib/utils/helpers.ts","../../../projects/agentation/src/lib/utils/element-identification.ts","../../../projects/agentation/src/lib/detection/angular-detector.ts","../../../projects/agentation/src/lib/services/dom-event.service.ts","../../../projects/agentation/src/lib/services/server-sync.service.ts","../../../projects/agentation/src/lib/components/agentation.component.ts","../../../projects/agentation/src/lib/components/agentation.component.html","../../../projects/agentation/src/public-api.ts","../../../projects/agentation/src/agentation-angular.ts"],"sourcesContent":["// =============================================================================\n// SVGアイコンコンポーネント\n// =============================================================================\n\nimport { Component, ChangeDetectionStrategy, Input, inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport type { IconData } from './icon-data';\n\n/**\n * SVGアイコンコンポーネント\n * icon-data.tsのデータを受け取りSVGを描画する\n *\n * 注意: defs/cssAnimationsはライブラリ内部のicon-data.tsからのみ供給される。\n * 外部からの未信頼データを渡さないこと。\n */\n@Component({\n  selector: 'agentation-icon',\n  standalone: true,\n  imports: [CommonModule],\n  template: `\n    <svg\n      [attr.width]=\"size\"\n      [attr.height]=\"size\"\n      [attr.viewBox]=\"data.viewBox\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      @if (data.defs) {\n        <defs [innerHTML]=\"sanitizedDefs\"></defs>\n      }\n      @if (data.cssAnimations) {\n        <style [innerHTML]=\"sanitizedStyles\"></style>\n      }\n      @for (path of data.paths; track $index) {\n        <path\n          [attr.d]=\"path.d\"\n          [attr.stroke]=\"path.stroke || null\"\n          [attr.stroke-width]=\"path.strokeWidth || null\"\n          [attr.stroke-linecap]=\"path.strokeLinecap || null\"\n          [attr.stroke-linejoin]=\"path.strokeLinejoin || null\"\n          [attr.fill]=\"path.fill || null\"\n          [attr.class]=\"path.className || null\"\n          [ngStyle]=\"path.style || null\"\n        />\n      }\n      @if (data.circles) {\n        @for (circle of data.circles; track $index) {\n          <circle\n            [attr.cx]=\"circle.cx\"\n            [attr.cy]=\"circle.cy\"\n            [attr.r]=\"circle.r\"\n            [attr.stroke]=\"circle.stroke || null\"\n            [attr.stroke-width]=\"circle.strokeWidth || null\"\n            [attr.fill]=\"circle.fill || null\"\n            [attr.class]=\"circle.className || null\"\n          />\n        }\n      }\n    </svg>\n  `,\n  styles: [`\n    :host {\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n    }\n  `],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IconComponent {\n  /** アイコンデータ */\n  @Input({ required: true }) data!: IconData;\n  /** アイコンサイズ（px） */\n  @Input() size = 16;\n\n  private readonly sanitizer = inject(DomSanitizer);\n\n  /** サニタイズ済みdefsコンテンツ */\n  get sanitizedDefs(): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(this.data.defs || '');\n  }\n\n  /** サニタイズ済みCSSアニメーション */\n  get sanitizedStyles(): SafeHtml {\n    return this.sanitizer.bypassSecurityTrustHtml(this.data.cssAnimations || '');\n  }\n}\n","// =============================================================================\n// SVGアイコンデータ定義\n// =============================================================================\n//\n// ReactコンポーネントからフレームワークフリーなSVGデータ形式に変換\n// Angularコンポーネントでの描画に使用\n//\n\n// SVGパスデータの型定義\nexport interface PathData {\n  d: string;\n  stroke?: string;\n  strokeWidth?: string;\n  strokeLinecap?: string;\n  strokeLinejoin?: string;\n  fill?: string;\n  className?: string;\n  style?: Record<string, string>;\n}\n\nexport interface CircleData {\n  cx: string;\n  cy: string;\n  r: string;\n  stroke?: string;\n  strokeWidth?: string;\n  fill?: string;\n  className?: string;\n}\n\nexport interface RectData {\n  x?: string;\n  y?: string;\n  width: string;\n  height: string;\n  fill?: string;\n}\n\nexport interface TextData {\n  x: string;\n  y: string;\n  textAnchor?: string;\n  fontSize?: string;\n  fontWeight?: string;\n  fill?: string;\n  fontFamily?: string;\n  className?: string;\n  content: string;\n}\n\nexport interface IconData {\n  viewBox: string;\n  paths: PathData[];\n  circles?: CircleData[];\n  rects?: RectData[];\n  texts?: TextData[];\n  defs?: string; // 生のSVG defs内容\n  cssAnimations?: string; // CSSアニメーション（AnimatedIconDataから昇格、テンプレートで安全にアクセスするため）\n}\n\nexport interface AnimatedIconData extends IconData {\n  cssAnimations?: string; // CSS @keyframesとアニメーションクラス\n  variants?: Record<string, { paths: PathData[]; circles?: CircleData[] }>;\n}\n\n// =============================================================================\n// 基本アイコン\n// =============================================================================\n\n// 閉じるアイコン（小さいX）\nexport const ICON_CLOSE: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M4 4l8 8M12 4l-8 8',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// プラスアイコン\nexport const ICON_PLUS: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M8 3v10M3 8h10',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// チェックマークアイコン\nexport const ICON_CHECK: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M3 8l3.5 3.5L13 5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// チェックボックス用チェックマーク（小型、チェックボックスに最適化）\nexport const ICON_CHECK_SMALL: IconData = {\n  viewBox: '0 0 14 14',\n  paths: [\n    {\n      d: 'M3.9375 7L6.125 9.1875L10.5 4.8125',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// リスト+スパークルアイコン\nexport const ICON_LIST_SPARKLE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M11.5 12L5.5 12',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M18.5 6.75L5.5 6.75',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M9.25 17.25L5.5 17.25',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M16 12.75L16.5179 13.9677C16.8078 14.6494 17.3506 15.1922 18.0323 15.4821L19.25 16L18.0323 16.5179C17.3506 16.8078 16.8078 17.3506 16.5179 18.0323L16 19.25L15.4821 18.0323C15.1922 17.3506 14.6494 16.8078 13.9677 16.5179L12.75 16L13.9677 15.4821C14.6494 15.1922 15.1922 14.6494 15.4821 13.9677L16 12.75Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinejoin: 'round',\n    },\n  ],\n  defs: '<clipPath id=\"clip0_list_sparkle\"><rect width=\"24\" height=\"24\" fill=\"white\" /></clipPath>',\n};\n\n// ヘルプ/クエスチョンマークアイコン\nexport const ICON_HELP: IconData = {\n  viewBox: '0 0 20 20',\n  paths: [\n    {\n      d: 'M8.5 8.75C8.5 7.92 9.17 7.25 10 7.25C10.83 7.25 11.5 7.92 11.5 8.75C11.5 9.58 10.83 10.25 10 10.25V11',\n      stroke: 'currentColor',\n      strokeWidth: '1.25',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  circles: [\n    {\n      cx: '10',\n      cy: '10.5',\n      r: '5.25',\n      stroke: 'currentColor',\n      strokeWidth: '1.25',\n    },\n    {\n      cx: '10',\n      cy: '13',\n      r: '0.75',\n      fill: 'currentColor',\n    },\n  ],\n};\n\n// コピーアイコン（重なった四角形）\nexport const ICON_COPY_ALT: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M4.75 11.25C4.75 10.4216 5.42157 9.75 6.25 9.75H12.75C13.5784 9.75 14.25 10.4216 14.25 11.25V17.75C14.25 18.5784 13.5784 19.25 12.75 19.25H6.25C5.42157 19.25 4.75 18.5784 4.75 17.75V11.25Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n    },\n    {\n      d: 'M17.25 14.25H17.75C18.5784 14.25 19.25 13.5784 19.25 12.75V6.25C19.25 5.42157 18.5784 4.75 17.75 4.75H11.25C10.4216 4.75 9.75 5.42157 9.75 6.25V6.75',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// 目アイコン（オリジナル）\nexport const ICON_EYE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M4.91516 12.7108C4.63794 12.2883 4.63705 11.7565 4.91242 11.3328C5.84146 9.9033 8.30909 6.74994 12 6.74994C15.6909 6.74994 18.1585 9.9033 19.0876 11.3328C19.3629 11.7565 19.3621 12.2883 19.0848 12.7108C18.1537 14.13 15.6873 17.2499 12 17.2499C8.31272 17.2499 5.8463 14.13 4.91516 12.7108Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M12 14.25C13.2426 14.25 14.25 13.2426 14.25 12C14.25 10.7574 13.2426 9.75 12 9.75C10.7574 9.75 9.75 10.7574 9.75 12C9.75 13.2426 10.7574 14.25 12 14.25Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// 目アイコン（大きい瞳孔バージョン）\nexport const ICON_EYE_ALT: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M3.91752 12.7539C3.65127 12.2996 3.65037 11.7515 3.9149 11.2962C4.9042 9.59346 7.72688 5.49994 12 5.49994C16.2731 5.49994 19.0958 9.59346 20.0851 11.2962C20.3496 11.7515 20.3487 12.2996 20.0825 12.7539C19.0908 14.4459 16.2694 18.4999 12 18.4999C7.73064 18.4999 4.90918 14.4459 3.91752 12.7539Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M12 14.8261C13.5608 14.8261 14.8261 13.5608 14.8261 12C14.8261 10.4392 13.5608 9.17392 12 9.17392C10.4392 9.17392 9.17391 10.4392 9.17391 12C9.17391 13.5608 10.4392 14.8261 12 14.8261Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// 目閉じアイコン（スラッシュ付き）\nexport const ICON_EYE_CLOSED: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M18.6025 9.28503C18.9174 8.9701 19.4364 8.99481 19.7015 9.35271C20.1484 9.95606 20.4943 10.507 20.7342 10.9199C21.134 11.6086 21.1329 12.4454 20.7303 13.1328C20.2144 14.013 19.2151 15.5225 17.7723 16.8193C16.3293 18.1162 14.3852 19.2497 12.0008 19.25C11.4192 19.25 10.8638 19.1823 10.3355 19.0613C9.77966 18.934 9.63498 18.2525 10.0382 17.8493C10.2412 17.6463 10.5374 17.573 10.8188 17.6302C11.1993 17.7076 11.5935 17.75 12.0008 17.75C13.8848 17.7497 15.4867 16.8568 16.7693 15.7041C18.0522 14.5511 18.9606 13.1867 19.4363 12.375C19.5656 12.1543 19.5659 11.8943 19.4373 11.6729C19.2235 11.3049 18.921 10.8242 18.5364 10.3003C18.3085 9.98991 18.3302 9.5573 18.6025 9.28503ZM12.0008 4.75C12.5814 4.75006 13.1358 4.81803 13.6632 4.93953C14.2182 5.06741 14.362 5.74812 13.9593 6.15091C13.7558 6.35435 13.4589 6.42748 13.1771 6.36984C12.7983 6.29239 12.4061 6.25006 12.0008 6.25C10.1167 6.25 8.51415 7.15145 7.23028 8.31543C5.94678 9.47919 5.03918 10.8555 4.56426 11.6729C4.43551 11.8945 4.43582 12.1542 4.56524 12.375C4.77587 12.7343 5.07189 13.2012 5.44718 13.7105C5.67623 14.0213 5.65493 14.4552 5.38193 14.7282C5.0671 15.0431 4.54833 15.0189 4.28292 14.6614C3.84652 14.0736 3.50813 13.5369 3.27129 13.1328C2.86831 12.4451 2.86717 11.6088 3.26739 10.9199C3.78185 10.0345 4.77959 8.51239 6.22247 7.2041C7.66547 5.89584 9.61202 4.75 12.0008 4.75Z',\n      fill: 'currentColor',\n    },\n    {\n      d: 'M5 19L19 5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// 目+マイナスアイコン（非表示/折りたたみ状態）\nexport const ICON_EYE_MINUS: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M4.91516 12.7108C4.63794 12.2883 4.63705 11.7565 4.91242 11.3328C5.84146 9.9033 8.30909 6.74994 12 6.74994C15.6909 6.74994 18.1585 9.9033 19.0876 11.3328C19.3629 11.7565 19.3621 12.2883 19.0848 12.7108C18.1537 14.13 15.6873 17.2499 12 17.2499C8.31272 17.2499 5.8463 14.13 4.91516 12.7108Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M9 12H15',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// 歯車アイコン\nexport const ICON_GEAR: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M10.6504 5.81117C10.9939 4.39628 13.0061 4.39628 13.3496 5.81117C13.5715 6.72517 14.6187 7.15891 15.4219 6.66952C16.6652 5.91193 18.0881 7.33479 17.3305 8.57815C16.8411 9.38134 17.2748 10.4285 18.1888 10.6504C19.6037 10.9939 19.6037 13.0061 18.1888 13.3496C17.2748 13.5715 16.8411 14.6187 17.3305 15.4219C18.0881 16.6652 16.6652 18.0881 15.4219 17.3305C14.6187 16.8411 13.5715 17.2748 13.3496 18.1888C13.0061 19.6037 10.9939 19.6037 10.6504 18.1888C10.4285 17.2748 9.38135 16.8411 8.57815 17.3305C7.33479 18.0881 5.91193 16.6652 6.66952 15.4219C7.15891 14.6187 6.72517 13.5715 5.81117 13.3496C4.39628 13.0061 4.39628 10.9939 5.81117 10.6504C6.72517 10.4285 7.15891 9.38134 6.66952 8.57815C5.91193 7.33479 7.33479 5.91192 8.57815 6.66952C9.38135 7.15891 10.4285 6.72517 10.6504 5.81117Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  circles: [\n    {\n      cx: '12',\n      cy: '12',\n      r: '2.5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n    },\n  ],\n};\n\n// 一時停止アイコン（角丸長方形バージョン）\nexport const ICON_PAUSE_ALT: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M9.25 5.75C9.80228 5.75 10.25 6.19772 10.25 6.75L10.25 17.25C10.25 17.8023 9.80228 18.25 9.25 18.25L6.75 18.25C6.19772 18.25 5.75 17.8023 5.75 17.25L5.75 6.75C5.75 6.19772 6.19772 5.75 6.75 5.75L9.25 5.75Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n    },\n    {\n      d: 'M17.25 5.75C17.8023 5.75 18.25 6.19772 18.25 6.75L18.25 17.25C18.25 17.8023 17.8023 18.25 17.25 18.25L14.75 18.25C14.1977 18.25 13.75 17.8023 13.75 17.25L13.75 6.75C13.75 6.19772 14.1977 5.75 14.75 5.75L17.25 5.75Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n    },\n  ],\n};\n\n// 一時停止アイコン（シンプルライン）\nexport const ICON_PAUSE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M8 6L8 18',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n    {\n      d: 'M16 18L16 6',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n    },\n  ],\n};\n\n// 再生アイコン（右向き三角形）\nexport const ICON_PLAY_ALT: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M17.75 10.701C18.75 11.2783 18.75 12.7217 17.75 13.299L8.75 18.4952C7.75 19.0725 6.5 18.3509 6.5 17.1962L6.5 6.80384C6.5 5.64914 7.75 4.92746 8.75 5.50481L17.75 10.701Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n    },\n  ],\n};\n\n// ゴミ箱アイコン（塗り潰し）\nexport const ICON_TRASH_ALT: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M13.5 4C14.7426 4 15.75 5.00736 15.75 6.25V7H18.5C18.9142 7 19.25 7.33579 19.25 7.75C19.25 8.16421 18.9142 8.5 18.5 8.5H17.9678L17.6328 16.2217C17.61 16.7475 17.5912 17.1861 17.5469 17.543C17.5015 17.9087 17.4225 18.2506 17.2461 18.5723C16.9747 19.0671 16.5579 19.4671 16.0518 19.7168C15.7227 19.8791 15.3772 19.9422 15.0098 19.9717C14.6514 20.0004 14.2126 20 13.6865 20H10.3135C9.78735 20 9.34856 20.0004 8.99023 19.9717C8.62278 19.9422 8.27729 19.8791 7.94824 19.7168C7.44205 19.4671 7.02532 19.0671 6.75391 18.5723C6.57751 18.2506 6.49853 17.9087 6.45312 17.543C6.40883 17.1861 6.39005 16.7475 6.36719 16.2217L6.03223 8.5H5.5C5.08579 8.5 4.75 8.16421 4.75 7.75C4.75 7.33579 5.08579 7 5.5 7H8.25V6.25C8.25 5.00736 9.25736 4 10.5 4H13.5ZM7.86621 16.1562C7.89013 16.7063 7.90624 17.0751 7.94141 17.3584C7.97545 17.6326 8.02151 17.7644 8.06934 17.8516C8.19271 18.0763 8.38239 18.2577 8.6123 18.3711C8.70153 18.4151 8.83504 18.4545 9.11035 18.4766C9.39482 18.4994 9.76335 18.5 10.3135 18.5H13.6865C14.2367 18.5 14.6052 18.4994 14.8896 18.4766C15.165 18.4545 15.2985 18.4151 15.3877 18.3711C15.6176 18.2577 15.8073 18.0763 15.9307 17.8516C15.9785 17.7644 16.0245 17.6326 16.0586 17.3584C16.0938 17.0751 16.1099 16.7063 16.1338 16.1562L16.4668 8.5H7.5332L7.86621 16.1562ZM9.97656 10.75C10.3906 10.7371 10.7371 11.0626 10.75 11.4766L10.875 15.4766C10.8879 15.8906 10.5624 16.2371 10.1484 16.25C9.73443 16.2629 9.38794 15.9374 9.375 15.5234L9.25 11.5234C9.23706 11.1094 9.56255 10.7629 9.97656 10.75ZM14.0244 10.75C14.4384 10.7635 14.7635 11.1105 14.75 11.5244L14.6201 15.5244C14.6066 15.9384 14.2596 16.2634 13.8457 16.25C13.4317 16.2365 13.1067 15.8896 13.1201 15.4756L13.251 11.4756C13.2645 11.0617 13.6105 10.7366 14.0244 10.75ZM10.5 5.5C10.0858 5.5 9.75 5.83579 9.75 6.25V7H14.25V6.25C14.25 5.83579 13.9142 5.5 13.5 5.5H10.5Z',\n      fill: 'currentColor',\n    },\n  ],\n};\n\n// チャットバブル+省略記号\nexport const ICON_CHAT_ELLIPSIS: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M18.8875 19.25L19.6112 19.0533C19.6823 19.3148 19.6068 19.5943 19.4137 19.7844C19.2206 19.9746 18.9399 20.0457 18.6795 19.9706L18.8875 19.25ZM14.9631 18.244L15.263 18.9314L14.9631 18.244ZM18.0914 15.6309L17.4669 15.2156L18.0914 15.6309ZM4.75 11.8041H5.5C5.5 15.2664 8.39065 18.1081 12 18.1081V18.8581V19.6081C7.60123 19.6081 4 16.1334 4 11.8041H4.75ZM19.25 11.8041H18.5C18.5 8.34166 15.6094 5.5 12 5.5V4.75V4C16.3988 4 20 7.47476 20 11.8041H19.25ZM12 4.75V5.5C8.39065 5.5 5.5 8.34166 5.5 11.8041H4.75H4C4 7.47476 7.60123 4 12 4V4.75ZM18.0914 15.6309L17.4669 15.2156C18.1213 14.2315 18.5 13.0612 18.5 11.8041H19.25H20C20 13.3681 19.5276 14.8257 18.716 16.0462L18.0914 15.6309ZM18.8875 19.25L18.1638 19.4467L17.2953 16.2517L18.019 16.055L18.7428 15.8583L19.6112 19.0533L18.8875 19.25ZM12 18.8581V18.1081C12.9509 18.1081 13.8518 17.9105 14.6632 17.5565L14.9631 18.244L15.263 18.9314C14.2652 19.3667 13.1603 19.6081 12 19.6081V18.8581ZM15.3144 18.2188L15.5224 17.4982L19.0955 18.5294L18.8875 19.25L18.6795 19.9706L15.1064 18.9394L15.3144 18.2188ZM14.9631 18.244L14.6632 17.5565C14.925 17.4423 15.2286 17.4134 15.5224 17.4982L15.3144 18.2188L15.1064 18.9394C15.1677 18.957 15.223 18.9489 15.263 18.9314L14.9631 18.244ZM18.0914 15.6309L18.716 16.0462C18.7451 16.0024 18.7636 15.9351 18.7428 15.8583L18.019 16.055L17.2953 16.2517C17.1957 15.8853 17.2716 15.5093 17.4669 15.2156L18.0914 15.6309Z',\n      fill: 'currentColor',\n    },\n  ],\n  circles: [\n    { cx: '15', cy: '11.75', r: '1', fill: 'currentColor' },\n    { cx: '12', cy: '11.75', r: '1', fill: 'currentColor' },\n    { cx: '9', cy: '11.75', r: '1', fill: 'currentColor' },\n  ],\n};\n\n// チェックマーク（24x24）\nexport const ICON_CHECKMARK: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M16.25 8.75L10 15.25L7.25 12.25',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  defs: '<clipPath id=\"clip0_2_45\"><rect width=\"24\" height=\"24\" fill=\"white\" /></clipPath>',\n};\n\n// 大きいチェックマーク\nexport const ICON_CHECKMARK_LARGE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M17.5962 7.75L9.42308 16.25L6.15385 12.6538',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  defs: '<clipPath id=\"clip0_2_37\"><rect width=\"24\" height=\"24\" fill=\"white\" /></clipPath>',\n};\n\n// 丸付きチェックマーク\nexport const ICON_CHECKMARK_CIRCLE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M12 20C7.58172 20 4 16.4182 4 12C4 7.58172 7.58172 4 12 4C16.4182 4 20 7.58172 20 12C20 16.4182 16.4182 20 12 20Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M15 10L11 14.25L9.25 12.25',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  defs: '<clipPath id=\"clip0_checkmark_circle\"><rect width=\"24\" height=\"24\" fill=\"white\" /></clipPath>',\n};\n\n// Xマーク/閉じるアイコン\nexport const ICON_XMARK: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M16.25 16.25L7.75 7.75',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n    {\n      d: 'M7.75 16.25L16.25 7.75',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n  defs: '<clipPath id=\"clip0_2_53\"><rect width=\"24\" height=\"24\" fill=\"white\" /></clipPath>',\n};\n\n// Xマーク大（大きいバリアント）\nexport const ICON_XMARK_LARGE: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M16.7198 6.21973C17.0127 5.92683 17.4874 5.92683 17.7803 6.21973C18.0732 6.51262 18.0732 6.9874 17.7803 7.28027L13.0606 12L17.7803 16.7197C18.0732 17.0126 18.0732 17.4874 17.7803 17.7803C17.4875 18.0731 17.0127 18.0731 16.7198 17.7803L12.0001 13.0605L7.28033 17.7803C6.98746 18.0731 6.51268 18.0731 6.21979 17.7803C5.92689 17.4874 5.92689 17.0126 6.21979 16.7197L10.9395 12L6.21979 7.28027C5.92689 6.98738 5.92689 6.51262 6.21979 6.21973C6.51268 5.92683 6.98744 5.92683 7.28033 6.21973L12.0001 10.9395L16.7198 6.21973Z',\n      fill: 'currentColor',\n    },\n  ],\n};\n\n// 太陽アイコン（ライトモード）\nexport const ICON_SUN: IconData = {\n  viewBox: '0 0 20 20',\n  paths: [\n    { d: 'M9.99999 12.7082C11.4958 12.7082 12.7083 11.4956 12.7083 9.99984C12.7083 8.50407 11.4958 7.2915 9.99999 7.2915C8.50422 7.2915 7.29166 8.50407 7.29166 9.99984C7.29166 11.4956 8.50422 12.7082 9.99999 12.7082Z', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M10 3.9585V5.05698', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M10 14.9429V16.0414', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M5.7269 5.72656L6.50682 6.50649', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M13.4932 13.4932L14.2731 14.2731', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M3.95834 10H5.05683', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M14.9432 10H16.0417', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M5.7269 14.2731L6.50682 13.4932', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n    { d: 'M13.4932 6.50649L14.2731 5.72656', stroke: 'currentColor', strokeWidth: '1.25', strokeLinecap: 'round', strokeLinejoin: 'round' },\n  ],\n};\n\n// 月アイコン（ダークモード）\nexport const ICON_MOON: IconData = {\n  viewBox: '0 0 20 20',\n  paths: [\n    {\n      d: 'M15.5 10.4955C15.4037 11.5379 15.0124 12.5314 14.3721 13.3596C13.7317 14.1878 12.8688 14.8165 11.8841 15.1722C10.8995 15.5278 9.83397 15.5957 8.81217 15.3679C7.79038 15.1401 6.8546 14.6259 6.11434 13.8857C5.37408 13.1454 4.85995 12.2096 4.63211 11.1878C4.40427 10.166 4.47215 9.10048 4.82781 8.11585C5.18346 7.13123 5.81218 6.26825 6.64039 5.62791C7.4686 4.98756 8.46206 4.59634 9.5045 4.5C8.89418 5.32569 8.60049 6.34302 8.67685 7.36695C8.75321 8.39087 9.19454 9.35339 9.92058 10.0794C10.6466 10.8055 11.6091 11.2468 12.6331 11.3231C13.657 11.3995 14.6743 11.1058 15.5 10.4955Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.13793',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// 編集/ペンシルアイコン（マーカーホバー用）\nexport const ICON_EDIT: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M11.3799 6.9572L9.05645 4.63375M11.3799 6.9572L6.74949 11.5699C6.61925 11.6996 6.45577 11.791 6.277 11.8339L4.29549 12.3092C3.93194 12.3964 3.60478 12.0683 3.69297 11.705L4.16585 9.75693C4.20893 9.57947 4.29978 9.4172 4.42854 9.28771L9.05645 4.63375M11.3799 6.9572L12.3455 5.98759C12.9839 5.34655 12.9839 4.31002 12.3455 3.66897C11.7033 3.02415 10.6594 3.02415 10.0172 3.66897L9.06126 4.62892L9.05645 4.63375',\n      stroke: 'currentColor',\n      strokeWidth: '0.9',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// ゴミ箱アイコン（削除ボタン用）\nexport const ICON_TRASH: IconData = {\n  viewBox: '0 0 24 24',\n  paths: [\n    {\n      d: 'M13.5 4C14.7426 4 15.75 5.00736 15.75 6.25V7H18.5C18.9142 7 19.25 7.33579 19.25 7.75C19.25 8.16421 18.9142 8.5 18.5 8.5H17.9678L17.6328 16.2217C17.61 16.7475 17.5912 17.1861 17.5469 17.543C17.5015 17.9087 17.4225 18.2506 17.2461 18.5723C16.9747 19.0671 16.5579 19.4671 16.0518 19.7168C15.7227 19.8791 15.3772 19.9422 15.0098 19.9717C14.6514 20.0004 14.2126 20 13.6865 20H10.3135C9.78735 20 9.34856 20.0004 8.99023 19.9717C8.62278 19.9422 8.27729 19.8791 7.94824 19.7168C7.44205 19.4671 7.02532 19.0671 6.75391 18.5723C6.57751 18.2506 6.49853 17.9087 6.45312 17.543C6.40883 17.1861 6.39005 16.7475 6.36719 16.2217L6.03223 8.5H5.5C5.08579 8.5 4.75 8.16421 4.75 7.75C4.75 7.33579 5.08579 7 5.5 7H8.25V6.25C8.25 5.00736 9.25736 4 10.5 4H13.5ZM7.86621 16.1562C7.89013 16.7063 7.90624 17.0751 7.94141 17.3584C7.97545 17.6326 8.02151 17.7644 8.06934 17.8516C8.19271 18.0763 8.38239 18.2577 8.6123 18.3711C8.70153 18.4151 8.83504 18.4545 9.11035 18.4766C9.39482 18.4994 9.76335 18.5 10.3135 18.5H13.6865C14.2367 18.5 14.6052 18.4994 14.8896 18.4766C15.165 18.4545 15.2985 18.4151 15.3877 18.3711C15.6176 18.2577 15.8073 18.0763 15.9307 17.8516C15.9785 17.7644 16.0245 17.6326 16.0586 17.3584C16.0938 17.0751 16.1099 16.7063 16.1338 16.1562L16.4668 8.5H7.5332L7.86621 16.1562ZM9.97656 10.75C10.3906 10.7371 10.7371 11.0626 10.75 11.4766L10.875 15.4766C10.8879 15.8906 10.5624 16.2371 10.1484 16.25C9.73443 16.2629 9.38794 15.9374 9.375 15.5234L9.25 11.5234C9.23706 11.1094 9.56255 10.7629 9.97656 10.75ZM14.0244 10.75C14.4383 10.7635 14.7635 11.1105 14.75 11.5244L14.6201 15.5244C14.6066 15.9384 14.2596 16.2634 13.8457 16.25C13.4317 16.2365 13.1067 15.8896 13.1201 15.4756L13.251 11.4756C13.2645 11.0617 13.6105 10.7366 14.0244 10.75ZM10.5 5.5C10.0858 5.5 9.75 5.83579 9.75 6.25V7H14.25V6.25C14.25 5.83579 13.9142 5.5 13.5 5.5H10.5Z',\n      fill: 'currentColor',\n    },\n  ],\n};\n\n// シェブロン左\nexport const ICON_CHEVRON_LEFT: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M8.5 3.5L4 8L8.5 12.5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// シェブロン右\nexport const ICON_CHEVRON_RIGHT: IconData = {\n  viewBox: '0 0 16 16',\n  paths: [\n    {\n      d: 'M8.5 11.5L12 8L8.5 4.5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n    },\n  ],\n};\n\n// =============================================================================\n// アニメーション付きアイコン\n// =============================================================================\n\n// アニメーション付きチェックマーク（描画+バウンスエフェクト）\nexport const ICON_CHECK_SMALL_ANIMATED: AnimatedIconData = {\n  viewBox: '0 0 14 14',\n  cssAnimations: `\n    @keyframes checkDraw {\n      0% { stroke-dashoffset: 12; }\n      100% { stroke-dashoffset: 0; }\n    }\n    @keyframes checkBounce {\n      0% { transform: scale(0.5); opacity: 0; }\n      50% { transform: scale(1.12); opacity: 1; }\n      75% { transform: scale(0.95); }\n      100% { transform: scale(1); }\n    }\n    .check-path-animated {\n      stroke-dasharray: 12;\n      stroke-dashoffset: 0;\n      transform-origin: center;\n      animation: checkDraw 0.18s ease-out, checkBounce 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);\n    }\n  `,\n  paths: [\n    {\n      d: 'M3.9375 7L6.125 9.1875L10.5 4.8125',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      className: 'check-path-animated',\n    },\n  ],\n};\n\n// アニメーション付きコピー/チェックマークアイコン\nexport const ICON_COPY_ANIMATED: AnimatedIconData = {\n  viewBox: '0 0 24 24',\n  cssAnimations: `\n    .copy-icon, .check-icon {\n      transition: opacity 0.2s ease, transform 0.2s ease;\n    }\n  `,\n  // デフォルト表示: コピーアイコン\n  paths: [\n    {\n      d: 'M4.75 11.25C4.75 10.4216 5.42157 9.75 6.25 9.75H12.75C13.5784 9.75 14.25 10.4216 14.25 11.25V17.75C14.25 18.5784 13.5784 19.25 12.75 19.25H6.25C5.42157 19.25 4.75 18.5784 4.75 17.75V11.25Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      className: 'copy-icon',\n    },\n    {\n      d: 'M17.25 14.25H17.75C18.5784 14.25 19.25 13.5784 19.25 12.75V6.25C19.25 5.42157 18.5784 4.75 17.75 4.75H11.25C10.4216 4.75 9.75 5.42157 9.75 6.25V6.75',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'copy-icon',\n    },\n  ],\n  variants: {\n    copy: {\n      paths: [\n        {\n          d: 'M4.75 11.25C4.75 10.4216 5.42157 9.75 6.25 9.75H12.75C13.5784 9.75 14.25 10.4216 14.25 11.25V17.75C14.25 18.5784 13.5784 19.25 12.75 19.25H6.25C5.42157 19.25 4.75 18.5784 4.75 17.75V11.25Z',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          className: 'copy-icon',\n        },\n        {\n          d: 'M17.25 14.25H17.75C18.5784 14.25 19.25 13.5784 19.25 12.75V6.25C19.25 5.42157 18.5784 4.75 17.75 4.75H11.25C10.4216 4.75 9.75 5.42157 9.75 6.25V6.75',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'copy-icon',\n        },\n      ],\n    },\n    check: {\n      paths: [\n        {\n          d: 'M12 20C7.58172 20 4 16.4182 4 12C4 7.58172 7.58172 4 12 4C16.4182 4 20 7.58172 20 12C20 16.4182 16.4182 20 12 20Z',\n          stroke: '#22c55e',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'check-icon',\n        },\n        {\n          d: 'M15 10L11 14.25L9.25 12.25',\n          stroke: '#22c55e',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'check-icon',\n        },\n      ],\n    },\n  },\n};\n\n// アニメーション付き送信矢印アイコン（紙飛行機スタイル、チェック/エラー切り替え）\nexport const ICON_SEND_ARROW: AnimatedIconData = {\n  viewBox: '0 0 24 24',\n  cssAnimations: `\n    .send-arrow-icon, .send-check-icon, .send-error-icon {\n      transition: opacity 0.15s ease, transform 0.15s ease;\n    }\n  `,\n  // デフォルト表示: 送信矢印\n  paths: [\n    {\n      d: 'M9.875 14.125L12.3506 19.6951C12.7184 20.5227 13.9091 20.4741 14.2083 19.6193L18.8139 6.46032C19.0907 5.6695 18.3305 4.90933 17.5397 5.18611L4.38072 9.79174C3.52589 10.0909 3.47731 11.2816 4.30494 11.6494L9.875 14.125ZM9.875 14.125L13.375 10.625',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      className: 'send-arrow-icon',\n    },\n  ],\n  variants: {\n    idle: {\n      paths: [\n        {\n          d: 'M9.875 14.125L12.3506 19.6951C12.7184 20.5227 13.9091 20.4741 14.2083 19.6193L18.8139 6.46032C19.0907 5.6695 18.3305 4.90933 17.5397 5.18611L4.38072 9.79174C3.52589 10.0909 3.47731 11.2816 4.30494 11.6494L9.875 14.125ZM9.875 14.125L13.375 10.625',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'send-arrow-icon',\n        },\n      ],\n    },\n    sent: {\n      paths: [\n        {\n          d: 'M12 20C7.58172 20 4 16.4182 4 12C4 7.58172 7.58172 4 12 4C16.4182 4 20 7.58172 20 12C20 16.4182 16.4182 20 12 20Z',\n          stroke: '#22c55e',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'send-check-icon',\n        },\n        {\n          d: 'M15 10L11 14.25L9.25 12.25',\n          stroke: '#22c55e',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'send-check-icon',\n        },\n      ],\n    },\n    failed: {\n      paths: [\n        {\n          d: 'M12 20C7.58172 20 4 16.4182 4 12C4 7.58172 7.58172 4 12 4C16.4182 4 20 7.58172 20 12C20 16.4182 16.4182 20 12 20Z',\n          stroke: '#ef4444',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'send-error-icon',\n        },\n        {\n          d: 'M12 8V12',\n          stroke: '#ef4444',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'send-error-icon',\n        },\n      ],\n      circles: [\n        { cx: '12', cy: '15', r: '0.5', fill: '#ef4444', stroke: '#ef4444', strokeWidth: '1' },\n      ],\n    },\n  },\n};\n\n// アニメーション付き送信アイコン（「エージェントに送信」ボタン用）\nexport const ICON_SEND_ANIMATED: AnimatedIconData = {\n  viewBox: '0 0 22 21',\n  cssAnimations: `\n    .send-icon, .sent-icon {\n      transition: opacity 0.2s ease, transform 0.2s ease;\n    }\n  `,\n  // デフォルト表示: 送信アイコン\n  paths: [\n    {\n      d: 'M9.5 5H6.5C4.84315 5 3.5 6.34315 3.5 8V15C3.5 16.6569 4.84315 18 6.5 18H13.5C15.1569 18 16.5 16.6569 16.5 15V12',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'send-icon',\n    },\n    {\n      d: 'M13.5 8.5L18.5 3.5M18.5 3.5L14.4524 3.5M18.5 3.5L18.5 7.54762',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      className: 'send-icon',\n    },\n    {\n      d: 'M7.5 13.75H12.5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'send-icon',\n    },\n    {\n      d: 'M7.5 10.75H10.5',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'send-icon',\n    },\n  ],\n  variants: {\n    send: {\n      paths: [\n        {\n          d: 'M9.5 5H6.5C4.84315 5 3.5 6.34315 3.5 8V15C3.5 16.6569 4.84315 18 6.5 18H13.5C15.1569 18 16.5 16.6569 16.5 15V12',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'send-icon',\n        },\n        {\n          d: 'M13.5 8.5L18.5 3.5M18.5 3.5L14.4524 3.5M18.5 3.5L18.5 7.54762',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'send-icon',\n        },\n        {\n          d: 'M7.5 13.75H12.5',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'send-icon',\n        },\n        {\n          d: 'M7.5 10.75H10.5',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'send-icon',\n        },\n      ],\n    },\n    sent: {\n      paths: [\n        {\n          d: 'M11 19C6.58172 19 3 15.4182 3 11C3 6.58172 6.58172 3 11 3C15.4182 3 19 6.58172 19 11C19 15.4182 15.4182 19 11 19Z',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'sent-icon',\n        },\n        {\n          d: 'M14 9L10 13.25L8.25 11.25',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'sent-icon',\n        },\n      ],\n    },\n  },\n};\n\n// アニメーション付き目アイコン（開閉状態の切り替え）\nexport const ICON_EYE_ANIMATED: AnimatedIconData = {\n  viewBox: '0 0 24 24',\n  cssAnimations: `\n    .eye-open, .eye-closed {\n      transition: opacity 0.2s ease;\n    }\n  `,\n  // デフォルト表示: 目を開いた状態\n  paths: [\n    {\n      d: 'M3.91752 12.7539C3.65127 12.2996 3.65037 11.7515 3.9149 11.2962C4.9042 9.59346 7.72688 5.49994 12 5.49994C16.2731 5.49994 19.0958 9.59346 20.0851 11.2962C20.3496 11.7515 20.3487 12.2996 20.0825 12.7539C19.0908 14.4459 16.2694 18.4999 12 18.4999C7.73064 18.4999 4.90918 14.4459 3.91752 12.7539Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      className: 'eye-open',\n    },\n    {\n      d: 'M12 14.8261C13.5608 14.8261 14.8261 13.5608 14.8261 12C14.8261 10.4392 13.5608 9.17392 12 9.17392C10.4392 9.17392 9.17391 10.4392 9.17391 12C9.17391 13.5608 10.4392 14.8261 12 14.8261Z',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      strokeLinejoin: 'round',\n      className: 'eye-open',\n    },\n  ],\n  variants: {\n    open: {\n      paths: [\n        {\n          d: 'M3.91752 12.7539C3.65127 12.2996 3.65037 11.7515 3.9149 11.2962C4.9042 9.59346 7.72688 5.49994 12 5.49994C16.2731 5.49994 19.0958 9.59346 20.0851 11.2962C20.3496 11.7515 20.3487 12.2996 20.0825 12.7539C19.0908 14.4459 16.2694 18.4999 12 18.4999C7.73064 18.4999 4.90918 14.4459 3.91752 12.7539Z',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'eye-open',\n        },\n        {\n          d: 'M12 14.8261C13.5608 14.8261 14.8261 13.5608 14.8261 12C14.8261 10.4392 13.5608 9.17392 12 9.17392C10.4392 9.17392 9.17391 10.4392 9.17391 12C9.17391 13.5608 10.4392 14.8261 12 14.8261Z',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          strokeLinejoin: 'round',\n          className: 'eye-open',\n        },\n      ],\n    },\n    closed: {\n      paths: [\n        {\n          d: 'M18.6025 9.28503C18.9174 8.9701 19.4364 8.99481 19.7015 9.35271C20.1484 9.95606 20.4943 10.507 20.7342 10.9199C21.134 11.6086 21.1329 12.4454 20.7303 13.1328C20.2144 14.013 19.2151 15.5225 17.7723 16.8193C16.3293 18.1162 14.3852 19.2497 12.0008 19.25C11.4192 19.25 10.8638 19.1823 10.3355 19.0613C9.77966 18.934 9.63498 18.2525 10.0382 17.8493C10.2412 17.6463 10.5374 17.573 10.8188 17.6302C11.1993 17.7076 11.5935 17.75 12.0008 17.75C13.8848 17.7497 15.4867 16.8568 16.7693 15.7041C18.0522 14.5511 18.9606 13.1867 19.4363 12.375C19.5656 12.1543 19.5659 11.8943 19.4373 11.6729C19.2235 11.3049 18.921 10.8242 18.5364 10.3003C18.3085 9.98991 18.3302 9.5573 18.6025 9.28503ZM12.0008 4.75C12.5814 4.75006 13.1358 4.81803 13.6632 4.93953C14.2182 5.06741 14.362 5.74812 13.9593 6.15091C13.7558 6.35435 13.4589 6.42748 13.1771 6.36984C12.7983 6.29239 12.4061 6.25006 12.0008 6.25C10.1167 6.25 8.51415 7.15145 7.23028 8.31543C5.94678 9.47919 5.03918 10.8555 4.56426 11.6729C4.43551 11.8945 4.43582 12.1542 4.56524 12.375C4.77587 12.7343 5.07189 13.2012 5.44718 13.7105C5.67623 14.0213 5.65493 14.4552 5.38193 14.7282C5.0671 15.0431 4.54833 15.0189 4.28292 14.6614C3.84652 14.0736 3.50813 13.5369 3.27129 13.1328C2.86831 12.4451 2.86717 11.6088 3.26739 10.9199C3.78185 10.0345 4.77959 8.51239 6.22247 7.2041C7.66547 5.89584 9.61202 4.75 12.0008 4.75Z',\n          fill: 'currentColor',\n          className: 'eye-closed',\n        },\n        {\n          d: 'M5 19L19 5',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'eye-closed',\n        },\n      ],\n    },\n  },\n};\n\n// アニメーション付き一時停止/再生アイコン\nexport const ICON_PAUSE_PLAY_ANIMATED: AnimatedIconData = {\n  viewBox: '0 0 24 24',\n  cssAnimations: `\n    .pause-bar, .play-triangle {\n      transition: opacity 0.15s ease;\n    }\n  `,\n  // デフォルト表示: 一時停止（2本のバー）\n  paths: [\n    {\n      d: 'M8 6L8 18',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'pause-bar',\n    },\n    {\n      d: 'M16 18L16 6',\n      stroke: 'currentColor',\n      strokeWidth: '1.5',\n      strokeLinecap: 'round',\n      className: 'pause-bar',\n    },\n  ],\n  variants: {\n    pause: {\n      paths: [\n        {\n          d: 'M8 6L8 18',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'pause-bar',\n        },\n        {\n          d: 'M16 18L16 6',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          strokeLinecap: 'round',\n          className: 'pause-bar',\n        },\n      ],\n    },\n    play: {\n      paths: [\n        {\n          d: 'M17.75 10.701C18.75 11.2783 18.75 12.7217 17.75 13.299L8.75 18.4952C7.75 19.0725 6.5 18.3509 6.5 17.1962L6.5 6.80384C6.5 5.64914 7.75 4.92746 8.75 5.50481L17.75 10.701Z',\n          stroke: 'currentColor',\n          strokeWidth: '1.5',\n          className: 'play-triangle',\n        },\n      ],\n    },\n  },\n};\n\n// アニメーション付きバニーマスコット\nexport const ICON_ANIMATED_BUNNY: AnimatedIconData = {\n  viewBox: '0 0 28 28',\n  cssAnimations: `\n    @keyframes bunnyEnterEar {\n      0% { opacity: 0; transform: scale(0.8); }\n      100% { opacity: 1; transform: scale(1); }\n    }\n    @keyframes bunnyEnterFace {\n      0% { opacity: 0; transform: scale(0.9); }\n      100% { opacity: 1; transform: scale(1); }\n    }\n    @keyframes bunnyEnterEye {\n      0% { opacity: 0; transform: scale(0.5); }\n      100% { opacity: 1; transform: scale(1); }\n    }\n    @keyframes leftEyeLook {\n      0%, 8% { transform: translate(0, 0); }\n      10%, 18% { transform: translate(1.5px, 0); }\n      20%, 22% { transform: translate(1.5px, 0) scaleY(0.1); }\n      24%, 32% { transform: translate(1.5px, 0); }\n      35%, 48% { transform: translate(-0.8px, -0.6px); }\n      52%, 54% { transform: translate(0, 0) scaleY(0.1); }\n      56%, 68% { transform: translate(0, 0); }\n      72%, 82% { transform: translate(-0.5px, 0.5px); }\n      85%, 100% { transform: translate(0, 0); }\n    }\n    @keyframes rightEyeLook {\n      0%, 8% { transform: translate(0, 0); }\n      10%, 18% { transform: translate(0.8px, 0); }\n      20%, 22% { transform: translate(0.8px, 0) scaleY(0.1); }\n      24%, 32% { transform: translate(0.8px, 0); }\n      35%, 48% { transform: translate(-1.5px, -0.6px); }\n      52%, 54% { transform: translate(0, 0) scaleY(0.1); }\n      56%, 68% { transform: translate(0, 0); }\n      72%, 82% { transform: translate(-1.2px, 0.5px); }\n      85%, 100% { transform: translate(0, 0); }\n    }\n    @keyframes leftEarTwitch {\n      0%, 9% { transform: rotate(0deg); }\n      12% { transform: rotate(-8deg); }\n      16%, 34% { transform: rotate(0deg); }\n      38% { transform: rotate(-12deg); }\n      42% { transform: rotate(-6deg); }\n      48%, 100% { transform: rotate(0deg); }\n    }\n    @keyframes rightEarTwitch {\n      0%, 9% { transform: rotate(0deg); }\n      12% { transform: rotate(6deg); }\n      16%, 34% { transform: rotate(0deg); }\n      38% { transform: rotate(10deg); }\n      42% { transform: rotate(4deg); }\n      48%, 71% { transform: rotate(0deg); }\n      74% { transform: rotate(8deg); }\n      78%, 100% { transform: rotate(0deg); }\n    }\n    .bunny-eye-left {\n      opacity: 0;\n      animation: bunnyEnterEye 0.3s ease-out 0.35s forwards, leftEyeLook 5s ease-in-out 0.65s infinite;\n      transform-origin: center;\n      transform-box: fill-box;\n    }\n    .bunny-eye-right {\n      opacity: 0;\n      animation: bunnyEnterEye 0.3s ease-out 0.4s forwards, rightEyeLook 5s ease-in-out 0.7s infinite;\n      transform-origin: center;\n      transform-box: fill-box;\n    }\n    .bunny-ear-left {\n      opacity: 0;\n      animation: bunnyEnterEar 0.3s ease-out 0.1s forwards, leftEarTwitch 5s ease-in-out 0.4s infinite;\n      transform-origin: bottom center;\n      transform-box: fill-box;\n    }\n    .bunny-ear-right {\n      opacity: 0;\n      animation: bunnyEnterEar 0.3s ease-out 0.15s forwards, rightEarTwitch 5s ease-in-out 0.45s infinite;\n      transform-origin: bottom center;\n      transform-box: fill-box;\n    }\n    .bunny-face {\n      opacity: 0;\n      animation: bunnyEnterFace 0.3s ease-out 0.25s forwards;\n      transform-origin: center;\n      transform-box: fill-box;\n    }\n    svg:hover .bunny-eye-left,\n    svg:hover .bunny-eye-right {\n      opacity: 0;\n      transition: opacity 0.2s ease;\n    }\n    .bunny-happy-face {\n      opacity: 0;\n      transition: opacity 0.2s ease;\n    }\n    svg:hover .bunny-happy-face {\n      opacity: 1;\n    }\n  `,\n  paths: [\n    // 左耳\n    {\n      d: 'M3.738 10.2164L7.224 2.007H9.167L5.676 10.2164H3.738ZM10.791 6.42705C10.791 5.90346 10.726 5.42764 10.596 4.99959C10.47 4.57155 10.292 4.16643 10.063 3.78425C9.833 3.39825 9.56 3.01797 9.243 2.64343C8.926 2.26507 8.767 2.07589 8.767 2.07589L10.24 0.957996C10.24 0.957996 10.433 1.17203 10.819 1.60007C11.209 2.0243 11.559 2.49056 11.869 2.99886C12.178 3.50717 12.413 4.04222 12.574 4.60403C12.734 5.16584 12.814 5.77352 12.814 6.42705C12.814 7.10734 12.73 7.7303 12.562 8.29593C12.394 8.85774 12.153 9.3966 11.84 9.9126C11.526 10.4247 11.181 10.8833 10.802 11.2884C10.428 11.6974 10.24 11.9018 10.24 11.9018L8.767 10.7839C8.767 10.7839 8.924 10.5948 9.237 10.2164C9.554 9.8419 9.83 9.4597 10.063 9.06985C10.3 8.6762 10.479 8.26726 10.602 7.84304C10.728 7.41499 10.791 6.943 10.791 6.42705Z',\n      fill: 'currentColor',\n      className: 'bunny-ear-left',\n    },\n    // 右耳\n    {\n      d: 'M15.003 10.2164L18.489 2.007H20.432L16.941 10.2164H15.003ZM22.056 6.42705C22.056 5.90346 21.991 5.42764 21.861 4.99959C21.735 4.57155 21.557 4.16643 21.328 3.78425C21.098 3.39825 20.825 3.01797 20.508 2.64343C20.191 2.26507 20.032 2.07589 20.032 2.07589L21.505 0.957996C21.505 0.957996 21.698 1.17203 22.084 1.60007C22.474 2.0243 22.824 2.49056 23.133 2.99886C23.443 3.50717 23.678 4.04222 23.839 4.60403C23.999 5.16584 24.079 5.77352 24.079 6.42705C24.079 7.10734 23.995 7.7303 23.827 8.29593C23.659 8.85774 23.418 9.3966 23.105 9.9126C22.791 10.4247 22.445 10.8833 22.067 11.2884C21.693 11.6974 21.505 11.9018 21.505 11.9018L20.032 10.7839C20.032 10.7839 20.189 10.5948 20.502 10.2164C20.819 9.8419 21.094 9.4597 21.328 9.06985C21.565 8.6762 21.744 8.26726 21.866 7.84304C21.993 7.41499 22.056 6.943 22.056 6.42705Z',\n      fill: 'currentColor',\n      className: 'bunny-ear-right',\n    },\n    // 顔の輪郭\n    {\n      d: 'M2.03 20.4328C2.03 20.9564 2.093 21.4322 2.219 21.8602C2.345 22.2883 2.523 22.6953 2.752 23.0813C2.981 23.4635 3.254 23.8419 3.572 24.2164C3.889 24.5948 4.047 24.7839 4.047 24.7839L2.574 25.9018C2.574 25.9018 2.379 25.6878 1.989 25.2598C1.603 24.8355 1.256 24.3693 0.946 23.861C0.636 23.3527 0.401 22.8176 0.241 22.2558C0.08 21.694 0 21.0863 0 20.4328C0 19.7525 0.084 19.1314 0.252 18.5696C0.421 18.004 0.661 17.4651 0.975 16.953C1.288 16.4371 1.632 15.9765 2.007 15.5714C2.385 15.1625 2.574 14.958 2.574 14.958L4.047 16.0759C4.047 16.0759 3.889 16.2651 3.572 16.6434C3.258 17.018 2.983 17.4021 2.746 17.7957C2.513 18.1855 2.335 18.5945 2.213 19.0225C2.091 19.4467 2.03 19.9168 2.03 20.4328ZM23.687 20.4271C23.687 19.9035 23.622 19.4276 23.492 18.9996C23.366 18.5715 23.188 18.1664 22.959 17.7843C22.729 17.3982 22.456 17.018 22.139 16.6434C21.822 16.2651 21.663 16.0759 21.663 16.0759L23.136 14.958C23.136 14.958 23.329 15.172 23.715 15.6001C24.105 16.0243 24.455 16.4906 24.765 16.9989C25.074 17.5072 25.309 18.0422 25.47 18.604C25.63 19.1658 25.71 19.7735 25.71 20.4271C25.71 21.1073 25.626 21.7303 25.458 22.2959C25.29 22.8577 25.049 23.3966 24.736 23.9126C24.422 24.4247 24.077 24.8833 23.698 25.2884C23.324 25.6974 23.136 25.9018 23.136 25.9018L21.663 24.7839C21.663 24.7839 21.82 24.5948 22.133 24.2164C22.45 23.8419 22.726 23.4597 22.959 23.0698C23.196 22.6762 23.375 22.2673 23.498 21.843C23.624 21.415 23.687 20.943 23.687 20.4271Z',\n      fill: 'currentColor',\n      className: 'bunny-face',\n    },\n  ],\n  circles: [\n    // 左目\n    { cx: '8.277', cy: '20.466', r: '1.8', fill: 'currentColor', className: 'bunny-eye-left' },\n    // 右目\n    { cx: '19.878', cy: '20.466', r: '1.8', fill: 'currentColor', className: 'bunny-eye-right' },\n  ],\n  rects: [\n    // ホバー領域（透明）\n    { width: '28', height: '28', fill: 'transparent' },\n  ],\n  texts: [\n    // ホバー時のハッピーフェイス\n    {\n      x: '14',\n      y: '26',\n      textAnchor: 'middle',\n      fontSize: '12',\n      fontWeight: 'bold',\n      fontFamily: 'system-ui, -apple-system, sans-serif',\n      className: 'bunny-happy-face',\n      content: '\\u02C3 \\u1D55 \\u02C2', // ˃ ᵕ ˂\n    },\n  ],\n};\n","// =============================================================================\n// マーカーコンポーネント\n// =============================================================================\n//\n// アノテーション位置に表示される番号バッジ。\n// クリック動作（編集/削除）とホバーエフェクトをサポート。\n//\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  Input,\n  Output,\n  EventEmitter,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IconComponent } from '../icons/icon.component';\nimport { ICON_CLOSE, ICON_EDIT } from '../icons/icon-data';\n\n@Component({\n  selector: 'agentation-marker',\n  standalone: true,\n  imports: [CommonModule, IconComponent],\n  templateUrl: './marker.component.html',\n  styleUrl: './marker.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MarkerComponent {\n  /** アノテーションID */\n  @Input({ required: true }) annotationId!: string;\n  /** マーカー番号（1から開始） */\n  @Input({ required: true }) number!: number;\n  /** X座標（ビューポート幅の%） */\n  @Input({ required: true }) x!: number;\n  /** Y座標（px - ドキュメント上部からの絶対位置） */\n  @Input({ required: true }) y!: number;\n  /** スクロールY値 */\n  @Input() scrollY = 0;\n  /** fixed配置かどうか */\n  @Input() isFixed = false;\n  /** アクセントカラー */\n  @Input() accentColor = '#3c82f7';\n  /** 退場アニメーション中か */\n  @Input() isExiting = false;\n  /** ホバー中か */\n  @Input() isHovered = false;\n  /** 番号変更アニメーション */\n  @Input() isRenumbering = false;\n  /** クリック動作モード */\n  @Input() clickBehavior: 'edit' | 'delete' = 'edit';\n\n  /** マーカークリック */\n  @Output() markerClick = new EventEmitter<string>();\n  /** マーカーホバー開始 */\n  @Output() markerHoverStart = new EventEmitter<string>();\n  /** マーカーホバー終了 */\n  @Output() markerHoverEnd = new EventEmitter<string>();\n\n  // アイコンデータ\n  readonly closeIcon = ICON_CLOSE;\n  readonly editIcon = ICON_EDIT;\n\n  /** マーカーの表示位置（top） */\n  get topPosition(): number {\n    return this.isFixed ? this.y : this.y - this.scrollY;\n  }\n\n  /** マーカーのスタイル */\n  get markerStyle(): Record<string, string> {\n    return {\n      position: 'fixed',\n      left: `${this.x}%`,\n      top: `${this.topPosition}px`,\n      transform: 'translate(-50%, -50%)',\n      zIndex: '100002',\n    };\n  }\n\n  /** マーカーのCSSクラス */\n  get markerClass(): string {\n    const classes = ['agentation-marker'];\n    if (this.isExiting) classes.push('agentation-marker--exiting');\n    if (this.isHovered) classes.push('agentation-marker--hovered');\n    if (this.isRenumbering) classes.push('agentation-marker--renumbering');\n    return classes.join(' ');\n  }\n\n  onClick(event: MouseEvent): void {\n    event.stopPropagation();\n    event.preventDefault();\n    this.markerClick.emit(this.annotationId);\n  }\n\n  onMouseEnter(): void {\n    this.markerHoverStart.emit(this.annotationId);\n  }\n\n  onMouseLeave(): void {\n    this.markerHoverEnd.emit(this.annotationId);\n  }\n}\n","<div\n  [class]=\"markerClass\"\n  [ngStyle]=\"markerStyle\"\n  [style.--accent-color]=\"accentColor\"\n  data-feedback-toolbar\n  (click)=\"onClick($event)\"\n  (mouseenter)=\"onMouseEnter()\"\n  (mouseleave)=\"onMouseLeave()\"\n>\n  <div class=\"agentation-marker__badge\">\n    {{ number }}\n  </div>\n  @if (isHovered) {\n    <div class=\"agentation-marker__action\">\n      @if (clickBehavior === 'delete') {\n        <agentation-icon [data]=\"closeIcon\" [size]=\"10\" />\n      } @else {\n        <agentation-icon [data]=\"editIcon\" [size]=\"10\" />\n      }\n    </div>\n  }\n</div>\n","// =============================================================================\n// アニメーション凍結\n// =============================================================================\n//\n// setTimeout、setInterval、requestAnimationFrameをモンキーパッチして、\n// 凍結中はコールバックをサイレントにスキップする。\n// またCSS animations/transitionsを一時停止するCSSを注入し、\n// WAAPIアニメーションと動画も一時停止する。\n//\n// ツールバー/ポップアップコードはパッチをバイパスするために\n// `originalSetTimeout`等をインポートする必要がある。\n//\n// パッチはこのモジュールのインポート時に副作用として適用される。\n// =============================================================================\n\n// 除外セレクタ — agentation UI要素は凍結対象外\nconst EXCLUDE_ATTRS = [\n  \"data-feedback-toolbar\",\n  \"data-annotation-popup\",\n  \"data-annotation-marker\",\n];\nconst NOT_SELECTORS = EXCLUDE_ATTRS\n  .flatMap((a) => [`:not([${a}])`, `:not([${a}] *)`])\n  .join(\"\");\n\nconst STYLE_ID = \"feedback-freeze-styles\";\nconst STATE_KEY = \"__agentation_freeze\";\n\n// ---------------------------------------------------------------------------\n// ウィンドウ上の共有ミュータブル状態（HMRモジュール再実行を生き残る）\n// ---------------------------------------------------------------------------\ninterface FreezeState {\n  frozen: boolean;\n  installed: boolean;\n  origSetTimeout: typeof setTimeout;\n  origSetInterval: typeof setInterval;\n  origRAF: typeof requestAnimationFrame;\n  // キューはHMRモジュール再実行を生き残るようウィンドウ上に配置\n  pausedAnimations: Animation[];\n  frozenTimeoutQueue: Array<() => void>;\n  frozenRAFQueue: FrameRequestCallback[];\n}\n\nfunction getState(): FreezeState {\n  if (typeof window === \"undefined\") {\n    // SSRスタブ\n    return {\n      frozen: false,\n      installed: true, // サーバー上でのパッチを防止\n      origSetTimeout: setTimeout,\n      origSetInterval: setInterval,\n      origRAF: (cb: FrameRequestCallback) => 0 as unknown as number,\n      pausedAnimations: [],\n      frozenTimeoutQueue: [],\n      frozenRAFQueue: [],\n    };\n  }\n  const w = window as unknown as Record<string, unknown>;\n  if (!w[STATE_KEY]) {\n    w[STATE_KEY] = {\n      frozen: false,\n      installed: false,\n      origSetTimeout: null,\n      origSetInterval: null,\n      origRAF: null,\n      pausedAnimations: [],\n      frozenTimeoutQueue: [],\n      frozenRAFQueue: [],\n    };\n  }\n  return w[STATE_KEY] as FreezeState;\n}\n\nconst _s = getState();\n\n// ---------------------------------------------------------------------------\n// パッチのインストール（一度のみ — `installed`がウィンドウ上にあるためHMRを生き残る）\n// ---------------------------------------------------------------------------\nif (typeof window !== \"undefined\" && !_s.installed) {\n  // 実際の関数を保存\n  _s.origSetTimeout = window.setTimeout.bind(window);\n  _s.origSetInterval = window.setInterval.bind(window);\n  _s.origRAF = window.requestAnimationFrame.bind(window);\n\n  // setTimeoutのパッチ — 凍結時はコールバックをキューに入れる（解凍時にリプレイ）\n  (window as unknown as Record<string, unknown>)['setTimeout'] = (\n    handler: TimerHandler,\n    timeout?: number,\n    ...args: unknown[]\n  ): ReturnType<typeof setTimeout> => {\n    if (typeof handler === \"string\") {\n      return _s.origSetTimeout(handler, timeout) as unknown as ReturnType<typeof setTimeout>;\n    }\n    return _s.origSetTimeout(\n      (...a: unknown[]) => {\n        if (_s.frozen) {\n          _s.frozenTimeoutQueue.push(() => (handler as (...args: unknown[]) => void)(...a));\n        } else {\n          (handler as (...args: unknown[]) => void)(...a);\n        }\n      },\n      timeout,\n      ...args,\n    ) as unknown as ReturnType<typeof setTimeout>;\n  };\n\n  // setIntervalのパッチ — 凍結時はコールバックをスキップ\n  (window as unknown as Record<string, unknown>)['setInterval'] = (\n    handler: TimerHandler,\n    timeout?: number,\n    ...args: unknown[]\n  ): ReturnType<typeof setInterval> => {\n    if (typeof handler === \"string\") {\n      return _s.origSetInterval(handler, timeout) as unknown as ReturnType<typeof setInterval>;\n    }\n    return _s.origSetInterval(\n      (...a: unknown[]) => {\n        if (!_s.frozen) (handler as (...args: unknown[]) => void)(...a);\n      },\n      timeout,\n      ...args,\n    ) as unknown as ReturnType<typeof setInterval>;\n  };\n\n  // requestAnimationFrameのパッチ — 凍結時はコールバックをキューに入れる（CPUスピンなし）\n  // ラッパーは次のフレームで一度だけ発火し、まだ凍結中ならコールバックは\n  // _s.frozenRAFQueueに保存され、解凍時にリプレイされる\n  (window as unknown as Record<string, unknown>)['requestAnimationFrame'] = (\n    callback: FrameRequestCallback,\n  ): number => {\n    return _s.origRAF((timestamp: number) => {\n      if (_s.frozen) {\n        _s.frozenRAFQueue.push(callback);\n      } else {\n        callback(timestamp);\n      }\n    });\n  };\n\n  _s.installed = true;\n}\n\n// ---------------------------------------------------------------------------\n// エクスポート — ツールバー/ポップアップ用のオリジナル（パッチなし）タイミング関数\n// ---------------------------------------------------------------------------\nexport const originalSetTimeout = _s.origSetTimeout;\nexport const originalSetInterval = _s.origSetInterval;\n\n// ---------------------------------------------------------------------------\n// 凍結 / 解凍\n// ---------------------------------------------------------------------------\n\nfunction isAgentationElement(el: Element | null): boolean {\n  if (!el) return false;\n  return EXCLUDE_ATTRS.some((attr) => !!el.closest?.(`[${attr}]`));\n}\n\nexport function freeze(): void {\n  if (typeof document === \"undefined\") return;\n  if (_s.frozen) return;\n  _s.frozen = true;\n  _s.frozenTimeoutQueue = [];\n  _s.frozenRAFQueue = [];\n\n  // CSS注入 — CSSアニメーションを一時停止しトランジションを無効化\n  let style = document.getElementById(STYLE_ID);\n  if (!style) {\n    style = document.createElement(\"style\");\n    style.id = STYLE_ID;\n  }\n  style.textContent = `\n    *${NOT_SELECTORS},\n    *${NOT_SELECTORS}::before,\n    *${NOT_SELECTORS}::after {\n      animation-play-state: paused !important;\n      transition: none !important;\n    }\n  `;\n  document.head.appendChild(style);\n\n  // WAAPI — 実行中の非agentationアニメーションのみ一時停止して参照を保存\n  // （完了済みアニメーションを一時停止するとplay()時に再開始してしまい、入口アニメーションが壊れる）\n  _s.pausedAnimations = [];\n  try {\n    document.getAnimations().forEach((anim) => {\n      if (anim.playState !== \"running\") return;\n      const target = (anim.effect as KeyframeEffect)?.target as Element | null;\n      if (!isAgentationElement(target)) {\n        anim.pause();\n        _s.pausedAnimations.push(anim);\n      }\n    });\n  } catch {\n    // getAnimationsが全環境で利用できるとは限らない\n  }\n\n  // 動画の一時停止\n  document.querySelectorAll(\"video\").forEach((video) => {\n    if (!video.paused) {\n      video.dataset['wasPaused'] = \"false\";\n      video.pause();\n    }\n  });\n}\n\nexport function unfreeze(): void {\n  if (typeof document === \"undefined\") return;\n  if (!_s.frozen) return;\n  _s.frozen = false;\n\n  // キューされたsetTimeoutコールバックを非同期でリプレイ\n  // （停止したdelay() Promiseの解決、visibilitychangeで中断されたアニメーションループの再開等）\n  // origSetTimeout(cb, 0)を使用してメインスレッドを一度にブロックしない\n  // 実行前に_s.frozenを再チェック — スケジューリングと実行の間にfreeze()が再度呼ばれた場合、\n  // 実行せずにコールバックを再キューする\n  const timeoutQueue = _s.frozenTimeoutQueue;\n  _s.frozenTimeoutQueue = [];\n  for (const cb of timeoutQueue) {\n    _s.origSetTimeout(() => {\n      if (_s.frozen) {\n        _s.frozenTimeoutQueue.push(cb);\n        return;\n      }\n      try {\n        cb();\n      } catch (e) {\n        console.warn(\"[agentation] Error replaying queued timeout:\", e);\n      }\n    }, 0);\n  }\n\n  // キューされたrAFコールバックを次のフレームにスケジュール\n  // _s.frozenを再チェック — フレーム発火前に再凍結された場合、再キューする\n  const rafQueue = _s.frozenRAFQueue;\n  _s.frozenRAFQueue = [];\n  for (const cb of rafQueue) {\n    _s.origRAF((ts: number) => {\n      if (_s.frozen) {\n        _s.frozenRAFQueue.push(cb);\n        return;\n      }\n      cb(ts);\n    });\n  }\n\n  // WAAPI — CSS除去前に一時停止したアニメーションを再開\n  // （CSSを先に除去するとブラウザがアニメーションオブジェクトを置換する可能性がある）\n  for (const anim of _s.pausedAnimations) {\n    try {\n      anim.play();\n    } catch (e) {\n      console.warn(\"[agentation] Error resuming animation:\", e);\n    }\n  }\n  _s.pausedAnimations = [];\n\n  // CSS注入を除去\n  document.getElementById(STYLE_ID)?.remove();\n\n  // 動画を再開\n  document.querySelectorAll(\"video\").forEach((video) => {\n    if (video.dataset['wasPaused'] === \"false\") {\n      video.play().catch(() => {});\n      delete video.dataset['wasPaused'];\n    }\n  });\n}\n","// =============================================================================\n// アノテーションポップアップコンポーネント\n// =============================================================================\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  ViewEncapsulation,\n  Input,\n  Output,\n  EventEmitter,\n  ViewChild,\n  ElementRef,\n  OnInit,\n  OnDestroy,\n  signal,\n  input,\n  effect,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IconComponent } from '../icons/icon.component';\nimport { ICON_TRASH } from '../icons/icon-data';\nimport { originalSetTimeout } from '../utils/freeze-animations';\n\n// アニメーション状態\ntype AnimState = 'initial' | 'enter' | 'entered' | 'exit';\n\n@Component({\n  selector: 'agentation-popup',\n  standalone: true,\n  imports: [CommonModule, FormsModule, IconComponent],\n  templateUrl: './popup.component.html',\n  styleUrl: './popup.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopupComponent implements OnInit, OnDestroy {\n  /** shakeアニメーションのトリガー（signal input） */\n  readonly shakeTrigger = input(0);\n\n  /** 要素名（ヘッダー表示用） */\n  @Input({ required: true }) element!: string;\n  /** タイムスタンプ表示 */\n  @Input() timestamp?: string;\n  /** 選択テキスト */\n  @Input() selectedText?: string;\n  /** プレースホルダー */\n  @Input() placeholder = 'What should change?';\n  /** 初期値（編集モード用） */\n  @Input() initialValue = '';\n  /** 送信ボタンラベル */\n  @Input() submitLabel = 'Add';\n  /** アクセントカラー（hex） */\n  @Input() accentColor = '#3c82f7';\n  /** 退場状態（親制御） */\n  @Input() isExiting = false;\n  /** ライトモード */\n  @Input() lightMode = false;\n  /** 要素のComputedStyles */\n  @Input() computedStyles?: Record<string, string>;\n  /** ポジションスタイル */\n  @Input() positionStyle?: Record<string, string>;\n  /** 削除ボタン表示 */\n  @Input() showDelete = false;\n\n  /** テキスト送信イベント */\n  @Output() submitText = new EventEmitter<string>();\n  /** キャンセルイベント */\n  @Output() cancel = new EventEmitter<void>();\n  /** 削除イベント */\n  @Output() delete = new EventEmitter<void>();\n\n  @ViewChild('textareaRef') textareaRef!: ElementRef<HTMLTextAreaElement>;\n\n  // 内部状態\n  readonly text = signal('');\n  readonly animState = signal<AnimState>('initial');\n  readonly isShaking = signal(false);\n  readonly isFocused = signal(false);\n  readonly isStylesExpanded = signal(false);\n\n  // アイコンデータ\n  readonly trashIcon = ICON_TRASH;\n\n  constructor() {\n    // shakeTriggerが変更されたらshakeアニメーションを発火\n    effect(() => {\n      const v = this.shakeTrigger();\n      if (v > 0) {\n        this.shake();\n      }\n    });\n  }\n\n  // タイマー参照\n  private cancelTimer: ReturnType<typeof setTimeout> | null = null;\n  private shakeTimer: ReturnType<typeof setTimeout> | null = null;\n  private enterTimer: ReturnType<typeof setTimeout> | null = null;\n  private focusTimer: ReturnType<typeof setTimeout> | null = null;\n\n  ngOnInit(): void {\n    this.text.set(this.initialValue);\n\n    // 入場アニメーション\n    originalSetTimeout(() => {\n      this.animState.set('enter');\n    }, 0);\n\n    this.enterTimer = originalSetTimeout(() => {\n      this.animState.set('entered');\n    }, 200);\n\n    // テキストエリアにフォーカス\n    this.focusTimer = originalSetTimeout(() => {\n      const textarea = this.textareaRef?.nativeElement;\n      if (textarea) {\n        textarea.focus();\n        textarea.selectionStart = textarea.selectionEnd = textarea.value.length;\n        textarea.scrollTop = textarea.scrollHeight;\n      }\n    }, 50);\n  }\n\n  ngOnDestroy(): void {\n    if (this.cancelTimer) clearTimeout(this.cancelTimer);\n    if (this.shakeTimer) clearTimeout(this.shakeTimer);\n    if (this.enterTimer) clearTimeout(this.enterTimer);\n    if (this.focusTimer) clearTimeout(this.focusTimer);\n  }\n\n  /** シェイクアニメーション（外部から呼び出し可能） */\n  shake(): void {\n    if (this.shakeTimer) clearTimeout(this.shakeTimer);\n    this.isShaking.set(true);\n    this.shakeTimer = originalSetTimeout(() => {\n      this.isShaking.set(false);\n      this.textareaRef?.nativeElement?.focus();\n    }, 250);\n  }\n\n  /** キャンセル処理（退場アニメーション付き） */\n  handleCancel(): void {\n    this.animState.set('exit');\n    this.cancelTimer = originalSetTimeout(() => {\n      this.cancel.emit();\n    }, 150);\n  }\n\n  /** 送信処理 */\n  handleSubmit(): void {\n    const trimmed = this.text().trim();\n    if (!trimmed) return;\n    this.submitText.emit(trimmed);\n  }\n\n  /** キーボード処理 */\n  handleKeyDown(event: KeyboardEvent): void {\n    // IME入力中は無視\n    if (event.isComposing) return;\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      this.handleSubmit();\n    }\n    if (event.key === 'Escape') {\n      this.handleCancel();\n    }\n  }\n\n  /** テキスト変更 */\n  onTextChange(value: string): void {\n    this.text.set(value);\n  }\n\n  /** スタイル表示トグル */\n  toggleStyles(): void {\n    const wasExpanded = this.isStylesExpanded();\n    this.isStylesExpanded.set(!wasExpanded);\n    if (wasExpanded) {\n      originalSetTimeout(() => this.textareaRef?.nativeElement?.focus(), 0);\n    }\n  }\n\n  /** ComputedStylesのエントリ取得 */\n  get styleEntries(): Array<[string, string]> {\n    if (!this.computedStyles) return [];\n    return Object.entries(this.computedStyles);\n  }\n\n  /** CSSプロパティ名をケバブケースに変換 */\n  toKebabCase(str: string): string {\n    return str.replace(/([A-Z])/g, '-$1').toLowerCase();\n  }\n\n  /** ポップアップのCSSクラス算出 */\n  get popupClass(): string {\n    const classes = ['agentation-popup'];\n    if (this.lightMode) classes.push('agentation-popup--light');\n    if (this.animState() === 'enter') classes.push('agentation-popup--enter');\n    if (this.animState() === 'entered') classes.push('agentation-popup--entered');\n    if (this.animState() === 'exit') classes.push('agentation-popup--exit');\n    if (this.isShaking()) classes.push('agentation-popup--shake');\n    return classes.join(' ');\n  }\n}\n","<div\n  [class]=\"popupClass\"\n  [ngStyle]=\"positionStyle || {}\"\n  data-annotation-popup\n  (click)=\"$event.stopPropagation()\"\n>\n  <!-- ヘッダー -->\n  <div class=\"agentation-popup__header\">\n    @if (computedStyles && styleEntries.length > 0) {\n      <button\n        class=\"agentation-popup__header-toggle\"\n        (click)=\"toggleStyles()\"\n        type=\"button\"\n      >\n        <svg\n          class=\"agentation-popup__chevron\"\n          [class.agentation-popup__chevron--expanded]=\"isStylesExpanded()\"\n          width=\"14\"\n          height=\"14\"\n          viewBox=\"0 0 14 14\"\n          fill=\"none\"\n        >\n          <path\n            d=\"M5.5 10.25L9 7.25L5.75 4\"\n            stroke=\"currentColor\"\n            stroke-width=\"1.5\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          />\n        </svg>\n        <span class=\"agentation-popup__element\">{{ element }}</span>\n      </button>\n    } @else {\n      <span class=\"agentation-popup__element\">{{ element }}</span>\n    }\n    @if (timestamp) {\n      <span class=\"agentation-popup__timestamp\">{{ timestamp }}</span>\n    }\n  </div>\n\n  <!-- ComputedStylesアコーディオン -->\n  @if (computedStyles && styleEntries.length > 0) {\n    <div\n      class=\"agentation-popup__styles-wrapper\"\n      [class.agentation-popup__styles-wrapper--expanded]=\"isStylesExpanded()\"\n    >\n      <div class=\"agentation-popup__styles-inner\">\n        <div class=\"agentation-popup__styles-block\">\n          @for (entry of styleEntries; track entry[0]) {\n            <div class=\"agentation-popup__style-line\">\n              <span class=\"agentation-popup__style-property\">{{ toKebabCase(entry[0]) }}</span>\n              : <span class=\"agentation-popup__style-value\">{{ entry[1] }}</span>;\n            </div>\n          }\n        </div>\n      </div>\n    </div>\n  }\n\n  <!-- 選択テキスト引用 -->\n  @if (selectedText) {\n    <div class=\"agentation-popup__quote\">\n      &ldquo;{{ selectedText.length > 80 ? selectedText.slice(0, 80) + '...' : selectedText }}&rdquo;\n    </div>\n  }\n\n  <!-- テキスト入力 -->\n  <textarea\n    #textareaRef\n    class=\"agentation-popup__textarea\"\n    [style.borderColor]=\"isFocused() ? accentColor : null\"\n    [placeholder]=\"placeholder\"\n    [value]=\"text()\"\n    (input)=\"onTextChange($any($event.target).value)\"\n    (focus)=\"isFocused.set(true)\"\n    (blur)=\"isFocused.set(false)\"\n    rows=\"2\"\n    (keydown)=\"handleKeyDown($event)\"\n  ></textarea>\n\n  <!-- アクションボタン -->\n  <div class=\"agentation-popup__actions\">\n    @if (showDelete) {\n      <div class=\"agentation-popup__delete-wrapper\">\n        <button class=\"agentation-popup__delete-button\" (click)=\"delete.emit()\" type=\"button\">\n          <agentation-icon [data]=\"trashIcon\" [size]=\"22\" />\n        </button>\n      </div>\n    }\n    <button class=\"agentation-popup__cancel\" (click)=\"handleCancel()\">\n      Cancel\n    </button>\n    <button\n      class=\"agentation-popup__submit\"\n      [style.backgroundColor]=\"accentColor\"\n      [style.opacity]=\"text().trim() ? '1' : '0.4'\"\n      (click)=\"handleSubmit()\"\n      [disabled]=\"!text().trim()\"\n    >\n      {{ submitLabel }}\n    </button>\n  </div>\n</div>\n","// =============================================================================\n// ツールバー設定定数\n// =============================================================================\n\nimport type { OutputDetailLevel, AngularComponentMode } from './utils/output-generator';\n\n// ツールバー設定の型定義\nexport type MarkerClickBehavior = 'edit' | 'delete';\n\nexport interface ToolbarSettings {\n  outputDetail: OutputDetailLevel;\n  autoClearAfterCopy: boolean;\n  annotationColor: string;\n  blockInteractions: boolean;\n  angularEnabled: boolean;\n  markerClickBehavior: MarkerClickBehavior;\n  webhookUrl: string;\n  webhooksEnabled: boolean;\n}\n\n// デフォルト設定値\nexport const DEFAULT_SETTINGS: ToolbarSettings = {\n  outputDetail: 'standard',\n  autoClearAfterCopy: false,\n  annotationColor: '#3c82f7',\n  blockInteractions: true,\n  angularEnabled: true,\n  markerClickBehavior: 'edit',\n  webhookUrl: '',\n  webhooksEnabled: true,\n};\n\n// 出力詳細レベルとAngular検出モードのマッピング\nexport const OUTPUT_TO_ANGULAR_MODE: Record<OutputDetailLevel, AngularComponentMode> = {\n  compact: 'off',\n  standard: 'filtered',\n  detailed: 'smart',\n  forensic: 'all',\n};\n\n// マーカークリック動作の選択肢\nexport const MARKER_CLICK_OPTIONS: { value: MarkerClickBehavior; label: string }[] = [\n  { value: 'edit', label: 'Edit' },\n  { value: 'delete', label: 'Delete' },\n];\n\n// 出力詳細レベルの選択肢\nexport const OUTPUT_DETAIL_OPTIONS: { value: OutputDetailLevel; label: string }[] = [\n  { value: 'compact', label: 'Compact' },\n  { value: 'standard', label: 'Standard' },\n  { value: 'detailed', label: 'Detailed' },\n  { value: 'forensic', label: 'Forensic' },\n];\n\n// アノテーションカラーの選択肢\nexport const COLOR_OPTIONS = [\n  { value: '#AF52DE', label: 'Purple' },\n  { value: '#3c82f7', label: 'Blue' },\n  { value: '#5AC8FA', label: 'Cyan' },\n  { value: '#34C759', label: 'Green' },\n  { value: '#FFD60A', label: 'Yellow' },\n  { value: '#FF9500', label: 'Orange' },\n  { value: '#FF3B30', label: 'Red' },\n];\n","// =============================================================================\n// 設定パネルコンポーネント\n// =============================================================================\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  ViewEncapsulation,\n  Input,\n  OnInit,\n  OnDestroy,\n  signal,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AgentationService } from '../services/agentation.service';\nimport {\n  COLOR_OPTIONS,\n  OUTPUT_DETAIL_OPTIONS,\n  MARKER_CLICK_OPTIONS,\n} from '../constants';\nimport type { MarkerClickBehavior } from '../constants';\nimport type { OutputDetailLevel } from '../utils/output-generator';\nimport { originalSetTimeout } from '../utils/freeze-animations';\n\n// アニメーション状態\ntype AnimState = 'initial' | 'enter' | 'entered' | 'exit';\n\n@Component({\n  selector: 'agentation-settings',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './settings.component.html',\n  styleUrl: './settings.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n})\nexport class SettingsComponent implements OnInit, OnDestroy {\n  /** サービス参照 */\n  @Input({ required: true }) service!: AgentationService;\n\n  /** MCPエンドポイントURL */\n  @Input() endpoint = '';\n\n  // MCPパネル表示状態\n  readonly showMcpPanel = signal(false);\n\n  // アニメーション状態\n  readonly animState = signal<AnimState>('initial');\n\n  // 定数公開（テンプレートで使用）\n  readonly colorOptions = COLOR_OPTIONS;\n  readonly outputDetailOptions = OUTPUT_DETAIL_OPTIONS;\n  readonly markerClickOptions = MARKER_CLICK_OPTIONS;\n\n  // タイマー参照\n  private enterTimer: ReturnType<typeof setTimeout> | null = null;\n\n  ngOnInit(): void {\n    // 入場アニメーション\n    originalSetTimeout(() => {\n      this.animState.set('enter');\n    }, 0);\n\n    this.enterTimer = originalSetTimeout(() => {\n      this.animState.set('entered');\n    }, 200);\n  }\n\n  ngOnDestroy(): void {\n    if (this.enterTimer) clearTimeout(this.enterTimer);\n  }\n\n  /** 設定パネルのCSSクラス算出 */\n  get panelClass(): string {\n    const classes = ['agentation-settings'];\n    const isDark = this.service.toolbarState().isDarkMode;\n    if (!isDark) classes.push('agentation-settings--light');\n    if (this.animState() === 'enter') classes.push('agentation-settings--enter');\n    if (this.animState() === 'entered') classes.push('agentation-settings--entered');\n    if (this.animState() === 'exit') classes.push('agentation-settings--exit');\n    return classes.join(' ');\n  }\n\n  /** 出力詳細レベル変更 */\n  onOutputDetailChange(value: string): void {\n    this.service.updateSettings({ outputDetail: value as OutputDetailLevel });\n  }\n\n  /** アノテーションカラー変更 */\n  onColorChange(value: string): void {\n    this.service.updateSettings({ annotationColor: value });\n  }\n\n  /** マーカークリック動作変更 */\n  onMarkerClickChange(value: string): void {\n    this.service.updateSettings({ markerClickBehavior: value as MarkerClickBehavior });\n  }\n\n  /** 自動クリア トグル */\n  onAutoClearToggle(): void {\n    this.service.updateSettings({\n      autoClearAfterCopy: !this.service.settings().autoClearAfterCopy,\n    });\n  }\n\n  /** インタラクションブロック トグル */\n  onBlockInteractionsToggle(): void {\n    this.service.updateSettings({\n      blockInteractions: !this.service.settings().blockInteractions,\n    });\n  }\n\n  /** Angular検出 トグル */\n  onAngularToggle(): void {\n    this.service.updateSettings({\n      angularEnabled: !this.service.settings().angularEnabled,\n    });\n  }\n\n  /** Webhook トグル */\n  onWebhooksToggle(): void {\n    this.service.updateSettings({\n      webhooksEnabled: !this.service.settings().webhooksEnabled,\n    });\n  }\n\n  /** Webhook URL変更 */\n  onWebhookUrlChange(value: string): void {\n    this.service.updateSettings({ webhookUrl: value });\n  }\n\n  /** MCPパネルを開く */\n  onOpenMcpPanel(): void {\n    this.showMcpPanel.set(true);\n  }\n\n  /** MCPパネルを閉じる */\n  onCloseMcpPanel(): void {\n    this.showMcpPanel.set(false);\n  }\n\n  /** 設定パネルを閉じる */\n  close(): void {\n    this.animState.set('exit');\n    originalSetTimeout(() => {\n      this.service.toggleSettings();\n    }, 150);\n  }\n}\n","@if (!showMcpPanel()) {\n<div [class]=\"panelClass\" data-agentation>\n  <!-- ヘッダー -->\n  <div class=\"agentation-settings__header\">\n    <span class=\"agentation-settings__title\">Settings</span>\n    <button\n      class=\"agentation-settings__close\"\n      (click)=\"close()\"\n      type=\"button\"\n    >\n      ✕\n    </button>\n  </div>\n\n  <!-- 出力設定セクション -->\n  <div class=\"agentation-settings__section\">\n    <label class=\"agentation-settings__label\">Output Detail</label>\n    <select\n      class=\"agentation-settings__select\"\n      [ngModel]=\"service.settings().outputDetail\"\n      (ngModelChange)=\"onOutputDetailChange($event)\"\n    >\n      @for (option of outputDetailOptions; track option.value) {\n        <option [value]=\"option.value\">{{ option.label }}</option>\n      }\n    </select>\n  </div>\n\n  <!-- アノテーションカラーセクション -->\n  <div class=\"agentation-settings__section\">\n    <label class=\"agentation-settings__label\">Annotation Color</label>\n    <div class=\"agentation-settings__colors\">\n      @for (color of colorOptions; track color.value) {\n        <button\n          class=\"agentation-settings__color-swatch\"\n          [class.agentation-settings__color-swatch--active]=\"service.settings().annotationColor === color.value\"\n          [style.backgroundColor]=\"color.value\"\n          [title]=\"color.label\"\n          (click)=\"onColorChange(color.value)\"\n          type=\"button\"\n        ></button>\n      }\n    </div>\n  </div>\n\n  <!-- マーカークリック動作セクション -->\n  <div class=\"agentation-settings__section\">\n    <label class=\"agentation-settings__label\">Marker Click</label>\n    <select\n      class=\"agentation-settings__select\"\n      [ngModel]=\"service.settings().markerClickBehavior\"\n      (ngModelChange)=\"onMarkerClickChange($event)\"\n    >\n      @for (option of markerClickOptions; track option.value) {\n        <option [value]=\"option.value\">{{ option.label }}</option>\n      }\n    </select>\n  </div>\n\n  <!-- トグルセクション -->\n  <div class=\"agentation-settings__section\">\n    <div class=\"agentation-settings__toggle-row\">\n      <span class=\"agentation-settings__toggle-label\">Auto-clear after copy</span>\n      <button\n        class=\"agentation-settings__toggle-button\"\n        [class.agentation-settings__toggle-button--active]=\"service.settings().autoClearAfterCopy\"\n        (click)=\"onAutoClearToggle()\"\n        type=\"button\"\n      >\n        <span class=\"agentation-settings__toggle-knob\"></span>\n      </button>\n    </div>\n\n    <div class=\"agentation-settings__toggle-row\">\n      <span class=\"agentation-settings__toggle-label\">Block interactions</span>\n      <button\n        class=\"agentation-settings__toggle-button\"\n        [class.agentation-settings__toggle-button--active]=\"service.settings().blockInteractions\"\n        (click)=\"onBlockInteractionsToggle()\"\n        type=\"button\"\n      >\n        <span class=\"agentation-settings__toggle-knob\"></span>\n      </button>\n    </div>\n\n    <div class=\"agentation-settings__toggle-row\">\n      <span class=\"agentation-settings__toggle-label\">Angular detection</span>\n      <button\n        class=\"agentation-settings__toggle-button\"\n        [class.agentation-settings__toggle-button--active]=\"service.settings().angularEnabled\"\n        (click)=\"onAngularToggle()\"\n        type=\"button\"\n      >\n        <span class=\"agentation-settings__toggle-knob\"></span>\n      </button>\n    </div>\n  </div>\n\n  <!-- Webhook設定セクション -->\n  <div class=\"agentation-settings__section\">\n    @if (endpoint) {\n      <!-- MCP接続時: ナビゲーションリンク -->\n      <button class=\"agentation-settings__nav-link\" (click)=\"onOpenMcpPanel()\" type=\"button\">\n        <span>Manage MCP & Webhooks</span>\n        <span class=\"agentation-settings__nav-link-right\">\n          @if (service.connectionStatus() === 'connected') {\n            <span class=\"agentation-settings__nav-dot agentation-settings__nav-dot--connected\"></span>\n          } @else if (service.connectionStatus() === 'connecting') {\n            <span class=\"agentation-settings__nav-dot agentation-settings__nav-dot--connecting\"></span>\n          }\n          <svg width=\"7\" height=\"12\" viewBox=\"0 0 7 12\" fill=\"none\">\n            <path d=\"M1 1L5.5 6L1 11\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          </svg>\n        </span>\n      </button>\n    } @else {\n      <!-- MCP未接続時: 従来のWebhookインラインUI -->\n      <div class=\"agentation-settings__toggle-row\">\n        <span class=\"agentation-settings__toggle-label\">Webhooks</span>\n        <button\n          class=\"agentation-settings__toggle-button\"\n          [class.agentation-settings__toggle-button--active]=\"service.settings().webhooksEnabled\"\n          (click)=\"onWebhooksToggle()\"\n          type=\"button\"\n        >\n          <span class=\"agentation-settings__toggle-knob\"></span>\n        </button>\n      </div>\n\n      @if (service.settings().webhooksEnabled) {\n        <div class=\"agentation-settings__webhook-url\">\n          <input\n            class=\"agentation-settings__input\"\n            type=\"url\"\n            placeholder=\"https://example.com/webhook\"\n            [ngModel]=\"service.settings().webhookUrl\"\n            (ngModelChange)=\"onWebhookUrlChange($event)\"\n          />\n        </div>\n      }\n    }\n  </div>\n</div>\n} @else {\n<!-- MCPサブビュー -->\n<div [class]=\"panelClass\" data-agentation>\n  <!-- 戻るボタン -->\n  <button class=\"agentation-settings__back-button\" (click)=\"onCloseMcpPanel()\" type=\"button\">\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\">\n      <path d=\"M8.5 3.5L4 8L8.5 12.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    </svg>\n    <span>Manage MCP & Webhooks</span>\n  </button>\n\n  <!-- MCP Connectionセクション -->\n  <div class=\"agentation-settings__section\">\n    <div class=\"agentation-settings__section-row\">\n      <span class=\"agentation-settings__section-header\">MCP Connection</span>\n      @if (endpoint) {\n        <div\n          class=\"agentation-settings__mcp-dot\"\n          [class.agentation-settings__mcp-dot--connected]=\"service.connectionStatus() === 'connected'\"\n          [class.agentation-settings__mcp-dot--connecting]=\"service.connectionStatus() === 'connecting'\"\n          [class.agentation-settings__mcp-dot--disconnected]=\"service.connectionStatus() === 'disconnected'\"\n        ></div>\n      }\n    </div>\n    <p class=\"agentation-settings__description\">\n      MCP connection allows agents to receive and act on annotations.\n    </p>\n  </div>\n\n  <!-- Webhooksセクション -->\n  <div class=\"agentation-settings__section\">\n    <div class=\"agentation-settings__section-row\">\n      <span class=\"agentation-settings__section-header\">Webhooks</span>\n      <div class=\"agentation-settings__auto-send-row\">\n        <span\n          class=\"agentation-settings__auto-send-label\"\n          [class.agentation-settings__auto-send-label--active]=\"service.settings().webhooksEnabled\"\n        >Auto-Send</span>\n        <button\n          class=\"agentation-settings__toggle-button\"\n          [class.agentation-settings__toggle-button--active]=\"service.settings().webhooksEnabled\"\n          [disabled]=\"!service.settings().webhookUrl\"\n          (click)=\"onWebhooksToggle()\"\n          type=\"button\"\n        >\n          <span class=\"agentation-settings__toggle-knob\"></span>\n        </button>\n      </div>\n    </div>\n    <p class=\"agentation-settings__description\">\n      The webhook URL will receive live annotation changes and annotation data.\n    </p>\n    <textarea\n      class=\"agentation-settings__webhook-textarea\"\n      placeholder=\"Webhook URL\"\n      [ngModel]=\"service.settings().webhookUrl\"\n      (ngModelChange)=\"onWebhookUrlChange($event)\"\n    ></textarea>\n  </div>\n</div>\n}\n","// =============================================================================\n// Agentation用カスタムOverlayContainer\n// =============================================================================\n\nimport { Injectable } from '@angular/core';\nimport { OverlayContainer } from '@angular/cdk/overlay';\n\n/**\n * CDK Overlayがdocument.body直下に挿入する要素に\n * data-agentation属性を付与してスタイルスコープを確保する\n */\n@Injectable()\nexport class AgentationOverlayContainer extends OverlayContainer {\n  protected override _createContainer(): void {\n    super._createContainer();\n    // スタイルスコープ用属性を付与\n    this._containerElement.setAttribute('data-agentation', '');\n  }\n}\n","// =============================================================================\n// ストレージユーティリティ\n// =============================================================================\n//\n// TODO: カスタムストレージ用のStorageAdapterインターフェースに抽象化\n// (IndexedDB, APIバックエンド等)\n//\n\nimport type { Annotation } from \"../types\";\n\nconst STORAGE_PREFIX = \"feedback-annotations-\";\nconst DEFAULT_RETENTION_DAYS = 7;\n\nexport function getStorageKey(pathname: string): string {\n  return `${STORAGE_PREFIX}${pathname}`;\n}\n\nexport function loadAnnotations<T = Annotation>(pathname: string): T[] {\n  if (typeof window === \"undefined\") return [];\n  try {\n    const stored = localStorage.getItem(getStorageKey(pathname));\n    if (!stored) return [];\n    const data = JSON.parse(stored);\n    const cutoff = Date.now() - DEFAULT_RETENTION_DAYS * 24 * 60 * 60 * 1000;\n    return data.filter((a: { timestamp?: number }) => !a.timestamp || a.timestamp > cutoff);\n  } catch {\n    return [];\n  }\n}\n\nexport function saveAnnotations<T = Annotation>(pathname: string, annotations: T[]): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(getStorageKey(pathname), JSON.stringify(annotations));\n  } catch {\n    // localStorageが満杯か無効\n  }\n}\n\nexport function clearAnnotations(pathname: string): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.removeItem(getStorageKey(pathname));\n  } catch {\n    // 無視\n  }\n}\n\n/**\n * 全ページのlocalStorageからアノテーションを読み込み\n * pathname -> アノテーション配列のMapを返す\n */\nexport function loadAllAnnotations<T = Annotation>(): Map<string, T[]> {\n  const result = new Map<string, T[]>();\n  if (typeof window === \"undefined\") return result;\n\n  try {\n    const cutoff = Date.now() - DEFAULT_RETENTION_DAYS * 24 * 60 * 60 * 1000;\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key?.startsWith(STORAGE_PREFIX)) {\n        const pathname = key.slice(STORAGE_PREFIX.length);\n        const stored = localStorage.getItem(key);\n        if (stored) {\n          const data = JSON.parse(stored);\n          const filtered = data.filter(\n            (a: { timestamp?: number }) => !a.timestamp || a.timestamp > cutoff\n          );\n          if (filtered.length > 0) {\n            result.set(pathname, filtered);\n          }\n        }\n      }\n    }\n  } catch {\n    // エラーを無視\n  }\n\n  return result;\n}\n\n// =============================================================================\n// 同期マーカーユーティリティ\n// =============================================================================\n//\n// アノテーションの`_syncedTo`フィールドを管理するヘルパー。\n// 特定のセッション/宛先にアノテーションが同期済みかどうかを追跡する。\n// アンダースコアプレフィックスは内部フィールドであることを示す。\n//\n\ntype AnnotationWithSyncMarker = Annotation & { _syncedTo?: string };\n\n/**\n * 同期マーカー付きでアノテーションを保存\n * 保存前に各アノテーションに`_syncedTo: sessionId`を追加\n */\nexport function saveAnnotationsWithSyncMarker(\n  pathname: string,\n  annotations: Annotation[],\n  sessionId: string\n): void {\n  const marked = annotations.map((annotation) => ({\n    ...annotation,\n    _syncedTo: sessionId,\n  }));\n  saveAnnotations(pathname, marked);\n}\n\n/**\n * 指定セッションに未同期のアノテーションを取得\n * `_syncedTo`マーカーがないか、異なるセッションIDのアノテーションを返す\n * sessionIdが未指定の場合、同期マーカーがないアノテーションを返す\n */\nexport function getUnsyncedAnnotations(\n  pathname: string,\n  sessionId?: string\n): Annotation[] {\n  const annotations = loadAnnotations<AnnotationWithSyncMarker>(pathname);\n  return annotations.filter((annotation) => {\n    if (!annotation._syncedTo) return true;\n    if (sessionId && annotation._syncedTo !== sessionId) return true;\n    return false;\n  });\n}\n\n/**\n * パス名に対する全アノテーションの`_syncedTo`マーカーを除去\n * 同期状態のリセットや同期先の変更時に有用\n */\nexport function clearSyncMarkers(pathname: string): void {\n  const annotations = loadAnnotations<AnnotationWithSyncMarker>(pathname);\n  const cleaned = annotations.map((annotation) => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { _syncedTo, ...rest } = annotation;\n    return rest as Annotation;\n  });\n  saveAnnotations(pathname, cleaned);\n}\n\n// =============================================================================\n// セッションストレージ\n// =============================================================================\n\nconst SESSION_PREFIX = \"agentation-session-\";\n\nexport function getSessionStorageKey(pathname: string): string {\n  return `${SESSION_PREFIX}${pathname}`;\n}\n\nexport function loadSessionId(pathname: string): string | null {\n  if (typeof window === \"undefined\") return null;\n  try {\n    return localStorage.getItem(getSessionStorageKey(pathname));\n  } catch {\n    return null;\n  }\n}\n\nexport function saveSessionId(pathname: string, sessionId: string): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.setItem(getSessionStorageKey(pathname), sessionId);\n  } catch {\n    // localStorageが満杯か無効\n  }\n}\n\nexport function clearSessionId(pathname: string): void {\n  if (typeof window === \"undefined\") return;\n  try {\n    localStorage.removeItem(getSessionStorageKey(pathname));\n  } catch {\n    // 無視\n  }\n}\n","// =============================================================================\n// サーバー同期ユーティリティ\n// =============================================================================\n//\n// Agentationプロトコルのオプションサーバー同期機能\n// エンドポイントが提供された場合、アノテーションをサーバーに同期\n// ネットワークエラー時はローカルのみモードにグレースフルにフォールバック\n//\n\nimport type { Annotation, Session, SessionWithAnnotations } from \"../types\";\n\n/**\n * サーバーから全セッションを取得\n */\nexport async function listSessions(endpoint: string): Promise<Session[]> {\n  const response = await fetch(`${endpoint}/sessions`);\n  if (!response.ok) {\n    throw new Error(`Failed to list sessions: ${response.status}`);\n  }\n  return response.json();\n}\n\n/**\n * サーバーに新しいセッションを作成\n */\nexport async function createSession(\n  endpoint: string,\n  url: string\n): Promise<Session> {\n  const response = await fetch(`${endpoint}/sessions`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ url }),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to create session: ${response.status}`);\n  }\n\n  return response.json();\n}\n\n/**\n * 既存のセッションをアノテーション付きで取得\n */\nexport async function getSession(\n  endpoint: string,\n  sessionId: string\n): Promise<SessionWithAnnotations> {\n  const response = await fetch(`${endpoint}/sessions/${sessionId}`);\n\n  if (!response.ok) {\n    throw new Error(`Failed to get session: ${response.status}`);\n  }\n\n  return response.json();\n}\n\n/**\n * 新しいアノテーションをサーバーに同期\n * サーバーが割り当てたフィールドを含むアノテーションを返す\n */\nexport async function syncAnnotation(\n  endpoint: string,\n  sessionId: string,\n  annotation: Annotation\n): Promise<Annotation> {\n  const response = await fetch(`${endpoint}/sessions/${sessionId}/annotations`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(annotation),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to sync annotation: ${response.status}`);\n  }\n\n  return response.json();\n}\n\n/**\n * サーバー上のアノテーションを更新\n */\nexport async function updateAnnotation(\n  endpoint: string,\n  annotationId: string,\n  data: Partial<Annotation>\n): Promise<Annotation> {\n  const response = await fetch(`${endpoint}/annotations/${annotationId}`, {\n    method: \"PATCH\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to update annotation: ${response.status}`);\n  }\n\n  return response.json();\n}\n\n/**\n * サーバーからアノテーションを削除\n */\nexport async function deleteAnnotation(\n  endpoint: string,\n  annotationId: string\n): Promise<void> {\n  const response = await fetch(`${endpoint}/annotations/${annotationId}`, {\n    method: \"DELETE\",\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to delete annotation: ${response.status}`);\n  }\n}\n\nexport type ActionResponse = {\n  success: boolean;\n  annotationCount: number;\n  delivered: {\n    sseListeners: number;\n    webhooks: number;\n    total: number;\n  };\n};\n\n/**\n * エージェントにアノテーションへのアクション実行を要求\n * SSE経由でaction.requestedイベントを発行し、接続済みエージェントに通知\n * UIが正確なフィードバックを表示できるよう配信情報を返す\n */\nexport async function requestAction(\n  endpoint: string,\n  sessionId: string,\n  output: string\n): Promise<ActionResponse> {\n  const response = await fetch(`${endpoint}/sessions/${sessionId}/action`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ output }),\n  });\n\n  if (!response.ok) {\n    throw new Error(`Failed to request action: ${response.status}`);\n  }\n\n  return response.json();\n}\n","// =============================================================================\n// 出力生成ユーティリティ\n// =============================================================================\n\nimport type { Annotation } from '../types';\n\n// 出力詳細レベル\nexport type OutputDetailLevel = 'compact' | 'standard' | 'detailed' | 'forensic';\n\n// Angularコンポーネント検出モード（outputDetailから導出）\nexport type AngularComponentMode = 'smart' | 'filtered' | 'all' | 'off';\n\n/**\n * アノテーション配列からMarkdown形式の出力テキストを生成\n */\nexport function generateOutput(\n  annotations: Annotation[],\n  pathname: string,\n  detailLevel: OutputDetailLevel = 'standard',\n  angularMode: AngularComponentMode = 'filtered',\n): string {\n  if (annotations.length === 0) return '';\n\n  const viewport =\n    typeof window !== 'undefined'\n      ? `${window.innerWidth}×${window.innerHeight}`\n      : 'unknown';\n\n  let output = `## Page Feedback: ${pathname}\\n`;\n\n  if (detailLevel === 'forensic') {\n    // フォレンジックモード用のフル環境情報\n    output += `\\n**Environment:**\\n`;\n    output += `- Viewport: ${viewport}\\n`;\n    if (typeof window !== 'undefined') {\n      output += `- URL: ${window.location.href}\\n`;\n      output += `- User Agent: ${navigator.userAgent}\\n`;\n      output += `- Timestamp: ${new Date().toISOString()}\\n`;\n      output += `- Device Pixel Ratio: ${window.devicePixelRatio}\\n`;\n    }\n    output += `\\n---\\n`;\n  } else if (detailLevel !== 'compact') {\n    output += `**Viewport:** ${viewport}\\n`;\n  }\n  output += '\\n';\n\n  annotations.forEach((a, i) => {\n    if (detailLevel === 'compact') {\n      output += `${i + 1}. **${a.element}**: ${a.comment}`;\n      if (a.selectedText) {\n        output += ` (re: \"${a.selectedText.slice(0, 30)}${a.selectedText.length > 30 ? '...' : ''}\")`;\n      }\n      output += '\\n';\n    } else if (detailLevel === 'forensic') {\n      // フォレンジックモード - 出力ページの例に合わせた順序\n      output += `### ${i + 1}. ${a.element}\\n`;\n      if (a.isMultiSelect && a.fullPath) {\n        output += `*Forensic data shown for first element of selection*\\n`;\n      }\n      if (a.fullPath) {\n        output += `**Full DOM Path:** ${a.fullPath}\\n`;\n      }\n      if (a.cssClasses) {\n        output += `**CSS Classes:** ${a.cssClasses}\\n`;\n      }\n      if (a.boundingBox) {\n        output += `**Position:** x:${Math.round(a.boundingBox.x)}, y:${Math.round(a.boundingBox.y)} (${Math.round(a.boundingBox.width)}×${Math.round(a.boundingBox.height)}px)\\n`;\n      }\n      output += `**Annotation at:** ${a.x.toFixed(1)}% from left, ${Math.round(a.y)}px from top\\n`;\n      if (a.selectedText) {\n        output += `**Selected text:** \"${a.selectedText}\"\\n`;\n      }\n      if (a.nearbyText && !a.selectedText) {\n        output += `**Context:** ${a.nearbyText.slice(0, 100)}\\n`;\n      }\n      if (a.computedStyles) {\n        output += `**Computed Styles:** ${a.computedStyles}\\n`;\n      }\n      if (a.accessibility) {\n        output += `**Accessibility:** ${a.accessibility}\\n`;\n      }\n      if (a.nearbyElements) {\n        output += `**Nearby Elements:** ${a.nearbyElements}\\n`;\n      }\n      if (a.angularComponents) {\n        output += `**Angular:** ${a.angularComponents}\\n`;\n      }\n      output += `**Feedback:** ${a.comment}\\n\\n`;\n    } else {\n      // スタンダード・詳細モード\n      output += `### ${i + 1}. ${a.element}\\n`;\n      output += `**Location:** ${a.elementPath}\\n`;\n\n      // Angularコンポーネント（スタンダード・詳細両方で表示）\n      if (a.angularComponents) {\n        output += `**Angular:** ${a.angularComponents}\\n`;\n      }\n\n      if (detailLevel === 'detailed') {\n        if (a.cssClasses) {\n          output += `**Classes:** ${a.cssClasses}\\n`;\n        }\n\n        if (a.boundingBox) {\n          output += `**Position:** ${Math.round(a.boundingBox.x)}px, ${Math.round(a.boundingBox.y)}px (${Math.round(a.boundingBox.width)}×${Math.round(a.boundingBox.height)}px)\\n`;\n        }\n      }\n\n      if (a.selectedText) {\n        output += `**Selected text:** \"${a.selectedText}\"\\n`;\n      }\n\n      if (detailLevel === 'detailed' && a.nearbyText && !a.selectedText) {\n        output += `**Context:** ${a.nearbyText.slice(0, 100)}\\n`;\n      }\n\n      output += `**Feedback:** ${a.comment}\\n\\n`;\n    }\n  });\n\n  return output.trim();\n}\n","// =============================================================================\n// AgentationService - Angular Signalsベースの状態管理サービス\n// =============================================================================\n\nimport { Injectable, signal, computed } from '@angular/core';\nimport type { Annotation } from '../types';\nimport type { ToolbarSettings, MarkerClickBehavior } from '../constants';\nimport { DEFAULT_SETTINGS, OUTPUT_TO_ANGULAR_MODE } from '../constants';\nimport { loadAnnotations, saveAnnotations, saveAnnotationsWithSyncMarker } from '../utils/storage';\nimport { syncAnnotation, updateAnnotation as updateAnnotationOnServer, deleteAnnotation as deleteAnnotationFromServer, requestAction } from '../utils/sync';\nimport { generateOutput } from '../utils/output-generator';\nimport type { OutputDetailLevel, AngularComponentMode } from '../utils/output-generator';\n\n// ツールバーUI状態\nexport interface ToolbarUIState {\n  isActive: boolean;\n  showMarkers: boolean;\n  markersVisible: boolean;\n  markersExiting: boolean;\n  isDarkMode: boolean;\n  showSettings: boolean;\n  showSettingsVisible: boolean;\n  settingsPage: 'main' | 'automations';\n  toolbarPosition: { x: number; y: number } | null;\n  isTransitioning: boolean;\n  tooltipsHidden: boolean;\n  mounted: boolean;\n}\n\n// アノテーション状態\nexport interface AnnotationState {\n  annotations: Annotation[];\n  pendingAnnotation: PendingAnnotation | null;\n  editingAnnotation: Annotation | null;\n  hoveredMarkerId: string | null;\n  deletingMarkerId: string | null;\n  exitingMarkers: Set<string>;\n  renumberFrom: number | null;\n}\n\n// 保留中アノテーション\nexport interface PendingAnnotation {\n  x: number;\n  y: number;\n  clientY: number;\n  element: string;\n  elementPath: string;\n  selectedText?: string;\n  boundingBox?: { x: number; y: number; width: number; height: number };\n  nearbyText?: string;\n  cssClasses?: string;\n  isMultiSelect?: boolean;\n  isFixed?: boolean;\n  fullPath?: string;\n  accessibility?: string;\n  computedStyles?: string;\n  computedStylesObj?: Record<string, string>;\n  nearbyElements?: string;\n  angularComponents?: string;\n  elementBoundingBoxes?: Array<{ x: number; y: number; width: number; height: number }>;\n  multiSelectElements?: HTMLElement[];\n  targetElement?: HTMLElement;\n}\n\n// ホバー情報\nexport interface HoverInfo {\n  element: string;\n  elementName: string;\n  elementPath: string;\n  rect: DOMRect | null;\n  angularComponents?: string | null;\n}\n\n// サーバー接続状態\nexport interface SyncState {\n  connectionStatus: 'disconnected' | 'connecting' | 'connected' | 'error';\n  currentSessionId: string | null;\n}\n\n// コピー/送信状態\nexport interface ActionUIState {\n  copied: boolean;\n  sendState: 'idle' | 'sending' | 'sent' | 'failed';\n  cleared: boolean;\n  isClearing: boolean;\n}\n\n/** UUID生成（crypto.randomUUID非対応ブラウザ用フォールバック） */\nfunction generateId(): string {\n  if (typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  // フォールバック: Math.random()ベース\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n@Injectable()\nexport class AgentationService {\n  // ツールバーUI状態\n  readonly toolbarState = signal<ToolbarUIState>({\n    isActive: false,\n    showMarkers: true,\n    markersVisible: false,\n    markersExiting: false,\n    isDarkMode: false,\n    showSettings: false,\n    showSettingsVisible: false,\n    settingsPage: 'main',\n    toolbarPosition: null,\n    isTransitioning: false,\n    tooltipsHidden: false,\n    mounted: false,\n  });\n\n  // アノテーション状態\n  readonly annotationState = signal<AnnotationState>({\n    annotations: [],\n    pendingAnnotation: null,\n    editingAnnotation: null,\n    hoveredMarkerId: null,\n    deletingMarkerId: null,\n    exitingMarkers: new Set(),\n    renumberFrom: null,\n  });\n\n  // ホバー情報\n  readonly hoverInfo = signal<HoverInfo | null>(null);\n  readonly hoverPosition = signal<{ x: number; y: number }>({ x: 0, y: 0 });\n\n  // サーバー接続状態\n  readonly syncState = signal<SyncState>({\n    connectionStatus: 'disconnected',\n    currentSessionId: null,\n  });\n\n  // アクションUI状態\n  readonly actionState = signal<ActionUIState>({\n    copied: false,\n    sendState: 'idle',\n    cleared: false,\n    isClearing: false,\n  });\n\n  // フリーズ状態\n  readonly isFrozen = signal(false);\n\n  // スクロール状態\n  readonly scrollY = signal(0);\n  readonly isScrolling = signal(false);\n\n  // 設定\n  readonly settings = signal<ToolbarSettings>(DEFAULT_SETTINGS);\n\n  // ===== 算出状態 =====\n  readonly annotations = computed(() => this.annotationState().annotations);\n  readonly hasAnnotations = computed(() => this.annotations().length > 0);\n  readonly isActive = computed(() => this.toolbarState().isActive);\n  readonly pendingAnnotation = computed(() => this.annotationState().pendingAnnotation);\n  readonly editingAnnotation = computed(() => this.annotationState().editingAnnotation);\n  readonly showMarkers = computed(() => this.toolbarState().showMarkers);\n  readonly markersVisible = computed(() => this.toolbarState().markersVisible);\n  readonly connectionStatus = computed(() => this.syncState().connectionStatus);\n  readonly currentSessionId = computed(() => this.syncState().currentSessionId);\n\n  // Angular検出モード（設定の出力詳細レベルから導出）\n  readonly angularMode = computed<AngularComponentMode>(() => {\n    const s = this.settings();\n    if (!s.angularEnabled) return 'off';\n    return OUTPUT_TO_ANGULAR_MODE[s.outputDetail];\n  });\n\n  // エンドポイントとパス名（コンポーネントから設定される）\n  private endpoint: string | undefined;\n  private pathname = '';\n  private webhookUrl: string | undefined;\n  /** クリップボード書き込みフラグ（コンポーネントから設定） */\n  copyToClipboardEnabled = true;\n\n  // ===== 初期化 =====\n\n  /** コンポーネントからの設定注入 */\n  configure(config: {\n    endpoint?: string;\n    sessionId?: string;\n    webhookUrl?: string;\n  }): void {\n    this.endpoint = config.endpoint;\n    this.webhookUrl = config.webhookUrl;\n    this.pathname = typeof window !== 'undefined' ? window.location.pathname : '/';\n\n    if (config.sessionId) {\n      this.syncState.update(s => ({ ...s, currentSessionId: config.sessionId! }));\n    }\n\n    // localStorageからアノテーション読み込み\n    const stored = loadAnnotations<Annotation>(this.pathname);\n    if (stored.length > 0) {\n      this.annotationState.update(s => ({ ...s, annotations: stored }));\n    }\n\n    this.toolbarState.update(s => ({ ...s, mounted: true }));\n  }\n\n  // ===== ツールバーアクション =====\n\n  activate(): void {\n    this.toolbarState.update(s => ({ ...s, isActive: true }));\n  }\n\n  deactivate(): void {\n    this.toolbarState.update(s => ({\n      ...s,\n      isActive: false,\n      showSettings: false,\n      showSettingsVisible: false,\n    }));\n    this.annotationState.update(s => ({\n      ...s,\n      pendingAnnotation: null,\n      editingAnnotation: null,\n    }));\n    this.hoverInfo.set(null);\n  }\n\n  toggleMarkers(): void {\n    this.toolbarState.update(s => ({ ...s, showMarkers: !s.showMarkers }));\n  }\n\n  toggleSettings(): void {\n    this.toolbarState.update(s => ({\n      ...s,\n      showSettings: !s.showSettings,\n      showSettingsVisible: !s.showSettings,\n      settingsPage: 'main',\n    }));\n  }\n\n  toggleDarkMode(): void {\n    this.toolbarState.update(s => ({ ...s, isDarkMode: !s.isDarkMode }));\n  }\n\n  updateSettings(partial: Partial<ToolbarSettings>): void {\n    this.settings.update(s => ({ ...s, ...partial }));\n  }\n\n  setToolbarPosition(pos: { x: number; y: number } | null): void {\n    this.toolbarState.update(s => ({ ...s, toolbarPosition: pos }));\n  }\n\n  // ===== アノテーション操作 =====\n\n  /** 新しいアノテーション要素の選択を開始 */\n  startAnnotation(pending: PendingAnnotation): void {\n    this.annotationState.update(s => ({\n      ...s,\n      pendingAnnotation: pending,\n      editingAnnotation: null,\n    }));\n  }\n\n  /** アノテーション追加（テキスト入力完了後） */\n  addAnnotation(comment: string): Annotation | null {\n    const pending = this.annotationState().pendingAnnotation;\n    if (!pending) return null;\n\n    const annotation: Annotation = {\n      id: generateId(),\n      x: pending.x,\n      y: pending.y,\n      comment,\n      element: pending.element,\n      elementPath: pending.elementPath,\n      timestamp: Date.now(),\n      selectedText: pending.selectedText,\n      boundingBox: pending.boundingBox,\n      nearbyText: pending.nearbyText,\n      cssClasses: pending.cssClasses,\n      isMultiSelect: pending.isMultiSelect,\n      isFixed: pending.isFixed,\n      fullPath: pending.fullPath,\n      accessibility: pending.accessibility,\n      computedStyles: pending.computedStyles,\n      nearbyElements: pending.nearbyElements,\n      angularComponents: pending.angularComponents,\n      elementBoundingBoxes: pending.elementBoundingBoxes,\n    };\n\n    this.annotationState.update(s => ({\n      ...s,\n      annotations: [...s.annotations, annotation],\n      pendingAnnotation: null,\n    }));\n\n    // localStorageに保存\n    this.persistAnnotations();\n\n    // サーバー同期\n    this.syncToServer(annotation);\n\n    return annotation;\n  }\n\n  /** アノテーション削除 */\n  deleteAnnotation(id: string): Annotation | undefined {\n    const annotation = this.annotations().find(a => a.id === id);\n    if (!annotation) return undefined;\n\n    // 退場アニメーション設定\n    this.annotationState.update(s => ({\n      ...s,\n      deletingMarkerId: id,\n      exitingMarkers: new Set(s.exitingMarkers).add(id),\n    }));\n\n    // アニメーション完了後に実際に削除\n    setTimeout(() => {\n      this.annotationState.update(s => {\n        const newExiting = new Set(s.exitingMarkers);\n        newExiting.delete(id);\n        return {\n          ...s,\n          annotations: s.annotations.filter(a => a.id !== id),\n          deletingMarkerId: null,\n          exitingMarkers: newExiting,\n        };\n      });\n      this.persistAnnotations();\n    }, 150);\n\n    // サーバーから削除\n    if (this.endpoint && this.syncState().currentSessionId) {\n      deleteAnnotationFromServer(this.endpoint, id).catch(() => {});\n    }\n\n    return annotation;\n  }\n\n  /** アノテーション更新（コメント編集） */\n  updateAnnotation(id: string, comment: string): Annotation | undefined {\n    let updated: Annotation | undefined;\n\n    this.annotationState.update(s => {\n      const idx = s.annotations.findIndex(a => a.id === id);\n      if (idx === -1) return s;\n      const newAnnotations = [...s.annotations];\n      newAnnotations[idx] = { ...newAnnotations[idx], comment };\n      updated = newAnnotations[idx];\n      return { ...s, annotations: newAnnotations, editingAnnotation: null };\n    });\n\n    this.persistAnnotations();\n\n    // サーバー更新\n    if (updated && this.endpoint && this.syncState().currentSessionId) {\n      updateAnnotationOnServer(this.endpoint, id, { comment }).catch(() => {});\n    }\n\n    return updated;\n  }\n\n  /** 全アノテーション削除 */\n  clearAll(): Annotation[] {\n    const cleared = [...this.annotations()];\n    this.annotationState.update(s => ({\n      ...s,\n      annotations: [],\n      pendingAnnotation: null,\n      editingAnnotation: null,\n    }));\n    this.persistAnnotations();\n\n    // サーバーから各アノテーションを削除\n    if (this.endpoint && this.syncState().currentSessionId) {\n      for (const annotation of cleared) {\n        deleteAnnotationFromServer(this.endpoint, annotation.id).catch(() => {});\n      }\n    }\n\n    return cleared;\n  }\n\n  /** アノテーション編集モード開始 */\n  startEditing(annotation: Annotation): void {\n    this.annotationState.update(s => ({\n      ...s,\n      editingAnnotation: annotation,\n      pendingAnnotation: null,\n    }));\n  }\n\n  /** アノテーション編集モードキャンセル */\n  cancelEditing(): void {\n    this.annotationState.update(s => ({ ...s, editingAnnotation: null }));\n  }\n\n  /** 保留中アノテーションのキャンセル */\n  cancelPending(): void {\n    this.annotationState.update(s => ({ ...s, pendingAnnotation: null }));\n  }\n\n  // ===== ホバー状態 =====\n\n  updateHover(info: HoverInfo | null, position?: { x: number; y: number }): void {\n    this.hoverInfo.set(info);\n    if (position) {\n      this.hoverPosition.set(position);\n    }\n  }\n\n  setHoveredMarker(id: string | null): void {\n    this.annotationState.update(s => ({ ...s, hoveredMarkerId: id }));\n  }\n\n  // ===== 出力・コピー =====\n\n  async copyOutput(): Promise<string> {\n    const output = generateOutput(\n      this.annotations(),\n      this.pathname,\n      this.settings().outputDetail,\n      this.angularMode(),\n    );\n\n    if (this.copyToClipboardEnabled) {\n      try {\n        await navigator.clipboard.writeText(output);\n        this.actionState.update(s => ({ ...s, copied: true }));\n        setTimeout(() => {\n          this.actionState.update(s => ({ ...s, copied: false }));\n        }, 2000);\n      } catch {\n        // クリップボードアクセス失敗\n      }\n    }\n\n    // 自動クリア設定\n    if (this.settings().autoClearAfterCopy) {\n      this.clearAll();\n    }\n\n    return output;\n  }\n\n  /** サーバーにアクションを送信 */\n  async sendToAgent(): Promise<void> {\n    if (!this.endpoint || !this.syncState().currentSessionId) return;\n\n    this.actionState.update(s => ({ ...s, sendState: 'sending' }));\n\n    const output = generateOutput(\n      this.annotations(),\n      this.pathname,\n      this.settings().outputDetail,\n      this.angularMode(),\n    );\n\n    try {\n      await requestAction(this.endpoint, this.syncState().currentSessionId!, output);\n      this.actionState.update(s => ({ ...s, sendState: 'sent' }));\n      setTimeout(() => {\n        this.actionState.update(s => ({ ...s, sendState: 'idle' }));\n      }, 2000);\n    } catch {\n      this.actionState.update(s => ({ ...s, sendState: 'failed' }));\n      setTimeout(() => {\n        this.actionState.update(s => ({ ...s, sendState: 'idle' }));\n      }, 2000);\n    }\n  }\n\n  // ===== フリーズ制御 =====\n\n  toggleFreeze(): void {\n    // freeze/unfreezeはfreeze-animations.tsから呼び出し\n    this.isFrozen.update(v => !v);\n  }\n\n  // ===== スクロール状態 =====\n\n  updateScrollY(y: number): void {\n    this.scrollY.set(y);\n  }\n\n  setScrolling(isScrolling: boolean): void {\n    this.isScrolling.set(isScrolling);\n  }\n\n  // ===== プライベート =====\n\n  /** localStorageへの永続化 */\n  private persistAnnotations(): void {\n    const sessionId = this.syncState().currentSessionId;\n    if (sessionId) {\n      saveAnnotationsWithSyncMarker(this.pathname, this.annotations(), sessionId);\n    } else {\n      saveAnnotations(this.pathname, this.annotations());\n    }\n  }\n\n  /** サーバーへの同期 */\n  private async syncToServer(annotation: Annotation): Promise<void> {\n    if (!this.endpoint) return;\n\n    const sessionId = this.syncState().currentSessionId;\n    if (!sessionId) return;\n\n    const url = typeof window !== 'undefined' ? window.location.href : '';\n\n    try {\n      await syncAnnotation(this.endpoint, sessionId, {\n        ...annotation,\n        sessionId,\n        url,\n      });\n    } catch {\n      // 同期失敗時は無視（localStorageにはすでに保存済み）\n    }\n  }\n}\n","// =============================================================================\n// DOM・UIユーティリティ関数\n// =============================================================================\n\n/**\n * Shadow DOMを貫通して最深の要素を取得\n * document.elementFromPoint()はshadowホストで止まるため、\n * 再帰的にオープンshadow rootの内部をチェックして実際のターゲットを見つける\n */\nexport function deepElementFromPoint(x: number, y: number): HTMLElement | null {\n  let element = document.elementFromPoint(x, y) as HTMLElement | null;\n  if (!element) return null;\n\n  // Shadow rootを通して掘り下げ続ける\n  while (element?.shadowRoot) {\n    const deeper = element.shadowRoot.elementFromPoint(x, y) as HTMLElement | null;\n    if (!deeper || deeper === element) break;\n    element = deeper;\n  }\n\n  return element;\n}\n\n/**\n * 要素がfixed/sticky配置かどうか判定\n */\nexport function isElementFixed(element: HTMLElement): boolean {\n  let current: HTMLElement | null = element;\n  while (current && current !== document.body) {\n    const style = window.getComputedStyle(current);\n    const position = style.position;\n    if (position === \"fixed\" || position === \"sticky\") {\n      return true;\n    }\n    current = current.parentElement;\n  }\n  return false;\n}\n\n/**\n * HEX色コードをRGBA文字列に変換\n */\nexport function hexToRgba(hex: string, alpha: number): string {\n  const r = parseInt(hex.slice(1, 3), 16);\n  const g = parseInt(hex.slice(3, 5), 16);\n  const b = parseInt(hex.slice(5, 7), 16);\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n}\n\n/**\n * 日付文字列を相対時間表記に変換\n */\nexport function formatRelativeTime(dateString: string): string {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffSec = Math.floor(diffMs / 1000);\n  const diffMin = Math.floor(diffSec / 60);\n  const diffHr = Math.floor(diffMin / 60);\n  const diffDay = Math.floor(diffHr / 24);\n\n  if (diffSec < 60) return \"just now\";\n  if (diffMin < 60) return `${diffMin}m ago`;\n  if (diffHr < 24) return `${diffHr}h ago`;\n  if (diffDay < 7) return `${diffDay}d ago`;\n  return date.toLocaleDateString();\n}\n\n/**\n * URLを短縮表示用に切り詰め\n */\nexport function truncateUrl(url: string): string {\n  try {\n    const parsed = new URL(url);\n    const path = parsed.pathname;\n    // パスを表示、長すぎる場合は切り詰め\n    if (path.length > 25) {\n      return \"...\" + path.slice(-22);\n    }\n    return path || \"/\";\n  } catch {\n    // URLパースに失敗した場合は文字列を単純に切り詰め\n    if (url.length > 25) {\n      return \"...\" + url.slice(-22);\n    }\n    return url;\n  }\n}\n\n/**\n * 有効なHTTP(S) URLかどうかを検証\n */\nexport function isValidUrl(url: string): boolean {\n  if (!url || !url.trim()) return false;\n  try {\n    const parsed = new URL(url.trim());\n    return parsed.protocol === \"http:\" || parsed.protocol === \"https:\";\n  } catch {\n    return false;\n  }\n}\n","// =============================================================================\n// 要素識別ユーティリティ\n// =============================================================================\n\n// =============================================================================\n// Shadow DOMヘルパー\n// =============================================================================\n\n/**\n * 親要素を取得（Shadow DOM境界を越える）\n * Shadow Root内でparentElementがない場合、shadowホストを返す\n */\nfunction getParentElement(element: Element): Element | null {\n  if (element.parentElement) {\n    return element.parentElement;\n  }\n  const root = element.getRootNode();\n  if (root instanceof ShadowRoot) {\n    return root.host;\n  }\n  return null;\n}\n\n/**\n * Shadow DOM境界を越えて最も近い祖先要素を検索\n */\nexport function closestCrossingShadow(element: Element, selector: string): Element | null {\n  let current: Element | null = element;\n  while (current) {\n    if (current.matches(selector)) return current;\n    current = getParentElement(current);\n  }\n  return null;\n}\n\n/**\n * 要素がShadow DOM内にあるか判定\n */\nexport function isInShadowDOM(element: Element): boolean {\n  return element.getRootNode() instanceof ShadowRoot;\n}\n\n/**\n * 要素のshadowホストを取得（Shadow DOM内でない場合はnull）\n */\nexport function getShadowHost(element: Element): Element | null {\n  const root = element.getRootNode();\n  if (root instanceof ShadowRoot) {\n    return root.host;\n  }\n  return null;\n}\n\n// =============================================================================\n// 要素パスユーティリティ\n// =============================================================================\n\n/**\n * 要素の読みやすいパスを取得（例: \"article > section > p\"）\n * Shadow DOM内の要素もShadow境界を越えてサポート\n */\nexport function getElementPath(target: HTMLElement, maxDepth = 4): string {\n  const parts: string[] = [];\n  let current: HTMLElement | null = target;\n  let depth = 0;\n\n  while (current && depth < maxDepth) {\n    const tag = current.tagName.toLowerCase();\n\n    // 汎用ラッパーはスキップ\n    if (tag === \"html\" || tag === \"body\") break;\n\n    // 識別子を取得\n    let identifier = tag;\n    if (current.id) {\n      identifier = `#${current.id}`;\n    } else if (current.className && typeof current.className === \"string\") {\n      const meaningfulClass = current.className\n        .split(/\\s+/)\n        .find(c => c.length > 2 && !c.match(/^[a-z]{1,2}$/) && !c.match(/[A-Z0-9]{5,}/));\n      if (meaningfulClass) {\n        identifier = `.${meaningfulClass.split(\"_\")[0]}`;\n      }\n    }\n\n    // Shadow境界の越境をマーク\n    const nextParent = getParentElement(current);\n    if (!current.parentElement && nextParent) {\n      identifier = `⟨shadow⟩ ${identifier}`;\n    }\n\n    parts.unshift(identifier);\n    current = nextParent as HTMLElement | null;\n    depth++;\n  }\n\n  return parts.join(\" > \");\n}\n\n/**\n * 要素を識別して人間が読みやすい名前とパスを返す\n */\nexport function identifyElement(target: HTMLElement): { name: string; path: string } {\n  const path = getElementPath(target);\n\n  if (target.dataset['element']) {\n    return { name: target.dataset['element'], path };\n  }\n\n  const tag = target.tagName.toLowerCase();\n\n  // SVG要素\n  if ([\"path\", \"circle\", \"rect\", \"line\", \"g\"].includes(tag)) {\n    // 親SVGのコンテキストを取得（Shadow境界を越える）\n    const svg = closestCrossingShadow(target, \"svg\");\n    if (svg) {\n      const parent = getParentElement(svg);\n      if (parent instanceof HTMLElement) {\n        const parentName = identifyElement(parent).name;\n        return { name: `graphic in ${parentName}`, path };\n      }\n    }\n    return { name: \"graphic element\", path };\n  }\n  if (tag === \"svg\") {\n    const parent = getParentElement(target);\n    if (parent?.tagName.toLowerCase() === \"button\") {\n      const btnText = parent.textContent?.trim();\n      return { name: btnText ? `icon in \"${btnText}\" button` : \"button icon\", path };\n    }\n    return { name: \"icon\", path };\n  }\n\n  // インタラクティブ要素\n  if (tag === \"button\") {\n    const text = target.textContent?.trim();\n    const ariaLabel = target.getAttribute(\"aria-label\");\n    if (ariaLabel) return { name: `button [${ariaLabel}]`, path };\n    return { name: text ? `button \"${text.slice(0, 25)}\"` : \"button\", path };\n  }\n  if (tag === \"a\") {\n    const text = target.textContent?.trim();\n    const href = target.getAttribute(\"href\");\n    if (text) return { name: `link \"${text.slice(0, 25)}\"`, path };\n    if (href) return { name: `link to ${href.slice(0, 30)}`, path };\n    return { name: \"link\", path };\n  }\n  if (tag === \"input\") {\n    const type = target.getAttribute(\"type\") || \"text\";\n    const placeholder = target.getAttribute(\"placeholder\");\n    const name = target.getAttribute(\"name\");\n    if (placeholder) return { name: `input \"${placeholder}\"`, path };\n    if (name) return { name: `input [${name}]`, path };\n    return { name: `${type} input`, path };\n  }\n\n  // 見出し\n  if ([\"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"].includes(tag)) {\n    const text = target.textContent?.trim();\n    return { name: text ? `${tag} \"${text.slice(0, 35)}\"` : tag, path };\n  }\n\n  // テキスト要素\n  if (tag === \"p\") {\n    const text = target.textContent?.trim();\n    if (text) return { name: `paragraph: \"${text.slice(0, 40)}${text.length > 40 ? '...' : ''}\"`, path };\n    return { name: \"paragraph\", path };\n  }\n  if (tag === \"span\" || tag === \"label\") {\n    const text = target.textContent?.trim();\n    if (text && text.length < 40) return { name: `\"${text}\"`, path };\n    return { name: tag, path };\n  }\n  if (tag === \"li\") {\n    const text = target.textContent?.trim();\n    if (text && text.length < 40) return { name: `list item: \"${text.slice(0, 35)}\"`, path };\n    return { name: \"list item\", path };\n  }\n  if (tag === \"blockquote\") return { name: \"blockquote\", path };\n  if (tag === \"code\") {\n    const text = target.textContent?.trim();\n    if (text && text.length < 30) return { name: `code: \\`${text}\\``, path };\n    return { name: \"code\", path };\n  }\n  if (tag === \"pre\") return { name: \"code block\", path };\n\n  // メディア\n  if (tag === \"img\") {\n    const alt = target.getAttribute(\"alt\");\n    return { name: alt ? `image \"${alt.slice(0, 30)}\"` : \"image\", path };\n  }\n  if (tag === \"video\") return { name: \"video\", path };\n\n  // コンテナ - 意味のある名前を推測\n  if ([\"div\", \"section\", \"article\", \"nav\", \"header\", \"footer\", \"aside\", \"main\"].includes(tag)) {\n    const className = target.className;\n    const role = target.getAttribute(\"role\");\n    const ariaLabel = target.getAttribute(\"aria-label\");\n\n    if (ariaLabel) return { name: `${tag} [${ariaLabel}]`, path };\n    if (role) return { name: `${role}`, path };\n\n    if (typeof className === \"string\" && className) {\n      const words = className\n        .split(/[\\s_-]+/)\n        .map((c) => c.replace(/[A-Z0-9]{5,}.*$/, \"\")) // CSSモジュールのハッシュを除去\n        .filter((c) => c.length > 2 && !/^[a-z]{1,2}$/.test(c))\n        .slice(0, 2);\n      if (words.length > 0) return { name: words.join(\" \"), path };\n    }\n\n    return { name: tag === \"div\" ? \"container\" : tag, path };\n  }\n\n  return { name: tag, path };\n}\n\n/**\n * 要素とその兄弟からテキストコンテンツを取得（コンテキスト用）\n */\nexport function getNearbyText(element: HTMLElement): string {\n  const texts: string[] = [];\n\n  // 自身のテキスト\n  const ownText = element.textContent?.trim();\n  if (ownText && ownText.length < 100) {\n    texts.push(ownText);\n  }\n\n  // 前の兄弟のテキスト\n  const prev = element.previousElementSibling;\n  if (prev) {\n    const prevText = prev.textContent?.trim();\n    if (prevText && prevText.length < 50) {\n      texts.unshift(`[before: \"${prevText.slice(0, 40)}\"]`);\n    }\n  }\n\n  // 次の兄弟のテキスト\n  const next = element.nextElementSibling;\n  if (next) {\n    const nextText = next.textContent?.trim();\n    if (nextText && nextText.length < 50) {\n      texts.push(`[after: \"${nextText.slice(0, 40)}\"]`);\n    }\n  }\n\n  return texts.join(\" \");\n}\n\n/**\n * アニメーションフィードバック用の簡略化された要素識別子\n */\nexport function identifyAnimationElement(target: HTMLElement): string {\n  // data属性による明示的なラベリングを許可\n  if (target.dataset['element']) return target.dataset['element'];\n\n  const tag = target.tagName.toLowerCase();\n\n  // SVG要素\n  if (tag === \"path\") return \"path\";\n  if (tag === \"circle\") return \"circle\";\n  if (tag === \"rect\") return \"rectangle\";\n  if (tag === \"line\") return \"line\";\n  if (tag === \"ellipse\") return \"ellipse\";\n  if (tag === \"polygon\") return \"polygon\";\n  if (tag === \"g\") return \"group\";\n  if (tag === \"svg\") return \"svg\";\n\n  // インタラクティブ要素\n  if (tag === \"button\") {\n    const text = target.textContent?.trim();\n    return text ? `button \"${text}\"` : \"button\";\n  }\n  if (tag === \"input\") {\n    const type = target.getAttribute(\"type\") || \"text\";\n    return `input (${type})`;\n  }\n\n  // テキスト要素\n  if (tag === \"span\" || tag === \"p\" || tag === \"label\") {\n    const text = target.textContent?.trim();\n    if (text && text.length < 30) return `\"${text}\"`;\n    return \"text\";\n  }\n\n  // コンテナ - クラス名から用途を推測\n  if (tag === \"div\") {\n    const className = target.className;\n    if (typeof className === \"string\" && className) {\n      const words = className\n        .split(/[\\s_-]+/)\n        .map(c => c.replace(/[A-Z0-9]{5,}.*$/, \"\"))\n        .filter(c => c.length > 2 && !/^[a-z]{1,2}$/.test(c))\n        .slice(0, 2);\n      if (words.length > 0) {\n        return words.join(\" \");\n      }\n    }\n    return \"container\";\n  }\n\n  return tag;\n}\n\n/**\n * 構造的コンテキスト用に近くの兄弟要素を取得\n * Shadow DOM内の要素もサポート\n */\nexport function getNearbyElements(element: HTMLElement): string {\n  const parent = getParentElement(element);\n  if (!parent) return \"\";\n\n  // 正しいソースから兄弟を取得\n  const elementRoot = element.getRootNode();\n  const children = (elementRoot instanceof ShadowRoot && element.parentElement)\n    ? Array.from(element.parentElement.children)\n    : Array.from(parent.children);\n\n  const siblings = children.filter(\n    (child) => child !== element && child instanceof HTMLElement\n  ) as HTMLElement[];\n\n  if (siblings.length === 0) return \"\";\n\n  // 最大4つの近くの兄弟の簡潔な識別子を取得\n  const siblingIds = siblings.slice(0, 4).map((sib) => {\n    const tag = sib.tagName.toLowerCase();\n    const className = sib.className;\n\n    // 最初の意味のあるクラスを取得\n    let cls = \"\";\n    if (typeof className === \"string\" && className) {\n      const meaningful = className\n        .split(/\\s+/)\n        .map((c) => c.replace(/[_][a-zA-Z0-9]{5,}.*$/, \"\")) // モジュールハッシュを除去\n        .find((c) => c.length > 2 && !/^[a-z]{1,2}$/.test(c));\n      if (meaningful) cls = `.${meaningful}`;\n    }\n\n    // ボタン/リンクには短いテキストを含める\n    if (tag === \"button\" || tag === \"a\") {\n      const text = sib.textContent?.trim().slice(0, 15);\n      if (text) return `${tag}${cls} \"${text}\"`;\n    }\n\n    return `${tag}${cls}`;\n  });\n\n  // 親のコンテキストを追加\n  const parentTag = parent.tagName.toLowerCase();\n  let parentId = parentTag;\n  if (typeof parent.className === \"string\" && parent.className) {\n    const parentCls = parent.className\n      .split(/\\s+/)\n      .map((c) => c.replace(/[_][a-zA-Z0-9]{5,}.*$/, \"\"))\n      .find((c) => c.length > 2 && !/^[a-z]{1,2}$/.test(c));\n    if (parentCls) parentId = `.${parentCls}`;\n  }\n\n  const total = parent.children.length;\n  const suffix = total > siblingIds.length + 1 ? ` (${total} total in ${parentId})` : \"\";\n\n  return siblingIds.join(\", \") + suffix;\n}\n\n/**\n * 要素のCSSクラス名を取得（モジュールハッシュを除去）\n */\nexport function getElementClasses(target: HTMLElement): string {\n  const className = target.className;\n  if (typeof className !== \"string\" || !className) return \"\";\n\n  // クラス名を分割してクリーンアップ（モジュールハッシュ _abc123 を除去）\n  const classes = className\n    .split(/\\s+/)\n    .filter(c => c.length > 0)\n    .map(c => {\n      // ハッシュ前の意味のある部分を保持\n      const match = c.match(/^([a-zA-Z][a-zA-Z0-9_-]*?)(?:_[a-zA-Z0-9]{5,})?$/);\n      return match ? match[1] : c;\n    })\n    .filter((c, i, arr) => arr.indexOf(c) === i); // 重複排除\n\n  return classes.join(\", \");\n}\n\n/**\n * 要素の主要な計算済みスタイルを取得（スタイリングの問題に有用）\n */\nexport function getComputedStylesSnapshot(target: HTMLElement): string {\n  if (typeof window === \"undefined\") return \"\";\n\n  const styles = window.getComputedStyle(target);\n  const parts: string[] = [];\n\n  // 色とテキスト\n  const color = styles.color;\n  const bg = styles.backgroundColor;\n  if (color && color !== \"rgb(0, 0, 0)\") parts.push(`color: ${color}`);\n  if (bg && bg !== \"rgba(0, 0, 0, 0)\" && bg !== \"transparent\") parts.push(`bg: ${bg}`);\n\n  // タイポグラフィ\n  const fontSize = styles.fontSize;\n  const fontWeight = styles.fontWeight;\n  if (fontSize) parts.push(`font: ${fontSize}`);\n  if (fontWeight && fontWeight !== \"400\" && fontWeight !== \"normal\") parts.push(`weight: ${fontWeight}`);\n\n  // スペーシング\n  const padding = styles.padding;\n  const margin = styles.margin;\n  if (padding && padding !== \"0px\") parts.push(`padding: ${padding}`);\n  if (margin && margin !== \"0px\") parts.push(`margin: ${margin}`);\n\n  // レイアウト\n  const display = styles.display;\n  const position = styles.position;\n  if (display && display !== \"block\" && display !== \"inline\") parts.push(`display: ${display}`);\n  if (position && position !== \"static\") parts.push(`position: ${position}`);\n\n  // ボーダー\n  const borderRadius = styles.borderRadius;\n  if (borderRadius && borderRadius !== \"0px\") parts.push(`radius: ${borderRadius}`);\n\n  return parts.join(\", \");\n}\n\n// 計算済みスタイル収集時にフィルタリングする値（ブラウザデフォルト / 無関係な値）\nconst DEFAULT_STYLE_VALUES = new Set([\n  \"none\", \"normal\", \"auto\", \"0px\", \"rgba(0, 0, 0, 0)\", \"transparent\", \"static\", \"visible\"\n]);\n\n// スタイルプロパティ選択用の要素タイプカテゴリ\nconst TEXT_ELEMENTS = new Set([\n  \"p\", \"span\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"label\", \"li\", \"td\", \"th\",\n  \"blockquote\", \"figcaption\", \"caption\", \"legend\", \"dt\", \"dd\", \"pre\", \"code\",\n  \"em\", \"strong\", \"b\", \"i\", \"a\", \"time\", \"cite\", \"q\"\n]);\nconst FORM_INPUT_ELEMENTS = new Set([\"input\", \"textarea\", \"select\"]);\nconst MEDIA_ELEMENTS = new Set([\"img\", \"video\", \"canvas\", \"svg\"]);\nconst CONTAINER_ELEMENTS = new Set([\n  \"div\", \"section\", \"article\", \"nav\", \"header\", \"footer\", \"aside\", \"main\",\n  \"ul\", \"ol\", \"form\", \"fieldset\"\n]);\n\n/**\n * アノテーションポップアップ表示用の主要な計算済みスタイルを取得\n * 要素タイプに基づいて異なるプロパティを返し、デバッグに最も関連性の高い\n * CSSプロパティを表示する\n */\nexport function getDetailedComputedStyles(target: HTMLElement): Record<string, string> {\n  if (typeof window === \"undefined\") return {};\n\n  const styles = window.getComputedStyle(target);\n  const result: Record<string, string> = {};\n  const tag = target.tagName.toLowerCase();\n\n  // 要素タイプに基づいて関連プロパティを選択\n  let properties: string[];\n\n  if (TEXT_ELEMENTS.has(tag)) {\n    // テキスト要素にはタイポグラフィ重視\n    properties = [\"color\", \"fontSize\", \"fontWeight\", \"fontFamily\", \"lineHeight\"];\n  } else if (tag === \"button\" || (tag === \"a\" && target.getAttribute(\"role\") === \"button\")) {\n    // インタラクティブ要素には外観とスペーシング\n    properties = [\"backgroundColor\", \"color\", \"padding\", \"borderRadius\", \"fontSize\"];\n  } else if (FORM_INPUT_ELEMENTS.has(tag)) {\n    // フォームスタイリング\n    properties = [\"backgroundColor\", \"color\", \"padding\", \"borderRadius\", \"fontSize\"];\n  } else if (MEDIA_ELEMENTS.has(tag)) {\n    // メディアにはサイズ\n    properties = [\"width\", \"height\", \"objectFit\", \"borderRadius\"];\n  } else if (CONTAINER_ELEMENTS.has(tag)) {\n    // コンテナにはレイアウト重視\n    properties = [\"display\", \"padding\", \"margin\", \"gap\", \"backgroundColor\"];\n  } else {\n    // デフォルトフォールバック\n    properties = [\"color\", \"fontSize\", \"margin\", \"padding\", \"backgroundColor\"];\n  }\n\n  for (const prop of properties) {\n    const cssPropertyName = prop.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n    const value = styles.getPropertyValue(cssPropertyName);\n    if (value && !DEFAULT_STYLE_VALUES.has(value)) {\n      result[prop] = value;\n    }\n  }\n\n  return result;\n}\n\n// フォレンジック出力用の包括的CSSプロパティリスト\nconst FORENSIC_PROPERTIES = [\n  // 色\n  \"color\", \"backgroundColor\", \"borderColor\",\n  // タイポグラフィ\n  \"fontSize\", \"fontWeight\", \"fontFamily\", \"lineHeight\", \"letterSpacing\", \"textAlign\",\n  // ボックスモデル\n  \"width\", \"height\", \"padding\", \"margin\", \"border\", \"borderRadius\",\n  // レイアウトと配置\n  \"display\", \"position\", \"top\", \"right\", \"bottom\", \"left\", \"zIndex\",\n  \"flexDirection\", \"justifyContent\", \"alignItems\", \"gap\",\n  // ビジュアルエフェクト\n  \"opacity\", \"visibility\", \"overflow\", \"boxShadow\",\n  // トランスフォーム\n  \"transform\",\n];\n\n/**\n * フォレンジック出力用の完全な計算済みスタイルを取得\n * フォレンジック出力形式で最大限のデバッグ詳細のため、\n * 関連する全CSSプロパティのセミコロン区切り文字列を返す\n */\nexport function getForensicComputedStyles(target: HTMLElement): string {\n  if (typeof window === \"undefined\") return \"\";\n\n  const styles = window.getComputedStyle(target);\n  const parts: string[] = [];\n\n  for (const prop of FORENSIC_PROPERTIES) {\n    const cssPropertyName = prop.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n    const value = styles.getPropertyValue(cssPropertyName);\n    if (value && !DEFAULT_STYLE_VALUES.has(value)) {\n      parts.push(`${cssPropertyName}: ${value}`);\n    }\n  }\n\n  return parts.join(\"; \");\n}\n\n/**\n * フォレンジック計算済みスタイル文字列をRecordに変換\n * getForensicComputedStylesの逆操作 - アノテーション編集時に使用\n */\nexport function parseComputedStylesString(\n  stylesStr: string | undefined,\n): Record<string, string> | undefined {\n  if (!stylesStr) return undefined;\n\n  const result: Record<string, string> = {};\n  const parts = stylesStr.split(\";\").map((p) => p.trim()).filter(Boolean);\n\n  for (const part of parts) {\n    const colonIndex = part.indexOf(\":\");\n    if (colonIndex > 0) {\n      const key = part.slice(0, colonIndex).trim();\n      const value = part.slice(colonIndex + 1).trim();\n      if (key && value) {\n        result[key] = value;\n      }\n    }\n  }\n\n  return Object.keys(result).length > 0 ? result : undefined;\n}\n\n/**\n * 要素のアクセシビリティ情報を取得\n */\nexport function getAccessibilityInfo(target: HTMLElement): string {\n  const parts: string[] = [];\n\n  const role = target.getAttribute(\"role\");\n  const ariaLabel = target.getAttribute(\"aria-label\");\n  const ariaDescribedBy = target.getAttribute(\"aria-describedby\");\n  const tabIndex = target.getAttribute(\"tabindex\");\n  const ariaHidden = target.getAttribute(\"aria-hidden\");\n\n  if (role) parts.push(`role=\"${role}\"`);\n  if (ariaLabel) parts.push(`aria-label=\"${ariaLabel}\"`);\n  if (ariaDescribedBy) parts.push(`aria-describedby=\"${ariaDescribedBy}\"`);\n  if (tabIndex) parts.push(`tabindex=${tabIndex}`);\n  if (ariaHidden === \"true\") parts.push(\"aria-hidden\");\n\n  // フォーカス可能性チェック\n  const focusable = target.matches(\"a, button, input, select, textarea, [tabindex]\");\n  if (focusable) parts.push(\"focusable\");\n\n  return parts.join(\", \");\n}\n\n/**\n * 完全なDOM祖先パスを取得（フォレンジックモード用）\n * Shadow DOM内の要素もShadow境界の越境をマーキングしてサポート\n */\nexport function getFullElementPath(target: HTMLElement): string {\n  const parts: string[] = [];\n  let current: HTMLElement | null = target;\n\n  while (current && current.tagName.toLowerCase() !== \"html\") {\n    const tag = current.tagName.toLowerCase();\n    let identifier = tag;\n\n    if (current.id) {\n      identifier = `${tag}#${current.id}`;\n    } else if (current.className && typeof current.className === \"string\") {\n      const cls = current.className\n        .split(/\\s+/)\n        .map(c => c.replace(/[_][a-zA-Z0-9]{5,}.*$/, \"\"))\n        .find(c => c.length > 2);\n      if (cls) identifier = `${tag}.${cls}`;\n    }\n\n    // Shadow境界の越境をマーク\n    const nextParent = getParentElement(current);\n    if (!current.parentElement && nextParent) {\n      identifier = `⟨shadow⟩ ${identifier}`;\n    }\n\n    parts.unshift(identifier);\n    current = nextParent as HTMLElement | null;\n  }\n\n  return parts.join(\" > \");\n}\n","// =============================================================================\n// Angularコンポーネント検出モジュール\n// =============================================================================\n\n// 検出設定\nexport interface DetectionConfig {\n  /** 検出モード: auto（自動判定）, debug-api（ng.getComponent使用）, tag-name（タグ名ベース） */\n  mode?: 'auto' | 'debug-api' | 'tag-name';\n  /** 親要素の探索上限 */\n  maxDepth?: number;\n  /** 検出するコンポーネント数の上限 */\n  maxComponents?: number;\n}\n\n// コンポーネント情報\nexport interface ComponentInfo {\n  /** コンポーネントパス（例: \"<AppComponent> <DashboardComponent> <ButtonComponent>\"） */\n  path: string | null;\n  /** コンポーネント名の配列 */\n  components: string[];\n}\n\n/**\n * HTMLElementに対応するAngularコンポーネント名を検出する\n */\nexport function getAngularComponentName(\n  element: HTMLElement,\n  config: DetectionConfig = {}\n): ComponentInfo {\n  const { mode = 'auto', maxDepth = 10, maxComponents = 5 } = config;\n\n  // デバッグAPI利用可能か判定\n  if (mode === 'auto' || mode === 'debug-api') {\n    if (typeof window !== 'undefined' && (window as unknown as Record<string, unknown>)['ng']) {\n      const ng = (window as unknown as Record<string, unknown>)['ng'] as Record<string, unknown>;\n      if (typeof ng['getComponent'] === 'function') {\n        return detectViaDebugAPI(element, maxDepth, maxComponents);\n      }\n    }\n  }\n\n  // フォールバック: タグ名ベース検出\n  if (mode === 'auto' || mode === 'tag-name') {\n    return detectViaTagName(element, maxDepth, maxComponents);\n  }\n\n  return { path: null, components: [] };\n}\n\n/**\n * Angular Debug API経由でコンポーネントを検出\n */\nfunction detectViaDebugAPI(\n  element: HTMLElement,\n  maxDepth: number,\n  maxComponents: number\n): ComponentInfo {\n  const ng = (window as unknown as Record<string, unknown>)['ng'] as Record<string, (...args: unknown[]) => unknown>;\n  const components: string[] = [];\n  let current: HTMLElement | null = element;\n  let depth = 0;\n\n  while (current && depth < maxDepth && components.length < maxComponents) {\n    try {\n      const component = ng['getComponent'](current) as Record<string, unknown> | null;\n      if (component) {\n        const name = (component.constructor as { name?: string })?.name || current.tagName.toLowerCase();\n        components.unshift(name);\n      }\n    } catch {\n      // コンポーネントが見つからない場合は無視\n    }\n    current = current.parentElement;\n    depth++;\n  }\n\n  return {\n    path: components.length > 0 ? components.map(c => `<${c}>`).join(' ') : null,\n    components,\n  };\n}\n\n/**\n * タグ名ベースでAngularコンポーネントを検出（常時利用可能）\n */\nfunction detectViaTagName(\n  element: HTMLElement,\n  maxDepth: number,\n  maxComponents: number\n): ComponentInfo {\n  const components: string[] = [];\n  let current: HTMLElement | null = element;\n  let depth = 0;\n\n  while (current && depth < maxDepth && components.length < maxComponents) {\n    const tagName = current.tagName?.toLowerCase();\n    // カスタム要素（ハイフン含むタグ名）はAngularコンポーネントの可能性が高い\n    if (tagName && tagName.includes('-') && !tagName.startsWith('ng-')) {\n      // ケバブケースをPascalCaseに変換\n      const pascalName = tagName\n        .split('-')\n        .map(part => part.charAt(0).toUpperCase() + part.slice(1))\n        .join('');\n      components.unshift(pascalName);\n    }\n    current = current.parentElement;\n    depth++;\n  }\n\n  return {\n    path: components.length > 0 ? components.map(c => `<${c}>`).join(' ') : null,\n    components,\n  };\n}\n","// =============================================================================\n// DOMイベント管理サービス\n// =============================================================================\n//\n// NgZone外で高頻度DOMイベント（mousemove, click, scroll等）を処理し、\n// 変更検出のパフォーマンスオーバーヘッドを最小化する。\n//\n\nimport { Injectable, NgZone, DestroyRef, inject } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { deepElementFromPoint, isElementFixed } from '../utils/helpers';\nimport {\n  identifyElement,\n  getNearbyText,\n  getElementClasses,\n  getDetailedComputedStyles,\n  getForensicComputedStyles,\n  getFullElementPath,\n  getAccessibilityInfo,\n  getNearbyElements,\n} from '../utils/element-identification';\nimport { getAngularComponentName } from '../detection/angular-detector';\nimport { originalSetTimeout } from '../utils/freeze-animations';\n\n// マウスムーブコールバックの型\nexport interface MouseMoveResult {\n  element: string;\n  elementName: string;\n  elementPath: string;\n  rect: DOMRect | null;\n  angularComponents?: string | null;\n  position: { x: number; y: number };\n}\n\n// クリックコールバックの型\nexport interface ClickResult {\n  x: number;\n  y: number;\n  clientY: number;\n  element: string;\n  elementPath: string;\n  selectedText?: string;\n  boundingBox?: { x: number; y: number; width: number; height: number };\n  nearbyText?: string;\n  cssClasses?: string;\n  isMultiSelect?: boolean;\n  isFixed?: boolean;\n  fullPath?: string;\n  accessibility?: string;\n  computedStyles?: string;\n  computedStylesObj?: Record<string, string>;\n  nearbyElements?: string;\n  angularComponents?: string;\n  elementBoundingBoxes?: Array<{ x: number; y: number; width: number; height: number }>;\n  targetElement?: HTMLElement;\n}\n\n@Injectable()\nexport class DOMEventService {\n  private readonly ngZone = inject(NgZone);\n  private readonly destroyRef = inject(DestroyRef);\n\n  // イベントストリーム\n  readonly mouseMove$ = new Subject<MouseMoveResult>();\n  readonly elementClick$ = new Subject<ClickResult>();\n  readonly escapePress$ = new Subject<void>();\n  readonly scrollChange$ = new Subject<number>();\n\n  // イベントリスナーのクリーンアップ関数\n  private cleanupFns: Array<() => void> = [];\n  private isAttached = false;\n\n  // ドラッグ選択の状態\n  private mouseDownPos: { x: number; y: number } | null = null;\n  private dragStart: { x: number; y: number } | null = null;\n  private isDragActive = false;\n  private lastElementUpdate = 0;\n  private justFinishedDrag = false;\n  private readonly DRAG_THRESHOLD = 8;\n  private readonly ELEMENT_UPDATE_THROTTLE = 50;\n\n  // ドラッグ選択のイベントストリーム\n  readonly dragStateChange$ = new Subject<boolean>();\n  readonly dragRect$ = new Subject<{ left: number; top: number; width: number; height: number } | null>();\n  readonly dragHighlights$ = new Subject<DOMRect[]>();\n  readonly dragComplete$ = new Subject<ClickResult>();\n\n  // ドラッグ開始を無視するテキスト要素・フォーム要素タグ\n  private readonly TEXT_TAGS = new Set([\n    'P', 'SPAN', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',\n    'LI', 'TD', 'TH', 'LABEL', 'BLOCKQUOTE', 'FIGCAPTION',\n    'CAPTION', 'LEGEND', 'DT', 'DD', 'PRE', 'CODE',\n    'EM', 'STRONG', 'B', 'I', 'U', 'S', 'A',\n    'TIME', 'ADDRESS', 'CITE', 'Q', 'ABBR', 'DFN',\n    'MARK', 'SMALL', 'SUB', 'SUP',\n    'INPUT', 'TEXTAREA', 'SELECT',\n  ]);\n\n  // ドラッグ検出対象の有意な要素タグ\n  private readonly MEANINGFUL_TAGS = new Set([\n    'BUTTON', 'A', 'INPUT', 'IMG',\n    'P', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6',\n    'LI', 'LABEL', 'TD', 'TH',\n    'SECTION', 'ARTICLE', 'ASIDE', 'NAV',\n  ]);\n\n  // 近傍要素検索セレクタ\n  private readonly NEARBY_SELECTOR = 'button, a, input, img, p, h1, h2, h3, h4, h5, h6, li, label, td, th, div, span, section, article, aside, nav';\n\n  // 最終要素検索セレクタ（mouseup時）\n  private readonly FINAL_SELECTOR = 'button, a, input, img, p, h1, h2, h3, h4, h5, h6, li, label, td, th';\n\n  /** DOMイベントリスナーを設置（ツールバー活性化時に呼び出し） */\n  attach(options: {\n    angularMode: 'smart' | 'filtered' | 'all' | 'off';\n    outputDetail: string;\n    blockInteractions: boolean;\n  }): void {\n    if (this.isAttached) return;\n    this.isAttached = true;\n\n    this.ngZone.runOutsideAngular(() => {\n      // --- ドラッグ選択: mousedown ---\n      const handleMouseDown = (e: MouseEvent): void => {\n        // 左ボタンのみ（右クリック・中クリック等を除外）\n        if (e.button !== 0) return;\n\n        const target = deepElementFromPoint(e.clientX, e.clientY);\n        if (!target) return;\n        if (this.isToolbarElement(target)) return;\n\n        // テキスト要素上ではネイティブ選択を優先\n        if (this.TEXT_TAGS.has(target.tagName) || target.isContentEditable) return;\n\n        this.mouseDownPos = { x: e.clientX, y: e.clientY };\n      };\n\n      document.addEventListener('mousedown', handleMouseDown);\n      this.cleanupFns.push(() => document.removeEventListener('mousedown', handleMouseDown));\n\n      // mousemoveリスナー\n      const handleMouseMove = (e: MouseEvent): void => {\n        // --- ドラッグ処理 ---\n        if (this.mouseDownPos) {\n          const dx = e.clientX - this.mouseDownPos.x;\n          const dy = e.clientY - this.mouseDownPos.y;\n          const distance = dx * dx + dy * dy;\n          const thresholdSq = this.DRAG_THRESHOLD * this.DRAG_THRESHOLD;\n\n          if (!this.isDragActive && distance >= thresholdSq) {\n            this.dragStart = this.mouseDownPos;\n            this.isDragActive = true;\n            this.dragStateChange$.next(true);\n          }\n\n          if (this.isDragActive && this.dragStart) {\n            // ドラッグ矩形を更新\n            const left = Math.min(this.dragStart.x, e.clientX);\n            const top = Math.min(this.dragStart.y, e.clientY);\n            const width = Math.abs(e.clientX - this.dragStart.x);\n            const height = Math.abs(e.clientY - this.dragStart.y);\n            this.dragRect$.next({ left, top, width, height });\n\n            // 要素検出のスロットリング\n            const now = Date.now();\n            if (now - this.lastElementUpdate < this.ELEMENT_UPDATE_THROTTLE) return;\n            this.lastElementUpdate = now;\n\n            const right = Math.max(this.dragStart.x, e.clientX);\n            const bottom = Math.max(this.dragStart.y, e.clientY);\n\n            const highlights = this.findElementsInRect(left, top, right, bottom);\n            this.dragHighlights$.next(highlights);\n            return; // ドラッグ中はホバー処理をスキップ\n          }\n        }\n\n        // --- 通常のホバー処理 ---\n        const target = deepElementFromPoint(e.clientX, e.clientY);\n        if (!target) return;\n\n        // フィードバックツールバー自体の要素は無視\n        if (this.isToolbarElement(target)) {\n          this.mouseMove$.next({\n            element: '',\n            elementName: '',\n            elementPath: '',\n            rect: null,\n            position: { x: e.clientX, y: e.clientY },\n          });\n          return;\n        }\n\n        const { name: elementName, path } = identifyElement(target);\n\n        // Angularコンポーネント検出\n        let angularComponents: string | null = null;\n        if (options.angularMode !== 'off') {\n          const info = getAngularComponentName(target, { mode: 'auto' });\n          angularComponents = info.path;\n        }\n\n        const displayName = angularComponents\n          ? `${angularComponents} ${elementName}`\n          : elementName;\n\n        this.mouseMove$.next({\n          element: displayName,\n          elementName,\n          elementPath: path,\n          rect: target.getBoundingClientRect(),\n          angularComponents,\n          position: { x: e.clientX, y: e.clientY },\n        });\n      };\n\n      document.addEventListener('mousemove', handleMouseMove);\n      this.cleanupFns.push(() => document.removeEventListener('mousemove', handleMouseMove));\n\n      // クリックリスナー（capture phaseで先に処理）\n      const handleClick = (e: MouseEvent): void => {\n        // ドラッグ直後のクリックは無視\n        if (this.justFinishedDrag) {\n          this.justFinishedDrag = false;\n          e.preventDefault();\n          e.stopPropagation();\n          return;\n        }\n\n        const target = deepElementFromPoint(e.clientX, e.clientY);\n        if (!target) return;\n        if (this.isToolbarElement(target)) return;\n\n        // ページのデフォルトクリック動作を阻止\n        if (options.blockInteractions) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        const { name: elementName, path: elementPath } = identifyElement(target);\n        const rect = target.getBoundingClientRect();\n        const isFixed = isElementFixed(target);\n\n        // 要素の詳細情報を収集\n        const nearbyText = getNearbyText(target);\n        const cssClasses = getElementClasses(target);\n        const fullPath = getFullElementPath(target);\n        const accessibility = getAccessibilityInfo(target);\n        const nearbyElements = getNearbyElements(target);\n\n        // 常にポップアップ用のComputedStylesを収集（React版準拠）\n        let computedStyles = '';\n        const computedStylesObj = getDetailedComputedStyles(target);\n\n        // フォレンジックモードでは追加で詳細文字列も取得\n        if (options.outputDetail === 'forensic') {\n          computedStyles = getForensicComputedStyles(target);\n        } else {\n          computedStyles = Object.entries(computedStylesObj)\n            .map(([k, v]) => `${k}: ${v}`)\n            .join('; ');\n        }\n\n        // Angularコンポーネント検出\n        let angularComponents: string | undefined;\n        if (options.angularMode !== 'off') {\n          const info = getAngularComponentName(target, { mode: 'auto' });\n          angularComponents = info.path || undefined;\n        }\n\n        const displayName = angularComponents\n          ? `${angularComponents} ${elementName}`\n          : elementName;\n\n        const x = (e.clientX / window.innerWidth) * 100;\n        const y = isFixed ? e.clientY : e.clientY + window.scrollY;\n\n        this.elementClick$.next({\n          x,\n          y,\n          clientY: e.clientY,\n          element: displayName,\n          elementPath,\n          selectedText: window.getSelection()?.toString()?.trim() || undefined,\n          boundingBox: {\n            x: rect.x,\n            y: isFixed ? rect.y : rect.y + window.scrollY,\n            width: rect.width,\n            height: rect.height,\n          },\n          nearbyText: nearbyText || undefined,\n          cssClasses: cssClasses || undefined,\n          isFixed,\n          fullPath: fullPath || undefined,\n          accessibility: accessibility || undefined,\n          computedStyles: computedStyles || undefined,\n          computedStylesObj: Object.keys(computedStylesObj).length > 0 ? computedStylesObj : undefined,\n          nearbyElements: nearbyElements || undefined,\n          angularComponents,\n          targetElement: target,\n        });\n      };\n\n      document.addEventListener('click', handleClick, true);\n      this.cleanupFns.push(() => document.removeEventListener('click', handleClick, true));\n\n      // --- ドラッグ選択: mouseup ---\n      const handleMouseUp = (e: MouseEvent): void => {\n        if (this.isDragActive && this.dragStart) {\n          this.justFinishedDrag = true;\n\n          // 最終的な要素検出\n          const left = Math.min(this.dragStart.x, e.clientX);\n          const top = Math.min(this.dragStart.y, e.clientY);\n          const right = Math.max(this.dragStart.x, e.clientX);\n          const bottom = Math.max(this.dragStart.y, e.clientY);\n\n          // 最終要素を再検出（mouseup時はより厳密なセレクタ）\n          const finalElements = this.findFinalElements(left, top, right, bottom);\n\n          const x = (e.clientX / window.innerWidth) * 100;\n          const y = e.clientY + window.scrollY;\n\n          if (finalElements.length > 0) {\n            const bounds = finalElements.reduce(\n              (acc, { rect }) => ({\n                left: Math.min(acc.left, rect.left),\n                top: Math.min(acc.top, rect.top),\n                right: Math.max(acc.right, rect.right),\n                bottom: Math.max(acc.bottom, rect.bottom),\n              }),\n              { left: Infinity, top: Infinity, right: -Infinity, bottom: -Infinity },\n            );\n\n            const elementNames = finalElements\n              .slice(0, 5)\n              .map(({ element }) => identifyElement(element).name)\n              .join(', ');\n            const suffix = finalElements.length > 5\n              ? ` +${finalElements.length - 5} more`\n              : '';\n\n            // 最初の要素からスタイル情報を収集\n            const firstEl = finalElements[0].element;\n            const computedStylesObj = getDetailedComputedStyles(firstEl);\n            const computedStyles = getForensicComputedStyles(firstEl);\n\n            this.dragComplete$.next({\n              x,\n              y,\n              clientY: e.clientY,\n              element: `${finalElements.length} elements: ${elementNames}${suffix}`,\n              elementPath: 'multi-select',\n              isMultiSelect: true,\n              boundingBox: {\n                x: bounds.left,\n                y: bounds.top + window.scrollY,\n                width: bounds.right - bounds.left,\n                height: bounds.bottom - bounds.top,\n              },\n              fullPath: getFullElementPath(firstEl),\n              accessibility: getAccessibilityInfo(firstEl),\n              computedStyles: computedStyles || undefined,\n              computedStylesObj: Object.keys(computedStylesObj).length > 0 ? computedStylesObj : undefined,\n              nearbyElements: getNearbyElements(firstEl),\n              cssClasses: getElementClasses(firstEl),\n              nearbyText: getNearbyText(firstEl),\n              targetElement: firstEl,\n            });\n          } else {\n            // 要素がない場合でもドラッグ範囲が意味のあるサイズなら発行\n            const width = Math.abs(right - left);\n            const height = Math.abs(bottom - top);\n            if (width > 20 && height > 20) {\n              this.dragComplete$.next({\n                x,\n                y,\n                clientY: e.clientY,\n                element: 'Area selection',\n                elementPath: `region at (${Math.round(left)}, ${Math.round(top)})`,\n                isMultiSelect: true,\n                boundingBox: {\n                  x: left,\n                  y: top + window.scrollY,\n                  width,\n                  height,\n                },\n              });\n            }\n          }\n        }\n\n        // 状態リセット\n        this.mouseDownPos = null;\n        this.dragStart = null;\n        if (this.isDragActive) {\n          this.isDragActive = false;\n          this.dragStateChange$.next(false);\n          this.dragRect$.next(null);\n          this.dragHighlights$.next([]);\n        }\n      };\n\n      document.addEventListener('mouseup', handleMouseUp);\n      this.cleanupFns.push(() => document.removeEventListener('mouseup', handleMouseUp));\n\n      // キーボードリスナー\n      const handleKeyDown = (e: KeyboardEvent): void => {\n        if (e.key === 'Escape') {\n          this.escapePress$.next();\n        }\n      };\n\n      document.addEventListener('keydown', handleKeyDown);\n      this.cleanupFns.push(() => document.removeEventListener('keydown', handleKeyDown));\n\n      // スクロールリスナー\n      let scrollTimeout: ReturnType<typeof setTimeout> | null = null;\n      const handleScroll = (): void => {\n        this.scrollChange$.next(window.scrollY);\n\n        if (scrollTimeout) {\n          clearTimeout(scrollTimeout);\n        }\n        scrollTimeout = originalSetTimeout(() => {\n          // スクロール終了を通知（-1で終了シグナル）\n          this.scrollChange$.next(-1);\n        }, 100);\n      };\n\n      window.addEventListener('scroll', handleScroll, { passive: true });\n      this.cleanupFns.push(() => {\n        window.removeEventListener('scroll', handleScroll);\n        if (scrollTimeout) clearTimeout(scrollTimeout);\n      });\n    });\n  }\n\n  /** DOMイベントリスナーを解除（ツールバー非活性化時に呼び出し） */\n  detach(): void {\n    this.cleanupFns.forEach(fn => fn());\n    this.cleanupFns = [];\n    this.isAttached = false;\n\n    // ドラッグ状態リセット\n    this.mouseDownPos = null;\n    this.dragStart = null;\n    this.isDragActive = false;\n    this.justFinishedDrag = false;\n  }\n\n  /** 全リソース解放（コンポーネントDestroy時） */\n  destroy(): void {\n    this.detach();\n    this.mouseMove$.complete();\n    this.elementClick$.complete();\n    this.escapePress$.complete();\n    this.scrollChange$.complete();\n    this.dragStateChange$.complete();\n    this.dragRect$.complete();\n    this.dragHighlights$.complete();\n    this.dragComplete$.complete();\n  }\n\n  /** フィードバックツールバーの要素かどうか判定 */\n  private isToolbarElement(element: HTMLElement): boolean {\n    return !!element.closest('[data-feedback-toolbar]') ||\n           !!element.closest('[data-annotation-popup]') ||\n           !!element.closest('.agentation-settings') ||\n           !!element.closest('.agentation-marker');\n  }\n\n  /** ドラッグ矩形内の要素ハイライト用DOMRectを検出 */\n  private findElementsInRect(left: number, top: number, right: number, bottom: number): DOMRect[] {\n    const midX = (left + right) / 2;\n    const midY = (top + bottom) / 2;\n\n    // 9つのサンプルポイントで要素を検出\n    const candidateElements = new Set<HTMLElement>();\n    const points = [\n      [left, top], [right, top],\n      [left, bottom], [right, bottom],\n      [midX, midY],\n      [midX, top], [midX, bottom],\n      [left, midY], [right, midY],\n    ];\n\n    for (const [x, y] of points) {\n      const elements = document.elementsFromPoint(x, y);\n      for (const el of elements) {\n        if (el instanceof HTMLElement) candidateElements.add(el);\n      }\n    }\n\n    // 近傍要素も検索\n    const nearbyElements = Array.from(document.querySelectorAll(this.NEARBY_SELECTOR));\n    for (const el of nearbyElements) {\n      if (!(el instanceof HTMLElement)) continue;\n      const rect = el.getBoundingClientRect();\n      const centerX = rect.left + rect.width / 2;\n      const centerY = rect.top + rect.height / 2;\n      const centerInside = centerX >= left && centerX <= right && centerY >= top && centerY <= bottom;\n\n      const overlapX = Math.min(rect.right, right) - Math.max(rect.left, left);\n      const overlapY = Math.min(rect.bottom, bottom) - Math.max(rect.top, top);\n      const overlapArea = overlapX > 0 && overlapY > 0 ? overlapX * overlapY : 0;\n      const elementArea = rect.width * rect.height;\n      const overlapRatio = elementArea > 0 ? overlapArea / elementArea : 0;\n\n      if (centerInside || overlapRatio > 0.5) {\n        candidateElements.add(el);\n      }\n    }\n\n    // フィルタリングして有意な要素のみ返す\n    const allMatching: DOMRect[] = [];\n    for (const el of candidateElements) {\n      if (this.isToolbarElement(el)) continue;\n\n      const rect = el.getBoundingClientRect();\n      // 大きすぎる・小さすぎる要素を除外\n      if (rect.width > window.innerWidth * 0.8 && rect.height > window.innerHeight * 0.5) continue;\n      if (rect.width < 10 || rect.height < 10) continue;\n\n      // ドラッグ矩形と交差判定\n      if (rect.left < right && rect.right > left && rect.top < bottom && rect.bottom > top) {\n        const tagName = el.tagName;\n        let shouldInclude = this.MEANINGFUL_TAGS.has(tagName);\n\n        // div/spanは有意な内容がある場合のみ\n        if (!shouldInclude && (tagName === 'DIV' || tagName === 'SPAN')) {\n          const hasText = el.textContent && el.textContent.trim().length > 0;\n          const isInteractive = el.onclick !== null\n            || el.getAttribute('role') === 'button'\n            || el.getAttribute('role') === 'link'\n            || el.classList.contains('clickable')\n            || el.hasAttribute('data-clickable');\n\n          if ((hasText || isInteractive) && !el.querySelector('p, h1, h2, h3, h4, h5, h6, button, a')) {\n            shouldInclude = true;\n          }\n        }\n\n        if (shouldInclude) {\n          // 親要素の除外（既存のマッチが完全に包含する場合）\n          let dominated = false;\n          for (const existingRect of allMatching) {\n            if (existingRect.left <= rect.left && existingRect.right >= rect.right\n              && existingRect.top <= rect.top && existingRect.bottom >= rect.bottom) {\n              dominated = true;\n              break;\n            }\n          }\n          if (!dominated) allMatching.push(rect);\n        }\n      }\n    }\n\n    return allMatching;\n  }\n\n  /** mouseup時の最終要素検出（より厳密なセレクタ） */\n  private findFinalElements(left: number, top: number, right: number, bottom: number): Array<{ element: HTMLElement; rect: DOMRect }> {\n    const allMatching: Array<{ element: HTMLElement; rect: DOMRect }> = [];\n\n    document.querySelectorAll(this.FINAL_SELECTOR).forEach(el => {\n      if (!(el instanceof HTMLElement)) return;\n      if (this.isToolbarElement(el)) return;\n\n      const rect = el.getBoundingClientRect();\n      if (rect.width > window.innerWidth * 0.8 && rect.height > window.innerHeight * 0.5) return;\n      if (rect.width < 10 || rect.height < 10) return;\n\n      if (rect.left < right && rect.right > left && rect.top < bottom && rect.bottom > top) {\n        allMatching.push({ element: el, rect });\n      }\n    });\n\n    // 子要素が選択されている場合は親を除外\n    return allMatching.filter(({ element: el }) =>\n      !allMatching.some(({ element: other }) => other !== el && el.contains(other)),\n    );\n  }\n}\n","// =============================================================================\n// サーバー同期サービス\n// =============================================================================\n//\n// SSEベースのサーバー同期サービス。\n// セッション管理、リアルタイムイベント受信、指数バックオフ再接続を提供する。\n//\n\nimport { Injectable, signal, DestroyRef, inject } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { createSession, getSession } from '../utils/sync';\nimport { saveSessionId, loadSessionId } from '../utils/storage';\nimport { originalSetTimeout } from '../utils/freeze-animations';\nimport type { Annotation } from '../types';\n\n// サーバーイベントの型\nexport interface ServerAnnotationEvent {\n  type: 'annotation.updated' | 'annotation.created' | 'annotation.deleted';\n  payload: Partial<Annotation> & { id: string; status?: string };\n}\n\n@Injectable()\nexport class ServerSyncService {\n  private readonly destroyRef = inject(DestroyRef);\n\n  // SSE接続\n  private eventSource: EventSource | null = null;\n  private reconnectTimer: ReturnType<typeof setTimeout> | null = null;\n  private reconnectAttempts = 0;\n  private readonly MAX_RECONNECT_ATTEMPTS = 5;\n  private readonly BASE_BACKOFF_MS = 1000;\n\n  // 接続パラメータ\n  private endpoint: string | null = null;\n  private sessionId: string | null = null;\n\n  // 接続状態\n  readonly connectionStatus = signal<'disconnected' | 'connecting' | 'connected' | 'error'>('disconnected');\n\n  // サーバーからのイベントストリーム\n  readonly serverEvent$ = new Subject<ServerAnnotationEvent>();\n\n  // ヘルスチェック間隔\n  private healthCheckInterval: ReturnType<typeof setInterval> | null = null;\n\n  constructor() {\n    // DestroyRefでクリーンアップ\n    this.destroyRef.onDestroy(() => {\n      this.destroy();\n    });\n  }\n\n  /** SSE接続を開始 */\n  async connect(endpoint: string, options?: {\n    sessionId?: string;\n    pathname?: string;\n  }): Promise<string | null> {\n    this.endpoint = endpoint;\n    this.connectionStatus.set('connecting');\n\n    const pathname = options?.pathname || (typeof window !== 'undefined' ? window.location.pathname : '/');\n    const pageUrl = typeof window !== 'undefined' ? window.location.href : '';\n\n    try {\n      // セッションID取得（優先順位: 引数 → localStorage → 新規作成）\n      let sid = options?.sessionId || loadSessionId(pathname);\n\n      if (sid) {\n        // 既存セッションの取得を試行\n        try {\n          const session = await getSession(endpoint, sid);\n          this.sessionId = session.id;\n        } catch {\n          // セッションが見つからない場合は新規作成\n          sid = null;\n        }\n      }\n\n      if (!sid) {\n        // 新規セッション作成\n        const session = await createSession(endpoint, pageUrl);\n        this.sessionId = session.id;\n        saveSessionId(pathname, session.id);\n      }\n\n      // SSE接続開始\n      this.startSSE();\n\n      // ヘルスチェック開始\n      this.startHealthCheck();\n\n      this.connectionStatus.set('connected');\n      this.reconnectAttempts = 0;\n\n      return this.sessionId;\n    } catch {\n      this.connectionStatus.set('error');\n      this.scheduleReconnect();\n      return null;\n    }\n  }\n\n  /** SSE接続を切断 */\n  disconnect(): void {\n    this.stopSSE();\n    this.stopHealthCheck();\n    this.clearReconnectTimer();\n    this.connectionStatus.set('disconnected');\n    this.reconnectAttempts = 0;\n  }\n\n  /** 全リソース解放 */\n  destroy(): void {\n    this.disconnect();\n    this.serverEvent$.complete();\n    this.endpoint = null;\n    this.sessionId = null;\n  }\n\n  /** 現在のセッションIDを取得 */\n  getSessionId(): string | null {\n    return this.sessionId;\n  }\n\n  // ===== プライベートメソッド =====\n\n  /** SSEイベントソースを開始 */\n  private startSSE(): void {\n    if (!this.endpoint || !this.sessionId) return;\n    this.stopSSE();\n\n    this.eventSource = new EventSource(\n      `${this.endpoint}/sessions/${this.sessionId}/events`\n    );\n\n    // アノテーション更新イベント\n    const handleUpdate = (e: MessageEvent): void => {\n      try {\n        const event = JSON.parse(e.data) as { payload: ServerAnnotationEvent['payload'] };\n        this.serverEvent$.next({\n          type: 'annotation.updated',\n          payload: event.payload,\n        });\n      } catch {\n        // パースエラーは無視\n      }\n    };\n\n    this.eventSource.addEventListener('annotation.updated', handleUpdate);\n\n    // エラーハンドリング\n    this.eventSource.onerror = (): void => {\n      this.handleSSEError();\n    };\n\n    this.eventSource.onopen = (): void => {\n      this.connectionStatus.set('connected');\n      this.reconnectAttempts = 0;\n    };\n  }\n\n  /** SSEイベントソースを停止 */\n  private stopSSE(): void {\n    if (this.eventSource) {\n      this.eventSource.close();\n      this.eventSource = null;\n    }\n  }\n\n  /** SSEエラー時の処理 */\n  private handleSSEError(): void {\n    this.stopSSE();\n    if (this.connectionStatus() !== 'disconnected') {\n      this.connectionStatus.set('error');\n      this.scheduleReconnect();\n    }\n  }\n\n  /** 指数バックオフで再接続をスケジュール */\n  private scheduleReconnect(): void {\n    if (this.reconnectAttempts >= this.MAX_RECONNECT_ATTEMPTS) {\n      this.connectionStatus.set('error');\n      return;\n    }\n\n    this.clearReconnectTimer();\n    const delay = this.BASE_BACKOFF_MS * Math.pow(2, this.reconnectAttempts);\n\n    this.reconnectTimer = originalSetTimeout(() => {\n      this.reconnectAttempts++;\n      this.connectionStatus.set('connecting');\n      this.startSSE();\n    }, delay);\n  }\n\n  /** 再接続タイマーをクリア */\n  private clearReconnectTimer(): void {\n    if (this.reconnectTimer) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n  }\n\n  /** ヘルスチェックを開始（10秒間隔） */\n  private startHealthCheck(): void {\n    this.stopHealthCheck();\n\n    const check = async (): Promise<void> => {\n      if (!this.endpoint) return;\n      try {\n        const response = await fetch(`${this.endpoint}/health`);\n        if (response.ok) {\n          if (this.connectionStatus() === 'error') {\n            this.connectionStatus.set('connected');\n            this.reconnectAttempts = 0;\n          }\n        }\n      } catch {\n        if (this.connectionStatus() === 'connected') {\n          this.connectionStatus.set('error');\n        }\n      }\n    };\n\n    check();\n    this.healthCheckInterval = setInterval(check, 10000);\n  }\n\n  /** ヘルスチェックを停止 */\n  private stopHealthCheck(): void {\n    if (this.healthCheckInterval) {\n      clearInterval(this.healthCheckInterval);\n      this.healthCheckInterval = null;\n    }\n  }\n}\n","// =============================================================================\n// Agentationメインコンポーネント\n// =============================================================================\n//\n// 公開APIの唯一のエントリポイント。\n// React版のPageFeedbackToolbarCSSに相当するAngularコンポーネント。\n// ツールバー、マーカー、ホバーハイライト、ポップアップを統合管理する。\n//\n\nimport {\n  Component,\n  ChangeDetectionStrategy,\n  ViewEncapsulation,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnDestroy,\n  inject,\n  effect,\n  signal,\n  NgZone,\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { OverlayContainer } from '@angular/cdk/overlay';\nimport { MarkerComponent } from './marker.component';\nimport { PopupComponent } from './popup.component';\nimport { SettingsComponent } from './settings.component';\nimport { IconComponent } from '../icons/icon.component';\nimport { AgentationOverlayContainer } from './overlay-container';\nimport { AgentationService } from '../services/agentation.service';\nimport { DOMEventService } from '../services/dom-event.service';\nimport { ServerSyncService } from '../services/server-sync.service';\nimport {\n  ICON_PLUS,\n  ICON_EYE_ANIMATED,\n  ICON_PAUSE_PLAY_ANIMATED,\n  ICON_COPY_ANIMATED,\n  ICON_SEND_ARROW,\n  ICON_GEAR,\n  ICON_TRASH_ALT,\n  ICON_SUN,\n  ICON_MOON,\n  ICON_CHEVRON_LEFT,\n  ICON_LIST_SPARKLE,\n  ICON_ANIMATED_BUNNY,\n} from '../icons/icon-data';\nimport { hexToRgba } from '../utils/helpers';\nimport { freeze as freezeAll, unfreeze as unfreezeAll } from '../utils/freeze-animations';\nimport type { Annotation } from '../types';\n\n@Component({\n  selector: 'agentation',\n  standalone: true,\n  imports: [\n    CommonModule,\n    OverlayModule,\n    MarkerComponent,\n    PopupComponent,\n    SettingsComponent,\n    IconComponent,\n  ],\n  templateUrl: './agentation.component.html',\n  styleUrl: './agentation.component.scss',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  providers: [\n    AgentationService,\n    DOMEventService,\n    ServerSyncService,\n    { provide: OverlayContainer, useClass: AgentationOverlayContainer },\n  ],\n})\nexport class AgentationComponent implements OnInit, OnDestroy {\n  // ===== 入力プロパティ =====\n  /** サーバーエンドポイントURL */\n  @Input() endpoint?: string;\n  /** 既存セッションID */\n  @Input() sessionId?: string;\n  /** コピー時にクリップボードに書き込むか */\n  @Input() copyToClipboard = true;\n  /** WebhookURL */\n  @Input() webhookUrl?: string;\n\n  // ===== 出力イベント =====\n  @Output() annotationAdd = new EventEmitter<Annotation>();\n  @Output() annotationDelete = new EventEmitter<Annotation>();\n  @Output() annotationUpdate = new EventEmitter<Annotation>();\n  @Output() annotationsClear = new EventEmitter<Annotation[]>();\n  @Output() copyOutput = new EventEmitter<string>();\n  @Output() sessionCreated = new EventEmitter<string>();\n\n  // ===== サービス注入 =====\n  readonly service = inject(AgentationService);\n  private readonly domEvents = inject(DOMEventService);\n  private readonly serverSync = inject(ServerSyncService);\n  private readonly ngZone = inject(NgZone);\n\n  // ===== アイコンデータ =====\n  readonly icons = {\n    plus: ICON_PLUS,\n    eyeAnimated: ICON_EYE_ANIMATED,\n    pausePlay: ICON_PAUSE_PLAY_ANIMATED,\n    copy: ICON_COPY_ANIMATED,\n    send: ICON_SEND_ARROW,\n    gear: ICON_GEAR,\n    trash: ICON_TRASH_ALT,\n    sun: ICON_SUN,\n    moon: ICON_MOON,\n    chevronLeft: ICON_CHEVRON_LEFT,\n    listSparkle: ICON_LIST_SPARKLE,\n    bunny: ICON_ANIMATED_BUNNY,\n  };\n\n  // ユーティリティ公開（テンプレートで使用）\n  readonly hexToRgba = hexToRgba;\n\n  // shakeトリガーカウンター（signal inputベース）\n  readonly pendingShakeCount = signal(0);\n  readonly editShakeCount = signal(0);\n\n  // ドラッグ選択の状態\n  readonly isDragging = signal(false);\n  readonly dragRectStyle = signal<Record<string, string>>({});\n  readonly dragHighlightRects = signal<DOMRect[]>([]);\n\n  /** DOMRectをngStyleオブジェクトに変換 */\n  rectToStyle(rect: DOMRect): Record<string, string> {\n    return {\n      position: 'fixed',\n      left: rect.left + 'px',\n      top: rect.top + 'px',\n      width: rect.width + 'px',\n      height: rect.height + 'px',\n    };\n  }\n\n  constructor() {\n    // isActive変更を監視してDOMイベントをattach/detach\n    effect(() => {\n      if (this.service.isActive()) {\n        this.domEvents.attach({\n          angularMode: this.service.angularMode(),\n          outputDetail: this.service.settings().outputDetail,\n          blockInteractions: this.service.settings().blockInteractions,\n        });\n      } else {\n        this.domEvents.detach();\n      }\n    });\n\n    // フリーズ状態の変更を監視\n    effect(() => {\n      if (this.service.isFrozen()) {\n        freezeAll();\n      } else {\n        unfreezeAll();\n      }\n    });\n  }\n\n  ngOnInit(): void {\n    // サービス初期化\n    this.service.copyToClipboardEnabled = this.copyToClipboard;\n    this.service.configure({\n      endpoint: this.endpoint,\n      sessionId: this.sessionId,\n      webhookUrl: this.webhookUrl,\n    });\n\n    // DOMイベント購読\n    this.domEvents.mouseMove$.subscribe(result => {\n      if (!this.service.isActive()) return;\n      this.service.updateHover(\n        result.element ? {\n          element: result.element,\n          elementName: result.elementName,\n          elementPath: result.elementPath,\n          rect: result.rect,\n          angularComponents: result.angularComponents,\n        } : null,\n        result.position,\n      );\n    });\n\n    this.domEvents.elementClick$.subscribe(result => {\n      if (!this.service.isActive()) return;\n\n      // ポップアップ表示中はshakeして新規作成しない（React版準拠）\n      if (this.service.pendingAnnotation()) {\n        this.ngZone.run(() => this.pendingShakeCount.update(v => (v + 1) % 1000000));\n        return;\n      }\n      if (this.service.editingAnnotation()) {\n        this.ngZone.run(() => this.editShakeCount.update(v => (v + 1) % 1000000));\n        return;\n      }\n\n      this.service.startAnnotation({\n        x: result.x,\n        y: result.y,\n        clientY: result.clientY,\n        element: result.element,\n        elementPath: result.elementPath,\n        selectedText: result.selectedText,\n        boundingBox: result.boundingBox,\n        nearbyText: result.nearbyText,\n        cssClasses: result.cssClasses,\n        isFixed: result.isFixed,\n        fullPath: result.fullPath,\n        accessibility: result.accessibility,\n        computedStyles: result.computedStyles,\n        computedStylesObj: result.computedStylesObj,\n        nearbyElements: result.nearbyElements,\n        angularComponents: result.angularComponents,\n        targetElement: result.targetElement,\n      });\n    });\n\n    this.domEvents.escapePress$.subscribe(() => {\n      if (this.service.pendingAnnotation()) {\n        this.service.cancelPending();\n      } else if (this.service.editingAnnotation()) {\n        this.service.cancelEditing();\n      } else if (this.service.isActive()) {\n        this.service.deactivate();\n      }\n    });\n\n    // ドラッグ選択イベント購読\n    this.domEvents.dragStateChange$.subscribe(isDragging => {\n      this.isDragging.set(isDragging);\n      if (isDragging) {\n        // ドラッグ開始時にホバー情報をクリア\n        this.service.updateHover(null, { x: 0, y: 0 });\n      }\n    });\n\n    this.domEvents.dragRect$.subscribe(rect => {\n      if (rect) {\n        this.dragRectStyle.set({\n          position: 'fixed',\n          left: rect.left + 'px',\n          top: rect.top + 'px',\n          width: rect.width + 'px',\n          height: rect.height + 'px',\n        });\n      }\n    });\n\n    this.domEvents.dragHighlights$.subscribe(rects => {\n      this.dragHighlightRects.set(rects);\n    });\n\n    this.domEvents.dragComplete$.subscribe(result => {\n      if (!this.service.isActive()) return;\n\n      // ポップアップ表示中はshakeして新規作成しない（React版準拠）\n      if (this.service.pendingAnnotation()) {\n        this.ngZone.run(() => this.pendingShakeCount.update(v => (v + 1) % 1000000));\n        return;\n      }\n      if (this.service.editingAnnotation()) {\n        this.ngZone.run(() => this.editShakeCount.update(v => (v + 1) % 1000000));\n        return;\n      }\n\n      this.service.startAnnotation({\n        x: result.x,\n        y: result.y,\n        clientY: result.clientY,\n        element: result.element,\n        elementPath: result.elementPath,\n        selectedText: result.selectedText,\n        boundingBox: result.boundingBox,\n        nearbyText: result.nearbyText,\n        cssClasses: result.cssClasses,\n        isFixed: result.isFixed,\n        isMultiSelect: result.isMultiSelect,\n        fullPath: result.fullPath,\n        accessibility: result.accessibility,\n        computedStyles: result.computedStyles,\n        computedStylesObj: result.computedStylesObj,\n        nearbyElements: result.nearbyElements,\n        angularComponents: result.angularComponents,\n        targetElement: result.targetElement,\n      });\n    });\n\n    this.domEvents.scrollChange$.subscribe(y => {\n      if (y === -1) {\n        this.service.setScrolling(false);\n      } else {\n        this.service.updateScrollY(y);\n        this.service.setScrolling(true);\n      }\n    });\n\n    // サーバー接続\n    if (this.endpoint) {\n      this.serverSync.connect(this.endpoint, {\n        sessionId: this.sessionId,\n      }).then(sid => {\n        if (sid) {\n          this.service.syncState.update(s => ({ ...s, currentSessionId: sid, connectionStatus: 'connected' }));\n          if (!this.sessionId) {\n            this.sessionCreated.emit(sid);\n          }\n        }\n      });\n\n      // サーバーイベント購読\n      this.serverSync.serverEvent$.subscribe(event => {\n        const removedStatuses = ['resolved', 'dismissed'];\n        if (event.type === 'annotation.updated' && removedStatuses.includes(event.payload.status || '')) {\n          this.service.deleteAnnotation(event.payload.id);\n        }\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.domEvents.destroy();\n    this.serverSync.destroy();\n\n    // フリーズ解除\n    if (this.service.isFrozen()) {\n      unfreezeAll();\n    }\n  }\n\n  // ===== テンプレート用メソッド =====\n\n  /** ツールバー活性化トグル */\n  toggleActive(): void {\n    if (this.service.isActive()) {\n      this.service.deactivate();\n    } else {\n      this.service.activate();\n    }\n  }\n\n  /** アノテーション送信 */\n  onAnnotationSubmit(text: string): void {\n    const annotation = this.service.addAnnotation(text);\n    if (annotation) {\n      this.annotationAdd.emit(annotation);\n    }\n  }\n\n  /** アノテーション編集送信 */\n  onAnnotationEditSubmit(text: string): void {\n    const editing = this.service.editingAnnotation();\n    if (!editing) return;\n    const updated = this.service.updateAnnotation(editing.id, text);\n    if (updated) {\n      this.annotationUpdate.emit(updated);\n    }\n  }\n\n  /** マーカークリック */\n  onMarkerClick(id: string): void {\n    const behavior = this.service.settings().markerClickBehavior;\n    if (behavior === 'delete') {\n      const deleted = this.service.deleteAnnotation(id);\n      if (deleted) {\n        this.annotationDelete.emit(deleted);\n      }\n    } else {\n      const annotation = this.service.annotations().find(a => a.id === id);\n      if (annotation) {\n        this.service.startEditing(annotation);\n      }\n    }\n  }\n\n  /** 編集ポップアップからの削除（常に削除動作） */\n  onDeleteFromPopup(id: string): void {\n    const deleted = this.service.deleteAnnotation(id);\n    if (deleted) {\n      this.annotationDelete.emit(deleted);\n    }\n  }\n\n  /** コピー */\n  async onCopy(): Promise<void> {\n    const output = await this.service.copyOutput();\n    this.copyOutput.emit(output);\n  }\n\n  /** 全クリア */\n  onClearAll(): void {\n    const cleared = this.service.clearAll();\n    this.annotationsClear.emit(cleared);\n  }\n\n  /** エージェントに送信 */\n  async onSendToAgent(): Promise<void> {\n    await this.service.sendToAgent();\n  }\n}\n","<div\n  data-agentation\n  [class.agentation--dark]=\"service.toolbarState().isDarkMode\"\n>\n  <!-- フローティングツールバー -->\n  <div\n    class=\"agentation-toolbar\"\n    [style.--accent-color]=\"service.settings().annotationColor\"\n    data-feedback-toolbar\n  >\n    <!-- マスコット/活性化ボタン -->\n    <button\n      class=\"agentation-toolbar__toggle\"\n      (click)=\"toggleActive()\"\n      type=\"button\"\n    >\n      <agentation-icon [data]=\"icons.bunny\" [size]=\"20\" />\n      @if (!service.isActive() && service.hasAnnotations()) {\n        <span\n          class=\"agentation-toolbar__badge\"\n          [style.backgroundColor]=\"service.settings().annotationColor\"\n        >\n          {{ service.annotations().length }}\n        </span>\n      }\n    </button>\n\n    @if (service.isActive()) {\n      <!-- アノテーション数バッジ -->\n      @if (service.hasAnnotations()) {\n        <div class=\"agentation-toolbar__count\">\n          {{ service.annotations().length }}\n        </div>\n      }\n\n      <!-- マーカー表示トグル -->\n      <button\n        class=\"agentation-toolbar__button\"\n        (click)=\"service.toggleMarkers()\"\n        type=\"button\"\n      >\n        <agentation-icon [data]=\"icons.eyeAnimated\" [size]=\"24\" />\n      </button>\n\n      <!-- フリーズトグル -->\n      <button\n        class=\"agentation-toolbar__button\"\n        (click)=\"service.toggleFreeze()\"\n        type=\"button\"\n      >\n        <agentation-icon [data]=\"icons.pausePlay\" [size]=\"24\" />\n      </button>\n\n      <!-- コピー -->\n      <button\n        class=\"agentation-toolbar__button\"\n        (click)=\"onCopy()\"\n        [disabled]=\"!service.hasAnnotations()\"\n        type=\"button\"\n      >\n        <agentation-icon [data]=\"icons.copy\" [size]=\"24\" />\n      </button>\n\n      <!-- エージェントに送信（エンドポイント接続時のみ） -->\n      @if (endpoint && service.syncState().currentSessionId) {\n        <button\n          class=\"agentation-toolbar__button\"\n          (click)=\"onSendToAgent()\"\n          [disabled]=\"!service.hasAnnotations()\"\n          type=\"button\"\n          title=\"Send Annotations\"\n        >\n          <agentation-icon [data]=\"icons.send\" [size]=\"24\" />\n        </button>\n      }\n\n      <!-- 全クリア -->\n      <button\n        class=\"agentation-toolbar__button agentation-toolbar__button--danger\"\n        (click)=\"onClearAll()\"\n        [disabled]=\"!service.hasAnnotations()\"\n        type=\"button\"\n      >\n        <agentation-icon [data]=\"icons.trash\" [size]=\"24\" />\n      </button>\n\n      <!-- 設定 -->\n      <button\n        class=\"agentation-toolbar__button\"\n        (click)=\"service.toggleSettings()\"\n        type=\"button\"\n      >\n        <agentation-icon [data]=\"icons.gear\" [size]=\"24\" />\n        @if (endpoint && service.connectionStatus() !== 'disconnected') {\n          <span class=\"agentation-toolbar__settings-badge\"\n            [class.agentation-toolbar__settings-badge--connected]=\"service.connectionStatus() === 'connected'\"\n            [class.agentation-toolbar__settings-badge--connecting]=\"service.connectionStatus() === 'connecting'\"\n            [class.agentation-toolbar__settings-badge--error]=\"service.connectionStatus() === 'error'\"\n          ></span>\n        }\n      </button>\n\n      <!-- ダークモードトグル -->\n      <button\n        class=\"agentation-toolbar__button\"\n        (click)=\"service.toggleDarkMode()\"\n        type=\"button\"\n      >\n        <agentation-icon\n          [data]=\"service.toolbarState().isDarkMode ? icons.sun : icons.moon\"\n          [size]=\"24\"\n        />\n      </button>\n    }\n  </div>\n\n  <!-- 設定パネル -->\n  @if (service.toolbarState().showSettings && service.isActive()) {\n    <agentation-settings [service]=\"service\" [endpoint]=\"endpoint || ''\" />\n  }\n\n  <!-- マーカーレイヤー -->\n  @if (service.isActive() && service.showMarkers()) {\n    @for (annotation of service.annotations(); track annotation.id; let i = $index) {\n      <agentation-marker\n        [annotationId]=\"annotation.id\"\n        [number]=\"i + 1\"\n        [x]=\"annotation.x\"\n        [y]=\"annotation.y\"\n        [scrollY]=\"service.scrollY()\"\n        [isFixed]=\"annotation.isFixed || false\"\n        [accentColor]=\"service.settings().annotationColor\"\n        [isExiting]=\"service.annotationState().exitingMarkers.has(annotation.id)\"\n        [isHovered]=\"service.annotationState().hoveredMarkerId === annotation.id\"\n        [clickBehavior]=\"service.settings().markerClickBehavior\"\n        (markerClick)=\"onMarkerClick($event)\"\n        (markerHoverStart)=\"service.setHoveredMarker($event)\"\n        (markerHoverEnd)=\"service.setHoveredMarker(null)\"\n      />\n    }\n  }\n\n  <!-- ホバーハイライト -->\n  @if (service.isActive() && service.hoverInfo()?.rect && !isDragging()) {\n    <div\n      class=\"agentation-hover-highlight\"\n      [style.position]=\"'fixed'\"\n      [style.left.px]=\"service.hoverInfo()!.rect!.left\"\n      [style.top.px]=\"service.hoverInfo()!.rect!.top\"\n      [style.width.px]=\"service.hoverInfo()!.rect!.width\"\n      [style.height.px]=\"service.hoverInfo()!.rect!.height\"\n      [style.border]=\"'2px solid ' + service.settings().annotationColor\"\n      [style.backgroundColor]=\"hexToRgba(service.settings().annotationColor, 0.1)\"\n      [style.pointerEvents]=\"'none'\"\n      [style.zIndex]=\"'100000'\"\n      [style.borderRadius]=\"'4px'\"\n    ></div>\n  }\n\n  <!-- ホバーラベル -->\n  @if (service.isActive() && service.hoverInfo()?.element && !isDragging()) {\n    <div\n      class=\"agentation-hover-label\"\n      [style.position]=\"'fixed'\"\n      [style.left.px]=\"service.hoverPosition().x + 16\"\n      [style.top.px]=\"service.hoverPosition().y + 16\"\n      [style.zIndex]=\"'100001'\"\n      [style.pointerEvents]=\"'none'\"\n    >\n      {{ service.hoverInfo()!.element }}\n    </div>\n  }\n\n  <!-- アノテーションポップアップ（新規作成） -->\n  @if (service.pendingAnnotation()) {\n    <agentation-popup\n      [shakeTrigger]=\"pendingShakeCount()\"\n      [element]=\"service.pendingAnnotation()!.element\"\n      [selectedText]=\"service.pendingAnnotation()!.selectedText\"\n      [accentColor]=\"service.settings().annotationColor\"\n      [lightMode]=\"!service.toolbarState().isDarkMode\"\n      [computedStyles]=\"service.pendingAnnotation()!.computedStylesObj\"\n      [positionStyle]=\"{\n        position: 'fixed',\n        left: service.pendingAnnotation()!.x + '%',\n        top: service.pendingAnnotation()!.clientY + 'px'\n      }\"\n      (submitText)=\"onAnnotationSubmit($event)\"\n      (cancel)=\"service.cancelPending()\"\n    />\n  }\n\n  <!-- アノテーションポップアップ（編集） -->\n  @if (service.editingAnnotation()) {\n    <agentation-popup\n      [shakeTrigger]=\"editShakeCount()\"\n      [element]=\"service.editingAnnotation()!.element\"\n      [initialValue]=\"service.editingAnnotation()!.comment\"\n      [submitLabel]=\"'Save'\"\n      [accentColor]=\"service.settings().annotationColor\"\n      [lightMode]=\"!service.toolbarState().isDarkMode\"\n      [showDelete]=\"true\"\n      [positionStyle]=\"{\n        position: 'fixed',\n        left: service.editingAnnotation()!.x + '%',\n        top: (service.editingAnnotation()!.isFixed ? service.editingAnnotation()!.y : service.editingAnnotation()!.y - service.scrollY()) + 'px'\n      }\"\n      (submitText)=\"onAnnotationEditSubmit($event)\"\n      (cancel)=\"service.cancelEditing()\"\n      (delete)=\"onDeleteFromPopup(service.editingAnnotation()!.id)\"\n    />\n  }\n\n  <!-- ドラッグ選択UI -->\n  @if (isDragging()) {\n    <div class=\"agentation-drag-selection\" [ngStyle]=\"dragRectStyle()\"></div>\n    @for (rect of dragHighlightRects(); track $index) {\n      <div class=\"agentation-selected-highlight\" [ngStyle]=\"rectToStyle(rect)\"></div>\n    }\n  }\n</div>\n","// =============================================================================\n// @agentation/angular - 公開API\n// =============================================================================\n\n// メインコンポーネント\nexport { AgentationComponent } from './lib/components/agentation.component';\n\n// サブコンポーネント（上級者向け）\nexport { MarkerComponent } from './lib/components/marker.component';\nexport { PopupComponent } from './lib/components/popup.component';\nexport { SettingsComponent } from './lib/components/settings.component';\nexport { IconComponent } from './lib/icons/icon.component';\n\n// サービス\nexport { AgentationService } from './lib/services/agentation.service';\nexport type {\n  ToolbarUIState,\n  AnnotationState,\n  PendingAnnotation,\n  HoverInfo,\n  SyncState,\n  ActionUIState,\n} from './lib/services/agentation.service';\nexport { DOMEventService } from './lib/services/dom-event.service';\nexport type { MouseMoveResult, ClickResult } from './lib/services/dom-event.service';\nexport { ServerSyncService } from './lib/services/server-sync.service';\nexport type { ServerAnnotationEvent } from './lib/services/server-sync.service';\n\n// Overlay\nexport { AgentationOverlayContainer } from './lib/components/overlay-container';\n\n// 型定義\nexport type {\n  Annotation,\n  AnnotationIntent,\n  AnnotationSeverity,\n  AnnotationStatus,\n  Session,\n  SessionStatus,\n  SessionWithAnnotations,\n  ThreadMessage,\n} from './lib/types';\n\n// 定数・設定\nexport type { ToolbarSettings, MarkerClickBehavior } from './lib/constants';\nexport {\n  DEFAULT_SETTINGS,\n  OUTPUT_TO_ANGULAR_MODE,\n  COLOR_OPTIONS,\n  OUTPUT_DETAIL_OPTIONS,\n  MARKER_CLICK_OPTIONS,\n} from './lib/constants';\n\n// ユーティリティ（上級者向け）\nexport {\n  deepElementFromPoint,\n  isElementFixed,\n  hexToRgba,\n  formatRelativeTime,\n  truncateUrl,\n  isValidUrl,\n} from './lib/utils/helpers';\nexport { generateOutput } from './lib/utils/output-generator';\nexport type { OutputDetailLevel, AngularComponentMode } from './lib/utils/output-generator';\n\n// アイコンデータ（tree-shakable）\nexport type { IconData, PathData, CircleData, AnimatedIconData } from './lib/icons/icon-data';\n// 個別アイコンは icon-data.ts から直接インポートで利用可能\n\n// 検出\nexport { getAngularComponentName } from './lib/detection/angular-detector';\nexport type { DetectionConfig, ComponentInfo } from './lib/detection/angular-detector';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1","deleteAnnotationFromServer","updateAnnotationOnServer","freezeAll","unfreezeAll"],"mappings":"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"}